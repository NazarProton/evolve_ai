var qa=Object.defineProperty;var Va=(t,e,n)=>e in t?qa(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var j=(t,e,n)=>Va(t,typeof e!="symbol"?e+"":e,n);import{j as X,a as Q}from"./index-BDbXzdGX.js";import{C as Ya,g as Ga,a as $a}from"./react-spline-B22AZ0Ok.js";import{F as Ja}from"./FooterLinks-BfbqZUOk.js";const Wa=({listening:t,callActive:e,startListening:n,stopCall:r})=>{const s=()=>{e?r():n()},o=e?"Hang Up":t?"Listening":"Press to Talk";return X.jsxs("div",{className:"relative flex w-full flex-col items-center font-chivo-mono-light uppercase",children:[X.jsx("p",{className:"text-white mb-4 text-lg",children:o}),X.jsxs("button",{onClick:s,className:"relative flex items-center justify-center h-[48px] w-[48px] transition-opacity duration-300",children:[X.jsx("div",{className:"absolute inset-0"}),X.jsx("img",{src:e?"/hangUp.svg":t?"/microOff.svg":"/microOn.svg",alt:e?"Hang Up":t?"Microphone On":"Microphone Off",className:"w-12 h-12 opacity-25 transition-opacity duration-300 ease-out hover:opacity-100"})]})]})},za=({listening:t,startListening:e,circleSize:n,assistantSpeaking:r})=>{const[u,f]=Q.useState(.6666),h=Q.useRef(!1);return Q.useEffect(()=>{let p=.6666;const y=110;if(t){h.current||(f(.8333),h.current=!0);const _=n/y;_>.625&&_<1?p=n/y:n>1?p=1:p=.625,f(p)}else{p=.6666,f(.625),h.current=!1;const _=setTimeout(()=>f(.6666),300);return()=>clearTimeout(_)}},[n,t]),X.jsxs("div",{className:"relative w-full min-[384px]:w-[384px] h-[384px] flex justify-center items-center overflow-hidden",children:[X.jsx("div",{className:"relative w-full h-[384px]",children:X.jsx(Ya,{onClick:e,style:{position:"absolute",width:"100%",height:"100%",top:"50%",left:"50%",translate:"-50% -50%",transform:`scale(${u})`,transition:"transform 0.3s ease-out",cursor:"pointer"},scene:"https://prod.spline.design/moDxSU2YolLqofps/scene.splinecode"})}),X.jsx("div",{className:`absolute inset-0 rounded-full transition-opacity duration-300 ease-out ${r?"opacity-100 animate-ripple":"opacity-0"}`})]})},Ha=()=>{const[t,e]=Q.useState(!1),[n,r]=Q.useState(""),s=Q.useRef(null),o=async()=>{if(t){a();return}const c=window.SpeechRecognition||window.webkitSpeechRecognition;if(!c){alert("Your browser does not support voice input  ðŸ˜ž");return}s.current=new c,s.current.lang="uk-UA",s.current.interimResults=!1,s.current.onstart=()=>{e(!0),r("")},s.current.onend=()=>{e(!1)},s.current.onresult=u=>{const f=u.results[0][0].transcript;r(f)},s.current.start()},a=()=>{s.current&&s.current.stop()};return{listening:t,recognizedText:n,startListening:o,stopListening:a}},Qa=t=>{const[e,n]=Q.useState(20),r=Q.useRef(null),s=Q.useRef(null),o=Q.useRef(null),a=Q.useRef(null),c=Q.useRef(!1),u=Q.useRef(Date.now());Q.useEffect(()=>{t?f():h()},[t]);const f=async()=>{try{if(r.current&&r.current.state!=="closed")return;const p=await navigator.mediaDevices.getUserMedia({audio:!0});a.current=p;const y=new AudioContext,_=y.createAnalyser(),w=y.createMediaStreamSource(p),k=y.createGain();w.connect(k),k.connect(_),_.fftSize=512;const M=_.frequencyBinCount,P=new Uint8Array(M);r.current=y,s.current=_,o.current=w,c.current=!0;const x=()=>{if(!c.current)return;const W=Date.now();if(W-u.current<50){requestAnimationFrame(x);return}_.getByteTimeDomainData(P);let E=0;for(let C=0;C<M;C++){const L=(P[C]-128)/128;E+=L*L}const v=Math.sqrt(E/M),T=Math.max(80,Math.min(250,80+v*600));n(C=>C+(T-C)*.8),u.current=W,requestAnimationFrame(x)};x()}catch(p){console.error("Microphone access error",p)}},h=()=>{c.current=!1,r.current&&r.current.state!=="closed"&&(r.current.close().catch(()=>{}),r.current=null),s.current=null,o.current=null,a.current&&(a.current.getTracks().forEach(p=>p.stop()),a.current=null)};return{circleSizeSpline:e}},Ka=({listening:t,AIMessage:e})=>{const[n,r]=Q.useState(!0);return console.log(t),Q.useEffect(()=>{t&&r(!1)},[t]),X.jsxs("div",{className:`flex justify-center items-center flex-col font-chivo-mono-light
         transition-opacity ease-out duration-300 ${n?"opacity-100":"opacity-0"}`,children:[X.jsx("div",{className:" bg-red text-white py-2 px-4 ",children:e}),X.jsx("div",{className:`w-0 h-0 border-l-8 border-red border-l-transparent \r
      border-r-8 border-r-transparent border-t-16 border-t-red-500 transform`})]})};var lt={};function yr(t,e){if(t==null)return{};var n,r,s=function(a,c){if(a==null)return{};var u,f,h={},p=Object.keys(a);for(f=0;f<p.length;f++)u=p[f],c.indexOf(u)>=0||(h[u]=a[u]);return h}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function ge(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Y(t){return Y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Y(t)}function zi(t){var e=function(n,r){if(Y(n)!=="object"||n===null)return n;var s=n[Symbol.toPrimitive];if(s!==void 0){var o=s.call(n,r||"default");if(Y(o)!=="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(n)}(t,"string");return Y(e)==="symbol"?e:String(e)}function vr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,zi(r.key),r)}}function ye(t,e,n){return e&&vr(t.prototype,e),n&&vr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function we(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function St(t,e){return St=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},St(t,e)}function an(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&St(t,e)}function on(t,e){if(e&&(Y(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return we(t)}function me(t){return me=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},me(t)}function Ce(t,e,n){return(e=zi(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _r(t,e,n,r,s,o,a){try{var c=t[o](a),u=c.value}catch(f){return void n(f)}c.done?e(u):Promise.resolve(u).then(r,s)}function D(t){return function(){var e=this,n=arguments;return new Promise(function(r,s){var o=t.apply(e,n);function a(u){_r(o,r,s,a,c,"next",u)}function c(u){_r(o,r,s,a,c,"throw",u)}a(void 0)})}}function br(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ge(t,e){return function(n){if(Array.isArray(n))return n}(t)||function(n,r){var s=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(s!=null){var o,a,c,u,f=[],h=!0,p=!1;try{if(c=(s=s.call(n)).next,r===0){if(Object(s)!==s)return;h=!1}else for(;!(h=(o=c.call(s)).done)&&(f.push(o.value),f.length!==r);h=!0);}catch(y){p=!0,a=y}finally{try{if(!h&&s.return!=null&&(u=s.return(),Object(u)!==u))return}finally{if(p)throw a}}return f}}(t,e)||function(n,r){if(n){if(typeof n=="string")return br(n,r);var s=Object.prototype.toString.call(n).slice(8,-1);return s==="Object"&&n.constructor&&(s=n.constructor.name),s==="Map"||s==="Set"?Array.from(n):s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?br(n,r):void 0}}(t,e)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}var Hi,Ae={},Xa={get exports(){return Ae},set exports(t){Ae=t}},Ke=typeof Reflect=="object"?Reflect:null,Sr=Ke&&typeof Ke.apply=="function"?Ke.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};Hi=Ke&&typeof Ke.ownKeys=="function"?Ke.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var Er=Number.isNaN||function(t){return t!=t};function V(){V.init.call(this)}Xa.exports=V,Ae.once=function(t,e){return new Promise(function(n,r){function s(a){t.removeListener(e,o),r(a)}function o(){typeof t.removeListener=="function"&&t.removeListener("error",s),n([].slice.call(arguments))}Mr(t,e,o,{once:!0}),e!=="error"&&function(a,c,u){typeof a.on=="function"&&Mr(a,"error",c,u)}(t,s,{once:!0})})},V.EventEmitter=V,V.prototype._events=void 0,V.prototype._eventsCount=0,V.prototype._maxListeners=void 0;var wr=10;function $t(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function Qi(t){return t._maxListeners===void 0?V.defaultMaxListeners:t._maxListeners}function kr(t,e,n,r){var s,o,a,c;if($t(n),(o=t._events)===void 0?(o=t._events=Object.create(null),t._eventsCount=0):(o.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),o=t._events),a=o[e]),a===void 0)a=o[e]=n,++t._eventsCount;else if(typeof a=="function"?a=o[e]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),(s=Qi(t))>0&&a.length>s&&!a.warned){a.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=t,u.type=e,u.count=a.length,c=u,console&&console.warn&&console.warn(c)}return t}function Za(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Tr(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},s=Za.bind(r);return s.listener=n,r.wrapFn=s,s}function Cr(t,e,n){var r=t._events;if(r===void 0)return[];var s=r[e];return s===void 0?[]:typeof s=="function"?n?[s.listener||s]:[s]:n?function(o){for(var a=new Array(o.length),c=0;c<a.length;++c)a[c]=o[c].listener||o[c];return a}(s):Ki(s,s.length)}function Ar(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}function Ki(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function Mr(t,e,n,r){if(typeof t.on=="function")r.once?t.once(e,n):t.on(e,n);else{if(typeof t.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,function s(o){r.once&&t.removeEventListener(e,s),n(o)})}}Object.defineProperty(V,"defaultMaxListeners",{enumerable:!0,get:function(){return wr},set:function(t){if(typeof t!="number"||t<0||Er(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");wr=t}}),V.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},V.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||Er(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},V.prototype.getMaxListeners=function(){return Qi(this)},V.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var r=t==="error",s=this._events;if(s!==void 0)r=r&&s.error===void 0;else if(!r)return!1;if(r){var o;if(e.length>0&&(o=e[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=s[t];if(c===void 0)return!1;if(typeof c=="function")Sr(c,this,e);else{var u=c.length,f=Ki(c,u);for(n=0;n<u;++n)Sr(f[n],this,e)}return!0},V.prototype.addListener=function(t,e){return kr(this,t,e,!1)},V.prototype.on=V.prototype.addListener,V.prototype.prependListener=function(t,e){return kr(this,t,e,!0)},V.prototype.once=function(t,e){return $t(e),this.on(t,Tr(this,t,e)),this},V.prototype.prependOnceListener=function(t,e){return $t(e),this.prependListener(t,Tr(this,t,e)),this},V.prototype.removeListener=function(t,e){var n,r,s,o,a;if($t(e),(r=this._events)===void 0)return this;if((n=r[t])===void 0)return this;if(n===e||n.listener===e)--this._eventsCount==0?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if(typeof n!="function"){for(s=-1,o=n.length-1;o>=0;o--)if(n[o]===e||n[o].listener===e){a=n[o].listener,s=o;break}if(s<0)return this;s===0?n.shift():function(c,u){for(;u+1<c.length;u++)c[u]=c[u+1];c.pop()}(n,s),n.length===1&&(r[t]=n[0]),r.removeListener!==void 0&&this.emit("removeListener",t,a||e)}return this},V.prototype.off=V.prototype.removeListener,V.prototype.removeAllListeners=function(t){var e,n,r;if((n=this._events)===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[t]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete n[t]),this;if(arguments.length===0){var s,o=Object.keys(n);for(r=0;r<o.length;++r)(s=o[r])!=="removeListener"&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(e=n[t])=="function")this.removeListener(t,e);else if(e!==void 0)for(r=e.length-1;r>=0;r--)this.removeListener(t,e[r]);return this},V.prototype.listeners=function(t){return Cr(this,t,!0)},V.prototype.rawListeners=function(t){return Cr(this,t,!1)},V.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):Ar.call(t,e)},V.prototype.listenerCount=Ar,V.prototype.eventNames=function(){return this._eventsCount>0?Hi(this._events):[]};var Or=Object.prototype.hasOwnProperty;function Lr(t,e,n){for(n of t.keys())if(se(n,e))return n}function se(t,e){var n,r,s;if(t===e)return!0;if(t&&e&&(n=t.constructor)===e.constructor){if(n===Date)return t.getTime()===e.getTime();if(n===RegExp)return t.toString()===e.toString();if(n===Array){if((r=t.length)===e.length)for(;r--&&se(t[r],e[r]););return r===-1}if(n===Set){if(t.size!==e.size)return!1;for(r of t)if((s=r)&&typeof s=="object"&&!(s=Lr(e,s))||!e.has(s))return!1;return!0}if(n===Map){if(t.size!==e.size)return!1;for(r of t)if((s=r[0])&&typeof s=="object"&&!(s=Lr(e,s))||!se(r[1],e.get(s)))return!1;return!0}if(n===ArrayBuffer)t=new Uint8Array(t),e=new Uint8Array(e);else if(n===DataView){if((r=t.byteLength)===e.byteLength)for(;r--&&t.getInt8(r)===e.getInt8(r););return r===-1}if(ArrayBuffer.isView(t)){if((r=t.byteLength)===e.byteLength)for(;r--&&t[r]===e[r];);return r===-1}if(!n||typeof t=="object"){for(n in r=0,t)if(Or.call(t,n)&&++r&&!Or.call(e,n)||!(n in e)||!se(t[n],e[n]))return!1;return Object.keys(e).length===r}}return t!=t&&e!=e}const eo={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},Xi={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},K={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},ne={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},Le={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"};class S{static getFirstMatch(e,n){const r=n.match(e);return r&&r.length>0&&r[1]||""}static getSecondMatch(e,n){const r=n.match(e);return r&&r.length>1&&r[2]||""}static matchAndReturnConst(e,n,r){if(e.test(n))return r}static getWindowsVersionName(e){switch(e){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}static getMacOSVersionName(e){const n=e.split(".").splice(0,2).map(r=>parseInt(r,10)||0);if(n.push(0),n[0]===10)switch(n[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}}static getAndroidVersionName(e){const n=e.split(".").splice(0,2).map(r=>parseInt(r,10)||0);if(n.push(0),!(n[0]===1&&n[1]<5))return n[0]===1&&n[1]<6?"Cupcake":n[0]===1&&n[1]>=6?"Donut":n[0]===2&&n[1]<2?"Eclair":n[0]===2&&n[1]===2?"Froyo":n[0]===2&&n[1]>2?"Gingerbread":n[0]===3?"Honeycomb":n[0]===4&&n[1]<1?"Ice Cream Sandwich":n[0]===4&&n[1]<4?"Jelly Bean":n[0]===4&&n[1]>=4?"KitKat":n[0]===5?"Lollipop":n[0]===6?"Marshmallow":n[0]===7?"Nougat":n[0]===8?"Oreo":n[0]===9?"Pie":void 0}static getVersionPrecision(e){return e.split(".").length}static compareVersions(e,n,r=!1){const s=S.getVersionPrecision(e),o=S.getVersionPrecision(n);let a=Math.max(s,o),c=0;const u=S.map([e,n],f=>{const h=a-S.getVersionPrecision(f),p=f+new Array(h+1).join(".0");return S.map(p.split("."),y=>new Array(20-y.length).join("0")+y).reverse()});for(r&&(c=a-Math.min(s,o)),a-=1;a>=c;){if(u[0][a]>u[1][a])return 1;if(u[0][a]===u[1][a]){if(a===c)return 0;a-=1}else if(u[0][a]<u[1][a])return-1}}static map(e,n){const r=[];let s;if(Array.prototype.map)return Array.prototype.map.call(e,n);for(s=0;s<e.length;s+=1)r.push(n(e[s]));return r}static find(e,n){let r,s;if(Array.prototype.find)return Array.prototype.find.call(e,n);for(r=0,s=e.length;r<s;r+=1){const o=e[r];if(n(o,r))return o}}static assign(e,...n){const r=e;let s,o;if(Object.assign)return Object.assign(e,...n);for(s=0,o=n.length;s<o;s+=1){const a=n[s];typeof a=="object"&&a!==null&&Object.keys(a).forEach(c=>{r[c]=a[c]})}return e}static getBrowserAlias(e){return eo[e]}static getBrowserTypeByAlias(e){return Xi[e]||""}}const G=/version\/(\d+(\.?_?\d+)+)/i,to=[{test:[/googlebot/i],describe(t){const e={name:"Googlebot"},n=S.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,t)||S.getFirstMatch(G,t);return n&&(e.version=n),e}},{test:[/opera/i],describe(t){const e={name:"Opera"},n=S.getFirstMatch(G,t)||S.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/opr\/|opios/i],describe(t){const e={name:"Opera"},n=S.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,t)||S.getFirstMatch(G,t);return n&&(e.version=n),e}},{test:[/SamsungBrowser/i],describe(t){const e={name:"Samsung Internet for Android"},n=S.getFirstMatch(G,t)||S.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/Whale/i],describe(t){const e={name:"NAVER Whale Browser"},n=S.getFirstMatch(G,t)||S.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/MZBrowser/i],describe(t){const e={name:"MZ Browser"},n=S.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,t)||S.getFirstMatch(G,t);return n&&(e.version=n),e}},{test:[/focus/i],describe(t){const e={name:"Focus"},n=S.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,t)||S.getFirstMatch(G,t);return n&&(e.version=n),e}},{test:[/swing/i],describe(t){const e={name:"Swing"},n=S.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,t)||S.getFirstMatch(G,t);return n&&(e.version=n),e}},{test:[/coast/i],describe(t){const e={name:"Opera Coast"},n=S.getFirstMatch(G,t)||S.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe(t){const e={name:"Opera Touch"},n=S.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,t)||S.getFirstMatch(G,t);return n&&(e.version=n),e}},{test:[/yabrowser/i],describe(t){const e={name:"Yandex Browser"},n=S.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,t)||S.getFirstMatch(G,t);return n&&(e.version=n),e}},{test:[/ucbrowser/i],describe(t){const e={name:"UC Browser"},n=S.getFirstMatch(G,t)||S.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/Maxthon|mxios/i],describe(t){const e={name:"Maxthon"},n=S.getFirstMatch(G,t)||S.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/epiphany/i],describe(t){const e={name:"Epiphany"},n=S.getFirstMatch(G,t)||S.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/puffin/i],describe(t){const e={name:"Puffin"},n=S.getFirstMatch(G,t)||S.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/sleipnir/i],describe(t){const e={name:"Sleipnir"},n=S.getFirstMatch(G,t)||S.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/k-meleon/i],describe(t){const e={name:"K-Meleon"},n=S.getFirstMatch(G,t)||S.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/micromessenger/i],describe(t){const e={name:"WeChat"},n=S.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,t)||S.getFirstMatch(G,t);return n&&(e.version=n),e}},{test:[/qqbrowser/i],describe(t){const e={name:/qqbrowserlite/i.test(t)?"QQ Browser Lite":"QQ Browser"},n=S.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,t)||S.getFirstMatch(G,t);return n&&(e.version=n),e}},{test:[/msie|trident/i],describe(t){const e={name:"Internet Explorer"},n=S.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/\sedg\//i],describe(t){const e={name:"Microsoft Edge"},n=S.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/edg([ea]|ios)/i],describe(t){const e={name:"Microsoft Edge"},n=S.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/vivaldi/i],describe(t){const e={name:"Vivaldi"},n=S.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/seamonkey/i],describe(t){const e={name:"SeaMonkey"},n=S.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/sailfish/i],describe(t){const e={name:"Sailfish"},n=S.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,t);return n&&(e.version=n),e}},{test:[/silk/i],describe(t){const e={name:"Amazon Silk"},n=S.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/phantom/i],describe(t){const e={name:"PhantomJS"},n=S.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/slimerjs/i],describe(t){const e={name:"SlimerJS"},n=S.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(t){const e={name:"BlackBerry"},n=S.getFirstMatch(G,t)||S.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/(web|hpw)[o0]s/i],describe(t){const e={name:"WebOS Browser"},n=S.getFirstMatch(G,t)||S.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/bada/i],describe(t){const e={name:"Bada"},n=S.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/tizen/i],describe(t){const e={name:"Tizen"},n=S.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,t)||S.getFirstMatch(G,t);return n&&(e.version=n),e}},{test:[/qupzilla/i],describe(t){const e={name:"QupZilla"},n=S.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,t)||S.getFirstMatch(G,t);return n&&(e.version=n),e}},{test:[/firefox|iceweasel|fxios/i],describe(t){const e={name:"Firefox"},n=S.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/electron/i],describe(t){const e={name:"Electron"},n=S.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/MiuiBrowser/i],describe(t){const e={name:"Miui"},n=S.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/chromium/i],describe(t){const e={name:"Chromium"},n=S.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,t)||S.getFirstMatch(G,t);return n&&(e.version=n),e}},{test:[/chrome|crios|crmo/i],describe(t){const e={name:"Chrome"},n=S.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/GSA/i],describe(t){const e={name:"Google Search"},n=S.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test(t){const e=!t.test(/like android/i),n=t.test(/android/i);return e&&n},describe(t){const e={name:"Android Browser"},n=S.getFirstMatch(G,t);return n&&(e.version=n),e}},{test:[/playstation 4/i],describe(t){const e={name:"PlayStation 4"},n=S.getFirstMatch(G,t);return n&&(e.version=n),e}},{test:[/safari|applewebkit/i],describe(t){const e={name:"Safari"},n=S.getFirstMatch(G,t);return n&&(e.version=n),e}},{test:[/.*/i],describe(t){const e=t.search("\\(")!==-1?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:S.getFirstMatch(e,t),version:S.getSecondMatch(e,t)}}}];var no=[{test:[/Roku\/DVP/],describe(t){const e=S.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,t);return{name:ne.Roku,version:e}}},{test:[/windows phone/i],describe(t){const e=S.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,t);return{name:ne.WindowsPhone,version:e}}},{test:[/windows /i],describe(t){const e=S.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,t),n=S.getWindowsVersionName(e);return{name:ne.Windows,version:e,versionName:n}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(t){const e={name:ne.iOS},n=S.getSecondMatch(/(Version\/)(\d[\d.]+)/,t);return n&&(e.version=n),e}},{test:[/macintosh/i],describe(t){const e=S.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,t).replace(/[_\s]/g,"."),n=S.getMacOSVersionName(e),r={name:ne.MacOS,version:e};return n&&(r.versionName=n),r}},{test:[/(ipod|iphone|ipad)/i],describe(t){const e=S.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,t).replace(/[_\s]/g,".");return{name:ne.iOS,version:e}}},{test(t){const e=!t.test(/like android/i),n=t.test(/android/i);return e&&n},describe(t){const e=S.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,t),n=S.getAndroidVersionName(e),r={name:ne.Android,version:e};return n&&(r.versionName=n),r}},{test:[/(web|hpw)[o0]s/i],describe(t){const e=S.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,t),n={name:ne.WebOS};return e&&e.length&&(n.version=e),n}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(t){const e=S.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,t)||S.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,t)||S.getFirstMatch(/\bbb(\d+)/i,t);return{name:ne.BlackBerry,version:e}}},{test:[/bada/i],describe(t){const e=S.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,t);return{name:ne.Bada,version:e}}},{test:[/tizen/i],describe(t){const e=S.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,t);return{name:ne.Tizen,version:e}}},{test:[/linux/i],describe:()=>({name:ne.Linux})},{test:[/CrOS/],describe:()=>({name:ne.ChromeOS})},{test:[/PlayStation 4/],describe(t){const e=S.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,t);return{name:ne.PlayStation4,version:e}}}],ro=[{test:[/googlebot/i],describe:()=>({type:"bot",vendor:"Google"})},{test:[/huawei/i],describe(t){const e=S.getFirstMatch(/(can-l01)/i,t)&&"Nova",n={type:K.mobile,vendor:"Huawei"};return e&&(n.model=e),n}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:()=>({type:K.tablet,vendor:"Nexus"})},{test:[/ipad/i],describe:()=>({type:K.tablet,vendor:"Apple",model:"iPad"})},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:()=>({type:K.tablet,vendor:"Apple",model:"iPad"})},{test:[/kftt build/i],describe:()=>({type:K.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"})},{test:[/silk/i],describe:()=>({type:K.tablet,vendor:"Amazon"})},{test:[/tablet(?! pc)/i],describe:()=>({type:K.tablet})},{test(t){const e=t.test(/ipod|iphone/i),n=t.test(/like (ipod|iphone)/i);return e&&!n},describe(t){const e=S.getFirstMatch(/(ipod|iphone)/i,t);return{type:K.mobile,vendor:"Apple",model:e}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:()=>({type:K.mobile,vendor:"Nexus"})},{test:[/[^-]mobi/i],describe:()=>({type:K.mobile})},{test:t=>t.getBrowserName(!0)==="blackberry",describe:()=>({type:K.mobile,vendor:"BlackBerry"})},{test:t=>t.getBrowserName(!0)==="bada",describe:()=>({type:K.mobile})},{test:t=>t.getBrowserName()==="windows phone",describe:()=>({type:K.mobile,vendor:"Microsoft"})},{test(t){const e=Number(String(t.getOSVersion()).split(".")[0]);return t.getOSName(!0)==="android"&&e>=3},describe:()=>({type:K.tablet})},{test:t=>t.getOSName(!0)==="android",describe:()=>({type:K.mobile})},{test:t=>t.getOSName(!0)==="macos",describe:()=>({type:K.desktop,vendor:"Apple"})},{test:t=>t.getOSName(!0)==="windows",describe:()=>({type:K.desktop})},{test:t=>t.getOSName(!0)==="linux",describe:()=>({type:K.desktop})},{test:t=>t.getOSName(!0)==="playstation 4",describe:()=>({type:K.tv})},{test:t=>t.getOSName(!0)==="roku",describe:()=>({type:K.tv})}],io=[{test:t=>t.getBrowserName(!0)==="microsoft edge",describe(t){if(/\sedg\//i.test(t))return{name:Le.Blink};const e=S.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,t);return{name:Le.EdgeHTML,version:e}}},{test:[/trident/i],describe(t){const e={name:Le.Trident},n=S.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:t=>t.test(/presto/i),describe(t){const e={name:Le.Presto},n=S.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test(t){const e=t.test(/gecko/i),n=t.test(/like gecko/i);return e&&!n},describe(t){const e={name:Le.Gecko},n=S.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/(apple)?webkit\/537\.36/i],describe:()=>({name:Le.Blink})},{test:[/(apple)?webkit/i],describe(t){const e={name:Le.WebKit},n=S.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}}];class Pr{constructor(e,n=!1){if(e==null||e==="")throw new Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},n!==!0&&this.parse()}getUA(){return this._ua}test(e){return e.test(this._ua)}parseBrowser(){this.parsedResult.browser={};const e=S.find(to,n=>{if(typeof n.test=="function")return n.test(this);if(n.test instanceof Array)return n.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.browser=e.describe(this.getUA())),this.parsedResult.browser}getBrowser(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()}getBrowserName(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""}getBrowserVersion(){return this.getBrowser().version}getOS(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()}parseOS(){this.parsedResult.os={};const e=S.find(no,n=>{if(typeof n.test=="function")return n.test(this);if(n.test instanceof Array)return n.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.os=e.describe(this.getUA())),this.parsedResult.os}getOSName(e){const{name:n}=this.getOS();return e?String(n).toLowerCase()||"":n||""}getOSVersion(){return this.getOS().version}getPlatform(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()}getPlatformType(e=!1){const{type:n}=this.getPlatform();return e?String(n).toLowerCase()||"":n||""}parsePlatform(){this.parsedResult.platform={};const e=S.find(ro,n=>{if(typeof n.test=="function")return n.test(this);if(n.test instanceof Array)return n.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.platform=e.describe(this.getUA())),this.parsedResult.platform}getEngine(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()}getEngineName(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""}parseEngine(){this.parsedResult.engine={};const e=S.find(io,n=>{if(typeof n.test=="function")return n.test(this);if(n.test instanceof Array)return n.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.engine=e.describe(this.getUA())),this.parsedResult.engine}parse(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this}getResult(){return S.assign({},this.parsedResult)}satisfies(e){const n={};let r=0;const s={};let o=0;if(Object.keys(e).forEach(a=>{const c=e[a];typeof c=="string"?(s[a]=c,o+=1):typeof c=="object"&&(n[a]=c,r+=1)}),r>0){const a=Object.keys(n),c=S.find(a,f=>this.isOS(f));if(c){const f=this.satisfies(n[c]);if(f!==void 0)return f}const u=S.find(a,f=>this.isPlatform(f));if(u){const f=this.satisfies(n[u]);if(f!==void 0)return f}}if(o>0){const a=Object.keys(s),c=S.find(a,u=>this.isBrowser(u,!0));if(c!==void 0)return this.compareVersion(s[c])}}isBrowser(e,n=!1){const r=this.getBrowserName().toLowerCase();let s=e.toLowerCase();const o=S.getBrowserTypeByAlias(s);return n&&o&&(s=o.toLowerCase()),s===r}compareVersion(e){let n=[0],r=e,s=!1;const o=this.getBrowserVersion();if(typeof o=="string")return e[0]===">"||e[0]==="<"?(r=e.substr(1),e[1]==="="?(s=!0,r=e.substr(2)):n=[],e[0]===">"?n.push(1):n.push(-1)):e[0]==="="?r=e.substr(1):e[0]==="~"&&(s=!0,r=e.substr(1)),n.indexOf(S.compareVersions(o,r,s))>-1}isOS(e){return this.getOSName(!0)===String(e).toLowerCase()}isPlatform(e){return this.getPlatformType(!0)===String(e).toLowerCase()}isEngine(e){return this.getEngineName(!0)===String(e).toLowerCase()}is(e,n=!1){return this.isBrowser(e,n)||this.isOS(e)||this.isPlatform(e)}some(e=[]){return e.some(n=>this.is(n))}}/*!
 * Bowser - a browser detector
 * https://github.com/lancedikson/bowser
 * MIT License | (c) Dustin Diaz 2012-2015
 * MIT License | (c) Denis Demchenko 2015-2019
 */class so{static getParser(e,n=!1){if(typeof e!="string")throw new Error("UserAgent should be a string");return new Pr(e,n)}static parse(e){return new Pr(e).getResult()}static get BROWSER_MAP(){return Xi}static get ENGINE_MAP(){return Le}static get OS_MAP(){return ne}static get PLATFORMS_MAP(){return K}}function cn(){return Date.now()+Math.random().toString()}function dt(){throw new Error("Method must be implemented in subclass")}function Zi(t,e){return e!=null&&e.proxyUrl?e.proxyUrl+(e.proxyUrl.slice(-1)==="/"?"":"/")+t.substring(8):t}function Ht(t){return t!=null&&t.callObjectBundleUrlOverride?t.callObjectBundleUrlOverride:Zi("https://c.daily.co/call-machine/versioned/".concat("0.72.2","/static/call-machine-object-bundle.js"),t)}function Et(t){try{new URL(t)}catch{return!1}return!0}const es=Object.prototype.toString;function ts(t){switch(es.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return Je(t,Error)}}function ot(t,e){return es.call(t)===`[object ${e}]`}function Kn(t){return ot(t,"ErrorEvent")}function Dr(t){return ot(t,"DOMError")}function $e(t){return ot(t,"String")}function ns(t){return t===null||typeof t!="object"&&typeof t!="function"}function it(t){return ot(t,"Object")}function Qt(t){return typeof Event<"u"&&Je(t,Event)}function Xn(t){return!!(t&&t.then&&typeof t.then=="function")}function Je(t,e){try{return t instanceof e}catch{return!1}}function Xe(t,e=0){return typeof t!="string"||e===0||t.length<=e?t:`${t.slice(0,e)}...`}function Ir(t,e){if(!Array.isArray(t))return"";const n=[];for(let r=0;r<t.length;r++){const s=t[r];try{n.push(String(s))}catch{n.push("[value cannot be serialized]")}}return n.join(e)}function ao(t,e,n=!1){return!!$e(t)&&(ot(e,"RegExp")?e.test(t):!!$e(e)&&(n?t===e:t.includes(e)))}function Dt(t,e=[],n=!1){return e.some(r=>ao(t,r,n))}function oo(t,e,n=250,r,s,o,a){if(!(o.exception&&o.exception.values&&a&&Je(a.originalException,Error)))return;const c=o.exception.values.length>0?o.exception.values[o.exception.values.length-1]:void 0;var u,f;c&&(o.exception.values=(u=Cn(t,e,s,a.originalException,r,o.exception.values,c,0),f=n,u.map(h=>(h.value&&(h.value=Xe(h.value,f)),h))))}function Cn(t,e,n,r,s,o,a,c){if(o.length>=n+1)return o;let u=[...o];if(Je(r[s],Error)){Nr(a,c);const f=t(e,r[s]),h=u.length;Rr(f,s,h,c),u=Cn(t,e,n,r[s],s,[f,...u],f,h)}return Array.isArray(r.errors)&&r.errors.forEach((f,h)=>{if(Je(f,Error)){Nr(a,c);const p=t(e,f),y=u.length;Rr(p,`errors[${h}]`,y,c),u=Cn(t,e,n,f,s,[p,...u],p,y)}}),u}function Nr(t,e){t.mechanism=t.mechanism||{type:"generic",handled:!0},t.mechanism={...t.mechanism,is_exception_group:!0,exception_id:e}}function Rr(t,e,n,r){t.mechanism=t.mechanism||{type:"generic",handled:!0},t.mechanism={...t.mechanism,type:"chained",source:e,exception_id:n,parent_id:r}}function It(t){return t&&t.Math==Math?t:void 0}const ue=typeof globalThis=="object"&&It(globalThis)||typeof window=="object"&&It(window)||typeof self=="object"&&It(self)||typeof global=="object"&&It(global)||function(){return this}()||{};function Mt(){return ue}function Zn(t,e,n){const r=n||ue,s=r.__SENTRY__=r.__SENTRY__||{};return s[t]||(s[t]=e())}const co=Mt(),uo=80;function An(t,e={}){try{let n=t;const r=5,s=[];let o=0,a=0;const c=" > ",u=c.length;let f;const h=Array.isArray(e)?e:e.keyAttrs,p=!Array.isArray(e)&&e.maxStringLength||uo;for(;n&&o++<r&&(f=lo(n,h),!(f==="html"||o>1&&a+s.length*u+f.length>=p));)s.push(f),a+=f.length,n=n.parentNode;return s.reverse().join(c)}catch{return"<unknown>"}}function lo(t,e){const n=t,r=[];let s,o,a,c,u;if(!n||!n.tagName)return"";r.push(n.tagName.toLowerCase());const f=e&&e.length?e.filter(p=>n.getAttribute(p)).map(p=>[p,n.getAttribute(p)]):null;if(f&&f.length)f.forEach(p=>{r.push(`[${p[0]}="${p[1]}"]`)});else if(n.id&&r.push(`#${n.id}`),s=n.className,s&&$e(s))for(o=s.split(/\s+/),u=0;u<o.length;u++)r.push(`.${o[u]}`);const h=["aria-label","type","name","title","alt"];for(u=0;u<h.length;u++)a=h[u],c=n.getAttribute(a),c&&r.push(`[${a}="${c}"]`);return r.join("")}const Kt=["debug","info","warn","error","log","assert","trace"];function rs(t){if(!("console"in ue))return t();const e=ue.console,n={};Kt.forEach(r=>{const s=e[r]&&e[r].__sentry_original__;r in e&&s&&(n[r]=e[r],e[r]=s)});try{return t()}finally{Object.keys(n).forEach(r=>{e[r]=n[r]})}}function jr(){let t=!1;const e={enable:()=>{t=!0},disable:()=>{t=!1}};return typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__?Kt.forEach(n=>{e[n]=(...r)=>{t&&rs(()=>{ue.console[n](`Sentry Logger [${n}]:`,...r)})}}):Kt.forEach(n=>{e[n]=()=>{}}),e}let N;N=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__?Zn("logger",jr):jr();const ho=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function Xt(t,e=!1){const{host:n,path:r,pass:s,port:o,projectId:a,protocol:c,publicKey:u}=t;return`${c}://${u}${e&&s?`:${s}`:""}@${n}${o?`:${o}`:""}/${r&&`${r}/`}${a}`}function xr(t){return{protocol:t.protocol,publicKey:t.publicKey||"",pass:t.pass||"",host:t.host,port:t.port||"",path:t.path||"",projectId:t.projectId}}function fo(t){const e=typeof t=="string"?function(n){const r=ho.exec(n);if(!r)return void console.error(`Invalid Sentry Dsn: ${n}`);const[s,o,a="",c,u="",f]=r.slice(1);let h="",p=f;const y=p.split("/");if(y.length>1&&(h=y.slice(0,-1).join("/"),p=y.pop()),p){const _=p.match(/^\d+/);_&&(p=_[0])}return xr({host:c,pass:a,path:h,projectId:p,port:u,protocol:s,publicKey:o})}(t):xr(t);if(e&&function(n){if(typeof __SENTRY_DEBUG__<"u"&&!__SENTRY_DEBUG__)return!0;const{port:r,projectId:s,protocol:o}=n;return!(["protocol","publicKey","host","projectId"].find(a=>!n[a]&&(N.error(`Invalid Sentry Dsn: ${a} missing`),!0))||(s.match(/^\d+$/)?function(a){return a==="http"||a==="https"}(o)?r&&isNaN(parseInt(r,10))&&(N.error(`Invalid Sentry Dsn: Invalid port ${r}`),1):(N.error(`Invalid Sentry Dsn: Invalid protocol ${o}`),1):(N.error(`Invalid Sentry Dsn: Invalid projectId ${s}`),1)))}(e))return e}class pe extends Error{constructor(e,n="warn"){super(e),this.message=e,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=n}}function ee(t,e,n){if(!(e in t))return;const r=t[e],s=n(r);if(typeof s=="function")try{is(s,r)}catch{}t[e]=s}function er(t,e,n){Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0})}function is(t,e){const n=e.prototype||{};t.prototype=e.prototype=n,er(t,"__sentry_original__",e)}function tr(t){return t.__sentry_original__}function ss(t){if(ts(t))return{message:t.message,name:t.name,stack:t.stack,...Ur(t)};if(Qt(t)){const e={type:t.type,target:Fr(t.target),currentTarget:Fr(t.currentTarget),...Ur(t)};return typeof CustomEvent<"u"&&Je(t,CustomEvent)&&(e.detail=t.detail),e}return t}function Fr(t){try{return e=t,typeof Element<"u"&&Je(e,Element)?An(t):Object.prototype.toString.call(t)}catch{return"<unknown>"}var e}function Ur(t){if(typeof t=="object"&&t!==null){const e={};for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}return{}}function un(t){return Mn(t,new Map)}function Mn(t,e){if(it(t)){const n=e.get(t);if(n!==void 0)return n;const r={};e.set(t,r);for(const s of Object.keys(t))t[s]!==void 0&&(r[s]=Mn(t[s],e));return r}if(Array.isArray(t)){const n=e.get(t);if(n!==void 0)return n;const r=[];return e.set(t,r),t.forEach(s=>{r.push(Mn(s,e))}),r}return t}const Br="<anonymous>";function je(t){try{return t&&typeof t=="function"&&t.name||Br}catch{return Br}}const hn=Mt();function On(t){return t&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(t.toString())}function po(){if(!function(){if(!("fetch"in hn))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}())return!1;if(On(hn.fetch))return!0;let t=!1;const e=hn.document;if(e&&typeof e.createElement=="function")try{const n=e.createElement("iframe");n.hidden=!0,e.head.appendChild(n),n.contentWindow&&n.contentWindow.fetch&&(t=On(n.contentWindow.fetch)),e.head.removeChild(n)}catch(n){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&N.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return t}const Nt=Mt(),z=Mt(),mt="__sentry_xhr_v2__",_t={},qr={};function mo(t){if(!qr[t])switch(qr[t]=!0,t){case"console":(function(){"console"in z&&Kt.forEach(function(e){e in z.console&&ee(z.console,e,function(n){return function(...r){de("console",{args:r,level:e}),n&&n.apply(z.console,r)}})})})();break;case"dom":(function(){if(!("document"in z))return;const e=de.bind(null,"dom"),n=Yr(e,!0);z.document.addEventListener("click",n,!1),z.document.addEventListener("keypress",n,!1),["EventTarget","Node"].forEach(r=>{const s=z[r]&&z[r].prototype;s&&s.hasOwnProperty&&s.hasOwnProperty("addEventListener")&&(ee(s,"addEventListener",function(o){return function(a,c,u){if(a==="click"||a=="keypress")try{const f=this,h=f.__sentry_instrumentation_handlers__=f.__sentry_instrumentation_handlers__||{},p=h[a]=h[a]||{refCount:0};if(!p.handler){const y=Yr(e);p.handler=y,o.call(this,a,y,u)}p.refCount++}catch{}return o.call(this,a,c,u)}}),ee(s,"removeEventListener",function(o){return function(a,c,u){if(a==="click"||a=="keypress")try{const f=this,h=f.__sentry_instrumentation_handlers__||{},p=h[a];p&&(p.refCount--,p.refCount<=0&&(o.call(this,a,p.handler,u),p.handler=void 0,delete h[a]),Object.keys(h).length===0&&delete f.__sentry_instrumentation_handlers__)}catch{}return o.call(this,a,c,u)}}))})})();break;case"xhr":(function(){if(!("XMLHttpRequest"in z))return;const e=XMLHttpRequest.prototype;ee(e,"open",function(n){return function(...r){const s=r[1],o=this[mt]={method:$e(r[0])?r[0].toUpperCase():r[0],url:r[1],request_headers:{}};$e(s)&&o.method==="POST"&&s.match(/sentry_key/)&&(this.__sentry_own_request__=!0);const a=()=>{const c=this[mt];if(c&&this.readyState===4){try{c.status_code=this.status}catch{}de("xhr",{args:r,endTimestamp:Date.now(),startTimestamp:Date.now(),xhr:this})}};return"onreadystatechange"in this&&typeof this.onreadystatechange=="function"?ee(this,"onreadystatechange",function(c){return function(...u){return a(),c.apply(this,u)}}):this.addEventListener("readystatechange",a),ee(this,"setRequestHeader",function(c){return function(...u){const[f,h]=u,p=this[mt];return p&&(p.request_headers[f.toLowerCase()]=h),c.apply(this,u)}}),n.apply(this,r)}}),ee(e,"send",function(n){return function(...r){const s=this[mt];return s&&r[0]!==void 0&&(s.body=r[0]),de("xhr",{args:r,startTimestamp:Date.now(),xhr:this}),n.apply(this,r)}})})();break;case"fetch":(function(){po()&&ee(z,"fetch",function(e){return function(...n){const{method:r,url:s}=function(a){if(a.length===0)return{method:"GET",url:""};if(a.length===2){const[u,f]=a;return{url:Vr(u),method:Ln(f,"method")?String(f.method).toUpperCase():"GET"}}const c=a[0];return{url:Vr(c),method:Ln(c,"method")?String(c.method).toUpperCase():"GET"}}(n),o={args:n,fetchData:{method:r,url:s},startTimestamp:Date.now()};return de("fetch",{...o}),e.apply(z,n).then(a=>(de("fetch",{...o,endTimestamp:Date.now(),response:a}),a),a=>{throw de("fetch",{...o,endTimestamp:Date.now(),error:a}),a})}})})();break;case"history":(function(){if(!function(){const r=Nt.chrome,s=r&&r.app&&r.app.runtime,o="history"in Nt&&!!Nt.history.pushState&&!!Nt.history.replaceState;return!s&&o}())return;const e=z.onpopstate;function n(r){return function(...s){const o=s.length>2?s[2]:void 0;if(o){const a=Rt,c=String(o);Rt=c,de("history",{from:a,to:c})}return r.apply(this,s)}}z.onpopstate=function(...r){const s=z.location.href,o=Rt;if(Rt=s,de("history",{from:o,to:s}),e)try{return e.apply(this,r)}catch{}},ee(z.history,"pushState",n),ee(z.history,"replaceState",n)})();break;case"error":xt=z.onerror,z.onerror=function(e,n,r,s,o){return de("error",{column:s,error:o,line:r,msg:e,url:n}),!(!xt||xt.__SENTRY_LOADER__)&&xt.apply(this,arguments)},z.onerror.__SENTRY_INSTRUMENTED__=!0;break;case"unhandledrejection":Ft=z.onunhandledrejection,z.onunhandledrejection=function(e){return de("unhandledrejection",e),!(Ft&&!Ft.__SENTRY_LOADER__)||Ft.apply(this,arguments)},z.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0;break;default:return void((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&N.warn("unknown instrumentation type:",t))}}function Be(t,e){_t[t]=_t[t]||[],_t[t].push(e),mo(t)}function de(t,e){if(t&&_t[t])for(const n of _t[t]||[])try{n(e)}catch(r){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&N.error(`Error while triggering instrumentation handler.
Type: ${t}
Name: ${je(n)}
Error:`,r)}}function Ln(t,e){return!!t&&typeof t=="object"&&!!t[e]}function Vr(t){return typeof t=="string"?t:t?Ln(t,"url")?t.url:t.toString?t.toString():"":""}let Rt;const go=1e3;let jt,fn;function Yr(t,e=!1){return n=>{if(!n||fn===n||function(s){if(s.type!=="keypress")return!1;try{const o=s.target;if(!o||!o.tagName)return!0;if(o.tagName==="INPUT"||o.tagName==="TEXTAREA"||o.isContentEditable)return!1}catch{}return!0}(n))return;const r=n.type==="keypress"?"input":n.type;(jt===void 0||function(s,o){if(!s||s.type!==o.type)return!0;try{if(s.target!==o.target)return!0}catch{}return!1}(fn,n))&&(t({event:n,name:r,global:e}),fn=n),clearTimeout(jt),jt=z.setTimeout(()=>{jt=void 0},go)}}let xt=null,Ft=null;function Ne(){const t=ue,e=t.crypto||t.msCrypto;if(e&&e.randomUUID)return e.randomUUID().replace(/-/g,"");const n=e&&e.getRandomValues?()=>e.getRandomValues(new Uint8Array(1))[0]:()=>16*Math.random();return("10000000100040008000"+1e11).replace(/[018]/g,r=>(r^(15&n())>>r/4).toString(16))}function as(t){return t.exception&&t.exception.values?t.exception.values[0]:void 0}function De(t){const{message:e,event_id:n}=t;if(e)return e;const r=as(t);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function Pn(t,e,n){const r=t.exception=t.exception||{},s=r.values=r.values||[],o=s[0]=s[0]||{};o.value||(o.value=e||""),o.type||(o.type="Error")}function wt(t,e){const n=as(t);if(!n)return;const r=n.mechanism;if(n.mechanism={type:"generic",handled:!0,...r,...e},e&&"data"in e){const s={...r&&r.data,...e.data};n.mechanism.data=s}}function Gr(t){if(t&&t.__sentry_captured__)return!0;try{er(t,"__sentry_captured__",!0)}catch{}return!1}function Ie(t,e=100,n=1/0){try{return Dn("",t,e,n)}catch(r){return{ERROR:`**non-serializable** (${r})`}}}function os(t,e=3,n=102400){const r=Ie(t,e);return s=r,function(o){return~-encodeURI(o).split(/%..|./).length}(JSON.stringify(s))>n?os(t,e-1,n):r;var s}function Dn(t,e,n=1/0,r=1/0,s=function(){const o=typeof WeakSet=="function",a=o?new WeakSet:[];return[function(c){if(o)return!!a.has(c)||(a.add(c),!1);for(let u=0;u<a.length;u++)if(a[u]===c)return!0;return a.push(c),!1},function(c){if(o)a.delete(c);else for(let u=0;u<a.length;u++)if(a[u]===c){a.splice(u,1);break}}]}()){const[o,a]=s;if(e==null||["number","boolean","string"].includes(typeof e)&&(typeof(c=e)!="number"||c==c))return e;var c;const u=function(w,k){try{if(w==="domain"&&k&&typeof k=="object"&&k._events)return"[Domain]";if(w==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&k===global)return"[Global]";if(typeof window<"u"&&k===window)return"[Window]";if(typeof document<"u"&&k===document)return"[Document]";if(function(P){return it(P)&&"nativeEvent"in P&&"preventDefault"in P&&"stopPropagation"in P}(k))return"[SyntheticEvent]";if(typeof k=="number"&&k!=k)return"[NaN]";if(typeof k=="function")return`[Function: ${je(k)}]`;if(typeof k=="symbol")return`[${String(k)}]`;if(typeof k=="bigint")return`[BigInt: ${String(k)}]`;const M=function(P){const x=Object.getPrototypeOf(P);return x?x.constructor.name:"null prototype"}(k);return/^HTML(\w*)Element$/.test(M)?`[HTMLElement: ${M}]`:`[object ${M}]`}catch(M){return`**non-serializable** (${M})`}}(t,e);if(!u.startsWith("[object "))return u;if(e.__sentry_skip_normalization__)return e;const f=typeof e.__sentry_override_normalization_depth__=="number"?e.__sentry_override_normalization_depth__:n;if(f===0)return u.replace("object ","");if(o(e))return"[Circular ~]";const h=e;if(h&&typeof h.toJSON=="function")try{return Dn("",h.toJSON(),f-1,r,s)}catch{}const p=Array.isArray(e)?[]:{};let y=0;const _=ss(e);for(const w in _){if(!Object.prototype.hasOwnProperty.call(_,w))continue;if(y>=r){p[w]="[MaxProperties ~]";break}const k=_[w];p[w]=Dn(w,k,f-1,r,s),y++}return a(e),p}var Te;function We(t){return new ie(e=>{e(t)})}function Zt(t){return new ie((e,n)=>{n(t)})}(function(t){t[t.PENDING=0]="PENDING",t[t.RESOLVED=1]="RESOLVED",t[t.REJECTED=2]="REJECTED"})(Te||(Te={}));class ie{__init(){this._state=Te.PENDING}__init2(){this._handlers=[]}constructor(e){ie.prototype.__init.call(this),ie.prototype.__init2.call(this),ie.prototype.__init3.call(this),ie.prototype.__init4.call(this),ie.prototype.__init5.call(this),ie.prototype.__init6.call(this);try{e(this._resolve,this._reject)}catch(n){this._reject(n)}}then(e,n){return new ie((r,s)=>{this._handlers.push([!1,o=>{if(e)try{r(e(o))}catch(a){s(a)}else r(o)},o=>{if(n)try{r(n(o))}catch(a){s(a)}else s(o)}]),this._executeHandlers()})}catch(e){return this.then(n=>n,e)}finally(e){return new ie((n,r)=>{let s,o;return this.then(a=>{o=!1,s=a,e&&e()},a=>{o=!0,s=a,e&&e()}).then(()=>{o?r(s):n(s)})})}__init3(){this._resolve=e=>{this._setResult(Te.RESOLVED,e)}}__init4(){this._reject=e=>{this._setResult(Te.REJECTED,e)}}__init5(){this._setResult=(e,n)=>{this._state===Te.PENDING&&(Xn(n)?n.then(this._resolve,this._reject):(this._state=e,this._value=n,this._executeHandlers()))}}__init6(){this._executeHandlers=()=>{if(this._state===Te.PENDING)return;const e=this._handlers.slice();this._handlers=[],e.forEach(n=>{n[0]||(this._state===Te.RESOLVED&&n[1](this._value),this._state===Te.REJECTED&&n[2](this._value),n[0]=!0)})}}}function yo(t){const e=[];function n(r){return e.splice(e.indexOf(r),1)[0]}return{$:e,add:function(r){if(!(t===void 0||e.length<t))return Zt(new pe("Not adding Promise because buffer limit was reached."));const s=r();return e.indexOf(s)===-1&&e.push(s),s.then(()=>n(s)).then(null,()=>n(s).then(null,()=>{})),s},drain:function(r){return new ie((s,o)=>{let a=e.length;if(!a)return s(!0);const c=setTimeout(()=>{r&&r>0&&s(!1)},r);e.forEach(u=>{We(u).then(()=>{--a||(clearTimeout(c),s(!0))},o)})})}}}function pn(t){if(!t)return{};const e=t.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!e)return{};const n=e[6]||"",r=e[8]||"";return{host:e[4],path:e[5],protocol:e[2],search:n,hash:r,relative:e[5]+n+r}}const vo=["fatal","error","warning","log","info","debug"],cs=Mt(),In={nowSeconds:()=>Date.now()/1e3},mn=typeof __SENTRY_BROWSER_BUNDLE__<"u"&&__SENTRY_BROWSER_BUNDLE__||Object.prototype.toString.call(typeof process<"u"?process:0)!=="[object process]"?function(){const{performance:t}=cs;if(!(!t||!t.now))return{now:()=>t.now(),timeOrigin:Date.now()-t.now()}}():function(){try{return(t=module,e="perf_hooks",t.require(e)).performance}catch{return}var t,e}(),$r=mn===void 0?In:{nowSeconds:()=>(mn.timeOrigin+mn.now())/1e3},ln=In.nowSeconds.bind(In),us=$r.nowSeconds.bind($r);function kt(t,e=[]){return[t,e]}function _o(t,e){const[n,r]=t;return[n,[...r,e]]}function Jr(t,e){const n=t[1];for(const r of n)if(e(r,r[0].type))return!0;return!1}function Nn(t,e){return(e||new TextEncoder).encode(t)}function bo(t,e){const[n,r]=t;let s=JSON.stringify(n);function o(a){typeof s=="string"?s=typeof a=="string"?s+a:[Nn(s,e),a]:s.push(typeof a=="string"?Nn(a,e):a)}for(const a of r){const[c,u]=a;if(o(`
${JSON.stringify(c)}
`),typeof u=="string"||u instanceof Uint8Array)o(u);else{let f;try{f=JSON.stringify(u)}catch{f=JSON.stringify(Ie(u))}o(f)}}return typeof s=="string"?s:function(a){const c=a.reduce((h,p)=>h+p.length,0),u=new Uint8Array(c);let f=0;for(const h of a)u.set(h,f),f+=h.length;return u}(s)}function So(t,e){const n=typeof t.data=="string"?Nn(t.data,e):t.data;return[un({type:"attachment",length:n.length,filename:t.filename,content_type:t.contentType,attachment_type:t.attachmentType}),n]}(()=>{const{performance:t}=cs;if(!t||!t.now)return;const e=36e5,n=t.now(),r=Date.now(),s=t.timeOrigin?Math.abs(t.timeOrigin+n-r):e,o=s<e,a=t.timing&&t.timing.navigationStart,c=typeof a=="number"?Math.abs(a+n-r):e;(o||c<e)&&s<=c&&t.timeOrigin})();const Eo={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor"};function Wr(t){return Eo[t]}function ls(t){if(!t||!t.sdk)return;const{name:e,version:n}=t.sdk;return{name:e,version:n}}const wo=6e4;function ko(t,{statusCode:e,headers:n},r=Date.now()){const s={...t},o=n&&n["x-sentry-rate-limits"],a=n&&n["retry-after"];if(o)for(const c of o.trim().split(",")){const[u,f]=c.split(":",2),h=parseInt(u,10),p=1e3*(isNaN(h)?60:h);if(f)for(const y of f.split(";"))s[y]=r+p;else s.all=r+p}else a?s.all=r+function(c,u=Date.now()){const f=parseInt(`${c}`,10);if(!isNaN(f))return 1e3*f;const h=Date.parse(`${c}`);return isNaN(h)?wo:h-u}(a,r):e===429&&(s.all=r+6e4);return s}const nr="production";function To(t){const e=us(),n={sid:Ne(),init:!0,timestamp:e,started:e,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>function(r){return un({sid:`${r.sid}`,init:r.init,started:new Date(1e3*r.started).toISOString(),timestamp:new Date(1e3*r.timestamp).toISOString(),status:r.status,errors:r.errors,did:typeof r.did=="number"||typeof r.did=="string"?`${r.did}`:void 0,duration:r.duration,attrs:{release:r.release,environment:r.environment,ip_address:r.ipAddress,user_agent:r.userAgent}})}(n)};return st(n,t),n}function st(t,e={}){if(e.user&&(!t.ipAddress&&e.user.ip_address&&(t.ipAddress=e.user.ip_address),t.did||e.did||(t.did=e.user.id||e.user.email||e.user.username)),t.timestamp=e.timestamp||us(),e.ignoreDuration&&(t.ignoreDuration=e.ignoreDuration),e.sid&&(t.sid=e.sid.length===32?e.sid:Ne()),e.init!==void 0&&(t.init=e.init),!t.did&&e.did&&(t.did=`${e.did}`),typeof e.started=="number"&&(t.started=e.started),t.ignoreDuration)t.duration=void 0;else if(typeof e.duration=="number")t.duration=e.duration;else{const n=t.timestamp-t.started;t.duration=n>=0?n:0}e.release&&(t.release=e.release),e.environment&&(t.environment=e.environment),!t.ipAddress&&e.ipAddress&&(t.ipAddress=e.ipAddress),!t.userAgent&&e.userAgent&&(t.userAgent=e.userAgent),typeof e.errors=="number"&&(t.errors=e.errors),e.status&&(t.status=e.status)}class Ye{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=zr()}static clone(e){const n=new Ye;return e&&(n._breadcrumbs=[...e._breadcrumbs],n._tags={...e._tags},n._extra={...e._extra},n._contexts={...e._contexts},n._user=e._user,n._level=e._level,n._span=e._span,n._session=e._session,n._transactionName=e._transactionName,n._fingerprint=e._fingerprint,n._eventProcessors=[...e._eventProcessors],n._requestSession=e._requestSession,n._attachments=[...e._attachments],n._sdkProcessingMetadata={...e._sdkProcessingMetadata},n._propagationContext={...e._propagationContext}),n}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{},this._session&&st(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(e){return this._requestSession=e,this}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,n){return this._tags={...this._tags,[e]:n},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,n){return this._extra={...this._extra,[e]:n},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,n){return n===null?delete this._contexts[e]:this._contexts[e]=n,this._notifyScopeListeners(),this}setSpan(e){return this._span=e,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){const e=this.getSpan();return e&&e.transaction}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;if(typeof e=="function"){const n=e(this);return n instanceof Ye?n:this}return e instanceof Ye?(this._tags={...this._tags,...e._tags},this._extra={...this._extra,...e._extra},this._contexts={...this._contexts,...e._contexts},e._user&&Object.keys(e._user).length&&(this._user=e._user),e._level&&(this._level=e._level),e._fingerprint&&(this._fingerprint=e._fingerprint),e._requestSession&&(this._requestSession=e._requestSession),e._propagationContext&&(this._propagationContext=e._propagationContext)):it(e)&&(this._tags={...this._tags,...e.tags},this._extra={...this._extra,...e.extra},this._contexts={...this._contexts,...e.contexts},e.user&&(this._user=e.user),e.level&&(this._level=e.level),e.fingerprint&&(this._fingerprint=e.fingerprint),e.requestSession&&(this._requestSession=e.requestSession),e.propagationContext&&(this._propagationContext=e.propagationContext)),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this._propagationContext=zr(),this}addBreadcrumb(e,n){const r=typeof n=="number"?n:100;if(r<=0)return this;const s={timestamp:ln(),...e};return this._breadcrumbs=[...this._breadcrumbs,s].slice(-r),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}getAttachments(){return this._attachments}clearAttachments(){return this._attachments=[],this}applyToEvent(e,n={}){if(this._extra&&Object.keys(this._extra).length&&(e.extra={...this._extra,...e.extra}),this._tags&&Object.keys(this._tags).length&&(e.tags={...this._tags,...e.tags}),this._user&&Object.keys(this._user).length&&(e.user={...this._user,...e.user}),this._contexts&&Object.keys(this._contexts).length&&(e.contexts={...this._contexts,...e.contexts}),this._level&&(e.level=this._level),this._transactionName&&(e.transaction=this._transactionName),this._span){e.contexts={trace:this._span.getTraceContext(),...e.contexts};const r=this._span.transaction;if(r){e.sdkProcessingMetadata={dynamicSamplingContext:r.getDynamicSamplingContext(),...e.sdkProcessingMetadata};const s=r.name;s&&(e.tags={transaction:s,...e.tags})}}return this._applyFingerprint(e),e.breadcrumbs=[...e.breadcrumbs||[],...this._breadcrumbs],e.breadcrumbs=e.breadcrumbs.length>0?e.breadcrumbs:void 0,e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...this._sdkProcessingMetadata,propagationContext:this._propagationContext},this._notifyEventProcessors([...ds(),...this._eventProcessors],e,n)}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...e},this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}_notifyEventProcessors(e,n,r,s=0){return new ie((o,a)=>{const c=e[s];if(n===null||typeof c!="function")o(n);else{const u=c({...n},r);(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&c.id&&u===null&&N.log(`Event processor "${c.id}" dropped event`),Xn(u)?u.then(f=>this._notifyEventProcessors(e,f,r,s+1).then(o)).then(null,a):this._notifyEventProcessors(e,u,r,s+1).then(o).then(null,a)}})}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(e=>{e(this)}),this._notifyingListeners=!1)}_applyFingerprint(e){var n;e.fingerprint=e.fingerprint?(n=e.fingerprint,Array.isArray(n)?n:[n]):[],this._fingerprint&&(e.fingerprint=e.fingerprint.concat(this._fingerprint)),e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint}}function ds(){return Zn("globalEventProcessors",()=>[])}function hs(t){ds().push(t)}function zr(){return{traceId:Ne(),spanId:Ne().substring(16),sampled:!1}}const fs=4,Co=100;class rr{constructor(e,n=new Ye,r=fs){this._version=r,this._stack=[{scope:n}],e&&this.bindClient(e)}isOlderThan(e){return this._version<e}bindClient(e){this.getStackTop().client=e,e&&e.setupIntegrations&&e.setupIntegrations()}pushScope(){const e=Ye.clone(this.getScope());return this.getStack().push({client:this.getClient(),scope:e}),e}popScope(){return!(this.getStack().length<=1)&&!!this.getStack().pop()}withScope(e){const n=this.pushScope();try{e(n)}finally{this.popScope()}}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(e,n){const r=this._lastEventId=n&&n.event_id?n.event_id:Ne(),s=new Error("Sentry syntheticException");return this._withClient((o,a)=>{o.captureException(e,{originalException:e,syntheticException:s,...n,event_id:r},a)}),r}captureMessage(e,n,r){const s=this._lastEventId=r&&r.event_id?r.event_id:Ne(),o=new Error(e);return this._withClient((a,c)=>{a.captureMessage(e,n,{originalException:e,syntheticException:o,...r,event_id:s},c)}),s}captureEvent(e,n){const r=n&&n.event_id?n.event_id:Ne();return e.type||(this._lastEventId=r),this._withClient((s,o)=>{s.captureEvent(e,{...n,event_id:r},o)}),r}lastEventId(){return this._lastEventId}addBreadcrumb(e,n){const{scope:r,client:s}=this.getStackTop();if(!s)return;const{beforeBreadcrumb:o=null,maxBreadcrumbs:a=Co}=s.getOptions&&s.getOptions()||{};if(a<=0)return;const c={timestamp:ln(),...e},u=o?rs(()=>o(c,n)):c;u!==null&&(s.emit&&s.emit("beforeAddBreadcrumb",u,n),r.addBreadcrumb(u,a))}setUser(e){this.getScope().setUser(e)}setTags(e){this.getScope().setTags(e)}setExtras(e){this.getScope().setExtras(e)}setTag(e,n){this.getScope().setTag(e,n)}setExtra(e,n){this.getScope().setExtra(e,n)}setContext(e,n){this.getScope().setContext(e,n)}configureScope(e){const{scope:n,client:r}=this.getStackTop();r&&e(n)}run(e){const n=Hr(this);try{e(this)}finally{Hr(n)}}getIntegration(e){const n=this.getClient();if(!n)return null;try{return n.getIntegration(e)}catch{return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&N.warn(`Cannot retrieve integration ${e.id} from the current Hub`),null}}startTransaction(e,n){const r=this._callExtensionMethod("startTransaction",e,n);return typeof __SENTRY_DEBUG__<"u"&&!__SENTRY_DEBUG__||r||console.warn(`Tracing extension 'startTransaction' has not been added. Call 'addTracingExtensions' before calling 'init':
Sentry.addTracingExtensions();
Sentry.init({...});
`),r}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(e=!1){if(e)return this.endSession();this._sendSessionUpdate()}endSession(){const e=this.getStackTop().scope,n=e.getSession();n&&function(r,s){let o={};r.status==="ok"&&(o={status:"exited"}),st(r,o)}(n),this._sendSessionUpdate(),e.setSession()}startSession(e){const{scope:n,client:r}=this.getStackTop(),{release:s,environment:o=nr}=r&&r.getOptions()||{},{userAgent:a}=ue.navigator||{},c=To({release:s,environment:o,user:n.getUser(),...a&&{userAgent:a},...e}),u=n.getSession&&n.getSession();return u&&u.status==="ok"&&st(u,{status:"exited"}),this.endSession(),n.setSession(c),c}shouldSendDefaultPii(){const e=this.getClient(),n=e&&e.getOptions();return!!(n&&n.sendDefaultPii)}_sendSessionUpdate(){const{scope:e,client:n}=this.getStackTop(),r=e.getSession();r&&n&&n.captureSession&&n.captureSession(r)}_withClient(e){const{scope:n,client:r}=this.getStackTop();r&&e(r,n)}_callExtensionMethod(e,...n){const r=en().__SENTRY__;if(r&&r.extensions&&typeof r.extensions[e]=="function")return r.extensions[e].apply(this,n);(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&N.warn(`Extension method ${e} couldn't be found, doing nothing.`)}}function en(){return ue.__SENTRY__=ue.__SENTRY__||{extensions:{},hub:void 0},ue}function Hr(t){const e=en(),n=Rn(e);return ps(e,t),n}function oe(){const t=en();if(t.__SENTRY__&&t.__SENTRY__.acs){const e=t.__SENTRY__.acs.getCurrentHub();if(e)return e}return function(e=en()){n=e,n&&n.__SENTRY__&&n.__SENTRY__.hub&&!Rn(e).isOlderThan(fs)||ps(e,new rr);var n;return Rn(e)}(t)}function Rn(t){return Zn("hub",()=>new rr,t)}function ps(t,e){return t?((t.__SENTRY__=t.__SENTRY__||{}).hub=e,!0):!1}const Ao="7";function Mo(t,e){return n={sentry_key:t.publicKey,sentry_version:Ao,...e&&{sentry_client:`${e.name}/${e.version}`}},Object.keys(n).map(r=>`${encodeURIComponent(r)}=${encodeURIComponent(n[r])}`).join("&");var n}function Oo(t,e,n,r){const s=ls(n),o=t.type&&t.type!=="replay_event"?t.type:"event";(function(c,u){u&&(c.sdk=c.sdk||{},c.sdk.name=c.sdk.name||u.name,c.sdk.version=c.sdk.version||u.version,c.sdk.integrations=[...c.sdk.integrations||[],...u.integrations||[]],c.sdk.packages=[...c.sdk.packages||[],...u.packages||[]])})(t,n&&n.sdk);const a=function(c,u,f,h){const p=c.sdkProcessingMetadata&&c.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:c.event_id,sent_at:new Date().toISOString(),...u&&{sdk:u},...!!f&&{dsn:Xt(h)},...p&&{trace:un({...p})}}}(t,s,r,e);return delete t.sdkProcessingMetadata,kt(a,[[{type:o},t]])}const Qr=[];function Kr(t,e){e[t.name]=t,Qr.indexOf(t.name)===-1&&(t.setupOnce(hs,oe),Qr.push(t.name),(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&N.log(`Integration installed: ${t.name}`))}function Lo(t,e,n,r){const{normalizeDepth:s=3,normalizeMaxBreadth:o=1e3}=t,a={...e,event_id:e.event_id||n.event_id||Ne(),timestamp:e.timestamp||ln()},c=n.integrations||t.integrations.map(h=>h.name);(function(h,p){const{environment:y,release:_,dist:w,maxValueLength:k=250}=p;"environment"in h||(h.environment="environment"in p?y:nr),h.release===void 0&&_!==void 0&&(h.release=_),h.dist===void 0&&w!==void 0&&(h.dist=w),h.message&&(h.message=Xe(h.message,k));const M=h.exception&&h.exception.values&&h.exception.values[0];M&&M.value&&(M.value=Xe(M.value,k));const P=h.request;P&&P.url&&(P.url=Xe(P.url,k))})(a,t),function(h,p){p.length>0&&(h.sdk=h.sdk||{},h.sdk.integrations=[...h.sdk.integrations||[],...p])}(a,c),e.type===void 0&&function(h,p){const y=ue._sentryDebugIds;if(!y)return;let _;const w=Xr.get(p);w?_=w:(_=new Map,Xr.set(p,_));const k=Object.keys(y).reduce((M,P)=>{let x;const W=_.get(P);W?x=W:(x=p(P),_.set(P,x));for(let E=x.length-1;E>=0;E--){const v=x[E];if(v.filename){M[v.filename]=y[P];break}}return M},{});try{h.exception.values.forEach(M=>{M.stacktrace.frames.forEach(P=>{P.filename&&(P.debug_id=k[P.filename])})})}catch{}}(a,t.stackParser);let u=r;n.captureContext&&(u=Ye.clone(u).update(n.captureContext));let f=We(a);if(u){if(u.getAttachments){const h=[...n.attachments||[],...u.getAttachments()];h.length&&(n.attachments=h)}f=u.applyToEvent(a,n)}return f.then(h=>(h&&function(p){const y={};try{p.exception.values.forEach(w=>{w.stacktrace.frames.forEach(k=>{k.debug_id&&(k.abs_path?y[k.abs_path]=k.debug_id:k.filename&&(y[k.filename]=k.debug_id),delete k.debug_id)})})}catch{}if(Object.keys(y).length===0)return;p.debug_meta=p.debug_meta||{},p.debug_meta.images=p.debug_meta.images||[];const _=p.debug_meta.images;Object.keys(y).forEach(w=>{_.push({type:"sourcemap",code_file:w,debug_id:y[w]})})}(h),typeof s=="number"&&s>0?function(p,y,_){if(!p)return null;const w={...p,...p.breadcrumbs&&{breadcrumbs:p.breadcrumbs.map(k=>({...k,...k.data&&{data:Ie(k.data,y,_)}}))},...p.user&&{user:Ie(p.user,y,_)},...p.contexts&&{contexts:Ie(p.contexts,y,_)},...p.extra&&{extra:Ie(p.extra,y,_)}};return p.contexts&&p.contexts.trace&&w.contexts&&(w.contexts.trace=p.contexts.trace,p.contexts.trace.data&&(w.contexts.trace.data=Ie(p.contexts.trace.data,y,_))),p.spans&&(w.spans=p.spans.map(k=>(k.data&&(k.data=Ie(k.data,y,_)),k))),w}(h,s,o):h))}const Xr=new WeakMap,Zr="Not capturing exception because it's already been captured.";class qe{__init(){this._integrations={}}__init2(){this._integrationsInitialized=!1}__init3(){this._numProcessing=0}__init4(){this._outcomes={}}__init5(){this._hooks={}}constructor(e){if(qe.prototype.__init.call(this),qe.prototype.__init2.call(this),qe.prototype.__init3.call(this),qe.prototype.__init4.call(this),qe.prototype.__init5.call(this),this._options=e,e.dsn?this._dsn=fo(e.dsn):(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&N.warn("No DSN provided, client will not do anything."),this._dsn){const n=function(r,s={}){const o=typeof s=="string"?s:s.tunnel,a=typeof s!="string"&&s._metadata?s._metadata.sdk:void 0;return o||`${function(c){return`${function(u){const f=u.protocol?`${u.protocol}:`:"",h=u.port?`:${u.port}`:"";return`${f}//${u.host}${h}${u.path?`/${u.path}`:""}/api/`}(c)}${c.projectId}/envelope/`}(r)}?${Mo(r,a)}`}(this._dsn,e);this._transport=e.transport({recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:n})}}captureException(e,n,r){if(Gr(e))return void((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&N.log(Zr));let s=n&&n.event_id;return this._process(this.eventFromException(e,n).then(o=>this._captureEvent(o,n,r)).then(o=>{s=o})),s}captureMessage(e,n,r,s){let o=r&&r.event_id;const a=ns(e)?this.eventFromMessage(String(e),n,r):this.eventFromException(e,r);return this._process(a.then(c=>this._captureEvent(c,r,s)).then(c=>{o=c})),o}captureEvent(e,n,r){if(n&&n.originalException&&Gr(n.originalException))return void((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&N.log(Zr));let s=n&&n.event_id;return this._process(this._captureEvent(e,n,r).then(o=>{s=o})),s}captureSession(e){this._isEnabled()?typeof e.release!="string"?(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&N.warn("Discarded session because of missing or non-string release"):(this.sendSession(e),st(e,{init:!1})):(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&N.warn("SDK not enabled, will not capture session.")}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(e){const n=this._transport;return n?this._isClientDoneProcessing(e).then(r=>n.flush(e).then(s=>r&&s)):We(!0)}close(e){return this.flush(e).then(n=>(this.getOptions().enabled=!1,n))}setupIntegrations(){this._isEnabled()&&!this._integrationsInitialized&&(this._integrations=function(e){const n={};return e.forEach(r=>{r&&Kr(r,n)}),n}(this._options.integrations),this._integrationsInitialized=!0)}getIntegrationById(e){return this._integrations[e]}getIntegration(e){try{return this._integrations[e.id]||null}catch{return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&N.warn(`Cannot retrieve integration ${e.id} from the current Client`),null}}addIntegration(e){Kr(e,this._integrations)}sendEvent(e,n={}){if(this._dsn){let r=Oo(e,this._dsn,this._options._metadata,this._options.tunnel);for(const o of n.attachments||[])r=_o(r,So(o,this._options.transportOptions&&this._options.transportOptions.textEncoder));const s=this._sendEnvelope(r);s&&s.then(o=>this.emit("afterSendEvent",e,o),null)}}sendSession(e){if(this._dsn){const n=function(r,s,o,a){const c=ls(o);return kt({sent_at:new Date().toISOString(),...c&&{sdk:c},...!!a&&{dsn:Xt(s)}},["aggregates"in r?[{type:"sessions"},r]:[{type:"session"},r.toJSON()]])}(e,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(n)}}recordDroppedEvent(e,n,r){if(this._options.sendClientReports){const s=`${e}:${n}`;(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&N.log(`Adding outcome: "${s}"`),this._outcomes[s]=this._outcomes[s]+1||1}}on(e,n){this._hooks[e]||(this._hooks[e]=[]),this._hooks[e].push(n)}emit(e,...n){this._hooks[e]&&this._hooks[e].forEach(r=>r(...n))}_updateSessionFromEvent(e,n){let r=!1,s=!1;const o=n.exception&&n.exception.values;if(o){s=!0;for(const c of o){const u=c.mechanism;if(u&&u.handled===!1){r=!0;break}}}const a=e.status==="ok";(a&&e.errors===0||a&&r)&&(st(e,{...r&&{status:"crashed"},errors:e.errors||Number(s||r)}),this.captureSession(e))}_isClientDoneProcessing(e){return new ie(n=>{let r=0;const s=setInterval(()=>{this._numProcessing==0?(clearInterval(s),n(!0)):(r+=1,e&&r>=e&&(clearInterval(s),n(!1)))},1)})}_isEnabled(){return this.getOptions().enabled!==!1&&this._dsn!==void 0}_prepareEvent(e,n,r){const s=this.getOptions(),o=Object.keys(this._integrations);return!n.integrations&&o.length>0&&(n.integrations=o),Lo(s,e,n,r).then(a=>{if(a===null)return a;const{propagationContext:c}=a.sdkProcessingMetadata||{};if(!(a.contexts&&a.contexts.trace)&&c){const{traceId:u,spanId:f,parentSpanId:h,dsc:p}=c;a.contexts={trace:{trace_id:u,span_id:f,parent_span_id:h},...a.contexts};const y=p||function(_,w,k){const M=w.getOptions(),{publicKey:P}=w.getDsn()||{},{segment:x}=k&&k.getUser()||{},W=un({environment:M.environment||nr,release:M.release,user_segment:x,public_key:P,trace_id:_});return w.emit&&w.emit("createDsc",W),W}(u,this,r);a.sdkProcessingMetadata={dynamicSamplingContext:y,...a.sdkProcessingMetadata}}return a})}_captureEvent(e,n={},r){return this._processEvent(e,n,r).then(s=>s.event_id,s=>{if(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__){const o=s;o.logLevel==="log"?N.log(o.message):N.warn(o)}})}_processEvent(e,n,r){const s=this.getOptions(),{sampleRate:o}=s;if(!this._isEnabled())return Zt(new pe("SDK not enabled, will not capture event.","log"));const a=ti(e),c=ei(e),u=e.type||"error",f=`before send for type \`${u}\``;if(c&&typeof o=="number"&&Math.random()>o)return this.recordDroppedEvent("sample_rate","error",e),Zt(new pe(`Discarding event because it's not included in the random sample (sampling rate = ${o})`,"log"));const h=u==="replay_event"?"replay":u;return this._prepareEvent(e,n,r).then(p=>{if(p===null)throw this.recordDroppedEvent("event_processor",h,e),new pe("An event processor returned `null`, will not send event.","log");if(n.data&&n.data.__sentry__===!0)return p;const y=function(_,w,k){const{beforeSend:M,beforeSendTransaction:P}=_;return ei(w)&&M?M(w,k):ti(w)&&P?P(w,k):w}(s,p,n);return function(_,w){const k=`${w} must return \`null\` or a valid event.`;if(Xn(_))return _.then(M=>{if(!it(M)&&M!==null)throw new pe(k);return M},M=>{throw new pe(`${w} rejected with ${M}`)});if(!it(_)&&_!==null)throw new pe(k);return _}(y,f)}).then(p=>{if(p===null)throw this.recordDroppedEvent("before_send",h,e),new pe(`${f} returned \`null\`, will not send event.`,"log");const y=r&&r.getSession();!a&&y&&this._updateSessionFromEvent(y,p);const _=p.transaction_info;if(a&&_&&p.transaction!==e.transaction){const w="custom";p.transaction_info={..._,source:w}}return this.sendEvent(p,n),p}).then(null,p=>{throw p instanceof pe?p:(this.captureException(p,{data:{__sentry__:!0},originalException:p}),new pe(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${p}`))})}_process(e){this._numProcessing++,e.then(n=>(this._numProcessing--,n),n=>(this._numProcessing--,n))}_sendEnvelope(e){if(this._transport&&this._dsn)return this.emit("beforeEnvelope",e),this._transport.send(e).then(null,n=>{(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&N.error("Error while sending event:",n)});(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&N.error("Transport disabled")}_clearOutcomes(){const e=this._outcomes;return this._outcomes={},Object.keys(e).map(n=>{const[r,s]=n.split(":");return{reason:r,category:s,quantity:e[n]}})}}function ei(t){return t.type===void 0}function ti(t){return t.type==="transaction"}const Po=30;function Do(t,e,n=yo(t.bufferSize||Po)){let r={};function s(o){const a=[];if(Jr(o,(f,h)=>{const p=Wr(h);if(function(y,_,w=Date.now()){return function(k,M){return k[M]||k.all||0}(y,_)>w}(r,p)){const y=ni(f,h);t.recordDroppedEvent("ratelimit_backoff",p,y)}else a.push(f)}),a.length===0)return We();const c=kt(o[0],a),u=f=>{Jr(c,(h,p)=>{const y=ni(h,p);t.recordDroppedEvent(f,Wr(p),y)})};return n.add(()=>e({body:bo(c,t.textEncoder)}).then(f=>(f.statusCode!==void 0&&(f.statusCode<200||f.statusCode>=300)&&(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&N.warn(`Sentry responded with status code ${f.statusCode} to sent event.`),r=ko(r,f),f),f=>{throw u("network_error"),f})).then(f=>f,f=>{if(f instanceof pe)return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&N.error("Skipped sending event because buffer is full."),u("queue_overflow"),We();throw f})}return s.__sentry__baseTransport__=!0,{send:s,flush:o=>n.drain(o)}}function ni(t,e){if(e==="event"||e==="transaction")return Array.isArray(t)?t[1]:void 0}const ri="7.60.1";let ii;class Tt{constructor(){Tt.prototype.__init.call(this)}static __initStatic(){this.id="FunctionToString"}__init(){this.name=Tt.id}setupOnce(){ii=Function.prototype.toString;try{Function.prototype.toString=function(...e){const n=tr(this)||this;return ii.apply(n,e)}}catch{}}}Tt.__initStatic();const Io=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/],No=[/^.*healthcheck.*$/,/^.*healthy.*$/,/^.*live.*$/,/^.*ready.*$/,/^.*heartbeat.*$/,/^.*\/health$/,/^.*\/healthz$/];class Ze{static __initStatic(){this.id="InboundFilters"}__init(){this.name=Ze.id}constructor(e={}){this._options=e,Ze.prototype.__init.call(this)}setupOnce(e,n){const r=s=>{const o=n();if(o){const a=o.getIntegration(Ze);if(a){const c=o.getClient(),u=c?c.getOptions():{},f=function(h={},p={}){return{allowUrls:[...h.allowUrls||[],...p.allowUrls||[]],denyUrls:[...h.denyUrls||[],...p.denyUrls||[]],ignoreErrors:[...h.ignoreErrors||[],...p.ignoreErrors||[],...h.disableErrorDefaults?[]:Io],ignoreTransactions:[...h.ignoreTransactions||[],...p.ignoreTransactions||[],...h.disableTransactionDefaults?[]:No],ignoreInternal:h.ignoreInternal===void 0||h.ignoreInternal}}(a._options,u);return function(h,p){return p.ignoreInternal&&function(y){try{return y.exception.values[0].type==="SentryError"}catch{}return!1}(h)?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&N.warn(`Event dropped due to being internal Sentry Error.
Event: ${De(h)}`),!0):function(y,_){return y.type||!_||!_.length?!1:function(w){if(w.message)return[w.message];if(w.exception){const{values:k}=w.exception;try{const{type:M="",value:P=""}=k&&k[k.length-1]||{};return[`${P}`,`${M}: ${P}`]}catch{return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&N.error(`Cannot extract message for event ${De(w)}`),[]}}return[]}(y).some(w=>Dt(w,_))}(h,p.ignoreErrors)?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&N.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${De(h)}`),!0):function(y,_){if(y.type!=="transaction"||!_||!_.length)return!1;const w=y.transaction;return!!w&&Dt(w,_)}(h,p.ignoreTransactions)?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&N.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${De(h)}`),!0):function(y,_){if(!_||!_.length)return!1;const w=Ut(y);return!!w&&Dt(w,_)}(h,p.denyUrls)?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&N.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${De(h)}.
Url: ${Ut(h)}`),!0):function(y,_){if(!_||!_.length)return!0;const w=Ut(y);return!w||Dt(w,_)}(h,p.allowUrls)?!1:((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&N.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${De(h)}.
Url: ${Ut(h)}`),!0)}(s,f)?null:s}}return s};r.id=this.name,e(r)}}function Ut(t){try{let e;try{e=t.exception.values[0].stacktrace.frames}catch{}return e?function(n=[]){for(let r=n.length-1;r>=0;r--){const s=n[r];if(s&&s.filename!=="<anonymous>"&&s.filename!=="[native code]")return s.filename||null}return null}(e):null}catch{return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&N.error(`Cannot extract url for event ${De(t)}`),null}}Ze.__initStatic();var Ro=Object.freeze({__proto__:null,FunctionToString:Tt,InboundFilters:Ze});const J=ue;let jn=0;function ms(){return jn>0}function at(t,e={},n){if(typeof t!="function")return t;try{const s=t.__sentry_wrapped__;if(s)return s;if(tr(t))return t}catch{return t}const r=function(){const s=Array.prototype.slice.call(arguments);try{n&&typeof n=="function"&&n.apply(this,arguments);const a=s.map(c=>at(c,e));return t.apply(this,a)}catch(a){throw jn++,setTimeout(()=>{jn--}),o=c=>{var u,f;c.addEventProcessor(h=>(e.mechanism&&(Pn(h,void 0),wt(h,e.mechanism)),h.extra={...h.extra,arguments:s},h)),u=a,oe().captureException(u,{captureContext:f})},oe().withScope(o),a}var o};try{for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}catch{}is(r,t),er(t,"__sentry_wrapped__",r);try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get:()=>t.name})}catch{}return r}function gs(t,e){const n=ir(t,e),r={type:e&&e.name,value:xo(e)};return n.length&&(r.stacktrace={frames:n}),r.type===void 0&&r.value===""&&(r.value="Unrecoverable error caught"),r}function gn(t,e){return{exception:{values:[gs(t,e)]}}}function ir(t,e){const n=e.stacktrace||e.stack||"",r=function(s){if(s){if(typeof s.framesToPop=="number")return s.framesToPop;if(jo.test(s.message))return 1}return 0}(e);try{return t(n,r)}catch{}return[]}const jo=/Minified React error #\d+;/i;function xo(t){const e=t&&t.message;return e?e.error&&typeof e.error.message=="string"?e.error.message:e:"No error message"}function sr(t,e,n,r,s){let o;if(Kn(e)&&e.error)return gn(t,e.error);if(Dr(e)||ot(e,"DOMException")){const a=e;if("stack"in e)o=gn(t,e);else{const c=a.name||(Dr(a)?"DOMError":"DOMException"),u=a.message?`${c}: ${a.message}`:c;o=xn(t,u,n,r),Pn(o,u)}return"code"in a&&(o.tags={...o.tags,"DOMException.code":`${a.code}`}),o}return ts(e)?gn(t,e):it(e)||Qt(e)?(o=function(a,c,u,f){const h=oe().getClient(),p=h&&h.getOptions().normalizeDepth,y={exception:{values:[{type:Qt(c)?c.constructor.name:f?"UnhandledRejection":"Error",value:Fo(c,{isUnhandledRejection:f})}]},extra:{__serialized__:os(c,p)}};if(u){const _=ir(a,u);_.length&&(y.exception.values[0].stacktrace={frames:_})}return y}(t,e,n,s),wt(o,{synthetic:!0}),o):(o=xn(t,e,n,r),Pn(o,`${e}`),wt(o,{synthetic:!0}),o)}function xn(t,e,n,r){const s={message:e};if(r&&n){const o=ir(t,n);o.length&&(s.exception={values:[{value:e,stacktrace:{frames:o}}]})}return s}function Fo(t,{isUnhandledRejection:e}){const n=function(s,o=40){const a=Object.keys(ss(s));if(a.sort(),!a.length)return"[object has no keys]";if(a[0].length>=o)return Xe(a[0],o);for(let c=a.length;c>0;c--){const u=a.slice(0,c).join(", ");if(!(u.length>o))return c===a.length?u:Xe(u,o)}return""}(t),r=e?"promise rejection":"exception";return Kn(t)?`Event \`ErrorEvent\` captured as ${r} with message \`${t.message}\``:Qt(t)?`Event \`${function(s){try{const o=Object.getPrototypeOf(s);return o?o.constructor.name:void 0}catch{}}(t)}\` (type=${t.type}) captured as ${r}`:`Object captured as ${r} with keys: ${n}`}const si=1024,ys="Breadcrumbs";class Ct{static __initStatic(){this.id=ys}__init(){this.name=Ct.id}constructor(e){Ct.prototype.__init.call(this),this.options={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e}}setupOnce(){this.options.console&&Be("console",Uo),this.options.dom&&Be("dom",function(e){function n(r){let s,o=typeof e=="object"?e.serializeAttribute:void 0,a=typeof e=="object"&&typeof e.maxStringLength=="number"?e.maxStringLength:void 0;a&&a>si&&((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&N.warn(`\`dom.maxStringLength\` cannot exceed 1024, but a value of ${a} was configured. Sentry will use 1024 instead.`),a=si),typeof o=="string"&&(o=[o]);try{const c=r.event;s=function(u){return!!u&&!!u.target}(c)?An(c.target,{keyAttrs:o,maxStringLength:a}):An(c,{keyAttrs:o,maxStringLength:a})}catch{s="<unknown>"}s.length!==0&&oe().addBreadcrumb({category:`ui.${r.name}`,message:s},{event:r.event,name:r.name,global:r.global})}return n}(this.options.dom)),this.options.xhr&&Be("xhr",Bo),this.options.fetch&&Be("fetch",qo),this.options.history&&Be("history",Vo)}addSentryBreadcrumb(e){this.options.sentry&&oe().addBreadcrumb({category:"sentry."+(e.type==="transaction"?"transaction":"event"),event_id:e.event_id,level:e.level,message:De(e)},{event:e})}}function Uo(t){for(let r=0;r<t.args.length;r++)if(t.args[r]==="ref=Ref<"){t.args[r+1]="viewRef";break}const e={category:"console",data:{arguments:t.args,logger:"console"},level:(n=t.level,n==="warn"?"warning":vo.includes(n)?n:"log"),message:Ir(t.args," ")};var n;if(t.level==="assert"){if(t.args[0]!==!1)return;e.message=`Assertion failed: ${Ir(t.args.slice(1)," ")||"console.assert"}`,e.data.arguments=t.args.slice(1)}oe().addBreadcrumb(e,{input:t.args,level:t.level})}function Bo(t){const{startTimestamp:e,endTimestamp:n}=t,r=t.xhr[mt];if(!e||!n||!r)return;const{method:s,url:o,status_code:a,body:c}=r,u={method:s,url:o,status_code:a},f={xhr:t.xhr,input:c,startTimestamp:e,endTimestamp:n};oe().addBreadcrumb({category:"xhr",data:u,type:"http"},f)}function qo(t){const{startTimestamp:e,endTimestamp:n}=t;if(n&&(!t.fetchData.url.match(/sentry_key/)||t.fetchData.method!=="POST"))if(t.error){const r=t.fetchData,s={data:t.error,input:t.args,startTimestamp:e,endTimestamp:n};oe().addBreadcrumb({category:"fetch",data:r,level:"error",type:"http"},s)}else{const r={...t.fetchData,status_code:t.response&&t.response.status},s={input:t.args,response:t.response,startTimestamp:e,endTimestamp:n};oe().addBreadcrumb({category:"fetch",data:r,type:"http"},s)}}function Vo(t){let e=t.from,n=t.to;const r=pn(J.location.href);let s=pn(e);const o=pn(n);s.path||(s=r),r.protocol===o.protocol&&r.host===o.host&&(n=o.relative),r.protocol===s.protocol&&r.host===s.host&&(e=s.relative),oe().addBreadcrumb({category:"navigation",data:{from:e,to:n}})}Ct.__initStatic();class Yo extends qe{constructor(e){const n=J.SENTRY_SDK_SOURCE||"npm";e._metadata=e._metadata||{},e._metadata.sdk=e._metadata.sdk||{name:"sentry.javascript.browser",packages:[{name:`${n}:@sentry/browser`,version:ri}],version:ri},super(e),e.sendClientReports&&J.document&&J.document.addEventListener("visibilitychange",()=>{J.document.visibilityState==="hidden"&&this._flushOutcomes()})}eventFromException(e,n){return function(r,s,o,a){const c=sr(r,s,o&&o.syntheticException||void 0,a);return wt(c),c.level="error",o&&o.event_id&&(c.event_id=o.event_id),We(c)}(this._options.stackParser,e,n,this._options.attachStacktrace)}eventFromMessage(e,n="info",r){return function(s,o,a="info",c,u){const f=xn(s,o,c&&c.syntheticException||void 0,u);return f.level=a,c&&c.event_id&&(f.event_id=c.event_id),We(f)}(this._options.stackParser,e,n,r,this._options.attachStacktrace)}sendEvent(e,n){const r=this.getIntegrationById(ys);r&&r.addSentryBreadcrumb&&r.addSentryBreadcrumb(e),super.sendEvent(e,n)}captureUserFeedback(e){if(!this._isEnabled())return void((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&N.warn("SDK not enabled, will not capture user feedback."));const n=function(r,{metadata:s,tunnel:o,dsn:a}){const c={event_id:r.event_id,sent_at:new Date().toISOString(),...s&&s.sdk&&{sdk:{name:s.sdk.name,version:s.sdk.version}},...!!o&&!!a&&{dsn:Xt(a)}};return kt(c,[function(f){return[{type:"user_report"},f]}(r)])}(e,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this._sendEnvelope(n)}_prepareEvent(e,n,r){return e.platform=e.platform||"javascript",super._prepareEvent(e,n,r)}_flushOutcomes(){const e=this._clearOutcomes();if(e.length===0)return void((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&N.log("No outcomes to send"));if(!this._dsn)return void((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&N.log("No dsn provided, will not send outcomes"));(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&N.log("Sending outcomes:",e);const n=(r=e,kt((s=this._options.tunnel&&Xt(this._dsn))?{dsn:s}:{},[[{type:"client_report"},{timestamp:o||ln(),discarded_events:r}]]));var r,s,o;this._sendEnvelope(n)}}let ht;function Go(t,e=function(){if(ht)return ht;if(On(J.fetch))return ht=J.fetch.bind(J);const n=J.document;let r=J.fetch;if(n&&typeof n.createElement=="function")try{const s=n.createElement("iframe");s.hidden=!0,n.head.appendChild(s);const o=s.contentWindow;o&&o.fetch&&(r=o.fetch),n.head.removeChild(s)}catch(s){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&N.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",s)}return ht=r.bind(J)}()){let n=0,r=0;return Do(t,function(s){const o=s.body.length;n+=o,r++;const a={body:s.body,method:"POST",referrerPolicy:"origin",headers:t.headers,keepalive:n<=6e4&&r<15,...t.fetchOptions};try{return e(t.url,a).then(c=>(n-=o,r--,{statusCode:c.status,headers:{"x-sentry-rate-limits":c.headers.get("X-Sentry-Rate-Limits"),"retry-after":c.headers.get("Retry-After")}}))}catch(c){return ht=void 0,n-=o,r--,Zt(c)}})}class Re{static __initStatic(){this.id="GlobalHandlers"}__init(){this.name=Re.id}__init2(){this._installFunc={onerror:$o,onunhandledrejection:Jo}}constructor(e){Re.prototype.__init.call(this),Re.prototype.__init2.call(this),this._options={onerror:!0,onunhandledrejection:!0,...e}}setupOnce(){Error.stackTraceLimit=50;const e=this._options;for(const r in e){const s=this._installFunc[r];s&&e[r]&&(n=r,(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&N.log(`Global Handler attached: ${n}`),s(),this._installFunc[r]=void 0)}var n}}function $o(){Be("error",t=>{const[e,n,r]=_s();if(!e.getIntegration(Re))return;const{msg:s,url:o,line:a,column:c,error:u}=t;if(ms()||u&&u.__sentry_own_request__)return;const f=u===void 0&&$e(s)?function(h,p,y,_){const w=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;let k=Kn(h)?h.message:h,M="Error";const P=k.match(w);return P&&(M=P[1],k=P[2]),ai({exception:{values:[{type:M,value:k}]}},p,y,_)}(s,o,a,c):ai(sr(n,u||s,void 0,r,!1),o,a,c);f.level="error",vs(e,u,f,"onerror")})}function Jo(){Be("unhandledrejection",t=>{const[e,n,r]=_s();if(!e.getIntegration(Re))return;let s=t;try{"reason"in t?s=t.reason:"detail"in t&&"reason"in t.detail&&(s=t.detail.reason)}catch{}if(ms()||s&&s.__sentry_own_request__)return!0;const o=ns(s)?{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(s)}`}]}}:sr(n,s,void 0,r,!0);o.level="error",vs(e,s,o,"onunhandledrejection")})}function ai(t,e,n,r){const s=t.exception=t.exception||{},o=s.values=s.values||[],a=o[0]=o[0]||{},c=a.stacktrace=a.stacktrace||{},u=c.frames=c.frames||[],f=isNaN(parseInt(r,10))?void 0:r,h=isNaN(parseInt(n,10))?void 0:n,p=$e(e)&&e.length>0?e:function(){try{return co.document.location.href}catch{return""}}();return u.length===0&&u.push({colno:f,filename:p,function:"?",in_app:!0,lineno:h}),t}function vs(t,e,n,r){wt(n,{handled:!1,type:r}),t.captureEvent(n,{originalException:e})}function _s(){const t=oe(),e=t.getClient(),n=e&&e.getOptions()||{stackParser:()=>[],attachStacktrace:!1};return[t,n.stackParser,n.attachStacktrace]}Re.__initStatic();const Wo=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"];class At{static __initStatic(){this.id="TryCatch"}__init(){this.name=At.id}constructor(e){At.prototype.__init.call(this),this._options={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...e}}setupOnce(){this._options.setTimeout&&ee(J,"setTimeout",oi),this._options.setInterval&&ee(J,"setInterval",oi),this._options.requestAnimationFrame&&ee(J,"requestAnimationFrame",zo),this._options.XMLHttpRequest&&"XMLHttpRequest"in J&&ee(XMLHttpRequest.prototype,"send",Ho);const e=this._options.eventTarget;e&&(Array.isArray(e)?e:Wo).forEach(Qo)}}function oi(t){return function(...e){const n=e[0];return e[0]=at(n,{mechanism:{data:{function:je(t)},handled:!0,type:"instrument"}}),t.apply(this,e)}}function zo(t){return function(e){return t.apply(this,[at(e,{mechanism:{data:{function:"requestAnimationFrame",handler:je(t)},handled:!0,type:"instrument"}})])}}function Ho(t){return function(...e){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(r=>{r in n&&typeof n[r]=="function"&&ee(n,r,function(s){const o={mechanism:{data:{function:r,handler:je(s)},handled:!0,type:"instrument"}},a=tr(s);return a&&(o.mechanism.data.handler=je(a)),at(s,o)})}),t.apply(this,e)}}function Qo(t){const e=J,n=e[t]&&e[t].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(ee(n,"addEventListener",function(r){return function(s,o,a){try{typeof o.handleEvent=="function"&&(o.handleEvent=at(o.handleEvent,{mechanism:{data:{function:"handleEvent",handler:je(o),target:t},handled:!0,type:"instrument"}}))}catch{}return r.apply(this,[s,at(o,{mechanism:{data:{function:"addEventListener",handler:je(o),target:t},handled:!0,type:"instrument"}}),a])}}),ee(n,"removeEventListener",function(r){return function(s,o,a){const c=o;try{const u=c&&c.__sentry_wrapped__;u&&r.call(this,s,u,a)}catch{}return r.call(this,s,c,a)}}))}At.__initStatic();class et{static __initStatic(){this.id="LinkedErrors"}__init(){this.name=et.id}constructor(e={}){et.prototype.__init.call(this),this._key=e.key||"cause",this._limit=e.limit||5}setupOnce(e,n){e((r,s)=>{const o=n(),a=o.getClient(),c=o.getIntegration(et);if(!a||!c)return r;const u=a.getOptions();return oo(gs,u.stackParser,u.maxValueLength,c._key,c._limit,r,s),r})}}et.__initStatic();class tt{constructor(){tt.prototype.__init.call(this)}static __initStatic(){this.id="HttpContext"}__init(){this.name=tt.id}setupOnce(){hs(e=>{if(oe().getIntegration(tt)){if(!J.navigator&&!J.location&&!J.document)return e;const n=e.request&&e.request.url||J.location&&J.location.href,{referrer:r}=J.document||{},{userAgent:s}=J.navigator||{},o={...e.request&&e.request.headers,...r&&{Referer:r},...s&&{"User-Agent":s}},a={...e.request,...n&&{url:n},headers:o};return{...e,request:a}}return e})}}tt.__initStatic();class nt{constructor(){nt.prototype.__init.call(this)}static __initStatic(){this.id="Dedupe"}__init(){this.name=nt.id}setupOnce(e,n){const r=s=>{if(s.type)return s;const o=n().getIntegration(nt);if(o){try{if(function(a,c){return c?!!(function(u,f){const h=u.message,p=f.message;return!(!h&&!p||h&&!p||!h&&p||h!==p||!ui(u,f)||!ci(u,f))}(a,c)||function(u,f){const h=li(f),p=li(u);return!(!h||!p||h.type!==p.type||h.value!==p.value||!ui(u,f)||!ci(u,f))}(a,c)):!1}(s,o._previousEvent))return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&N.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{return o._previousEvent=s}return o._previousEvent=s}return s};r.id=this.name,e(r)}}function ci(t,e){let n=di(t),r=di(e);if(!n&&!r)return!0;if(n&&!r||!n&&r||r.length!==n.length)return!1;for(let s=0;s<r.length;s++){const o=r[s],a=n[s];if(o.filename!==a.filename||o.lineno!==a.lineno||o.colno!==a.colno||o.function!==a.function)return!1}return!0}function ui(t,e){let n=t.fingerprint,r=e.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;try{return n.join("")===r.join("")}catch{return!1}}function li(t){return t.exception&&t.exception.values&&t.exception.values[0]}function di(t){const e=t.exception;if(e)try{return e.values[0].stacktrace.frames}catch{return}}nt.__initStatic();var Ko=Object.freeze({__proto__:null,Breadcrumbs:Ct,Dedupe:nt,GlobalHandlers:Re,HttpContext:tt,LinkedErrors:et,TryCatch:At});let bs={};J.Sentry&&J.Sentry.Integrations&&(bs=J.Sentry.Integrations);const hi={...bs,...Ro,...Ko};var Fn="new",fi="loading",pi="loaded",tn="joining-meeting",Ve="joined-meeting",Pe="left-meeting",ke="error",Xo="blocked",Zo="off",ec="sendable",tc="loading",nc="interrupted",rc="playable",Jt="unknown",Ss="full",ic="lobby",sc="none",Es="base",ws="*",ac="ejected",oc="nbf-room",cc="nbf-token",uc="exp-room",lc="exp-token",dc="no-room",hc="meeting-full",fc="end-of-life",pc="not-allowed",mc="connection-error",gc="cam-in-use",yc="mic-in-use",vc="cam-mic-in-use",_c="permissions",bc="undefined-mediadevices",Sc="not-found",Ec="constraints",wc="unknown",ks="iframe-ready-for-launch-config",Ts="iframe-launch-config",Cs="theme-updated",As="loading",Ms="load-attempt-failed",Un="loaded",Os="started-camera",Ls="camera-error",Ps="joining-meeting",Ds="joined-meeting",Is="left-meeting",Ns="participant-joined",Rs="participant-updated",js="participant-left",xs="participant-counts-updated",Fs="access-state-updated",Us="meeting-session-summary-updated",Bs="meeting-session-state-updated",kc="meeting-session-data-error",qs="waiting-participant-added",Vs="waiting-participant-updated",Ys="waiting-participant-removed",Gs="track-started",$s="track-stopped",Js="transcription-started",Ws="transcription-stopped",zs="transcription-error",Bn="recording-started",qn="recording-stopped",Hs="recording-stats",Qs="recording-error",Ks="recording-upload-completed",Xs="recording-data",Zs="app-message",ea="transcription-message",ta="remote-media-player-started",na="remote-media-player-updated",ra="remote-media-player-stopped",ia="local-screen-share-started",sa="local-screen-share-stopped",aa="local-screen-share-canceled",oa="active-speaker-change",ca="active-speaker-mode-change",ua="network-quality-change",la="network-connection",da="cpu-load-change",ha="face-counts-updated",gt="fullscreen",yt="exited-fullscreen",fa="live-streaming-started",pa="live-streaming-updated",ma="live-streaming-stopped",ga="live-streaming-error",ya="lang-updated",va="receive-settings-updated",_a="input-settings-updated",Vn="nonfatal-error",Yn="error",yn=4096,mi=102400,vn="iframe-call-message",gi="local-screen-start",yi="daily-method-update-live-streaming-endpoints",Bt="transmit-log",vt="daily-custom-track",Wt={NONE:"none",BGBLUR:"background-blur",BGIMAGE:"background-image",FACE_DETECTION:"face-detection"},ba={NONE:"none",NOISE_CANCELLATION:"noise-cancellation"},Gn={PLAY:"play",PAUSE:"pause"},vi=10,_n=["jpg","png","jpeg"],Tc="add-endpoints",Cc="remove-endpoints",_i="sip-call-transfer";function le(){return!B()&&typeof window<"u"&&window.navigator&&window.navigator.userAgent?window.navigator.userAgent:""}function B(){return typeof navigator<"u"&&navigator.product&&navigator.product==="ReactNative"}function Sa(){return navigator&&navigator.mediaDevices&&navigator.mediaDevices.getUserMedia}function Ac(){return!!(navigator&&navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia)&&(function(t,e){if(!t||!e)return!0;switch(t){case"Chrome":return e.major>=75;case"Safari":return RTCRtpTransceiver.prototype.hasOwnProperty("currentDirection")&&!(e.major===13&&e.minor===0&&e.point===0);case"Firefox":return e.major>=67}return!0}(xe(),nn())||B())}function bi(){if(B()||!document)return!1;var t=document.createElement("iframe");return!!t.requestFullscreen||!!t.webkitRequestFullscreen}var Mc=function(){try{var t=document.createElement("canvas"),e=t.getContext("webgl2")!=null;return t.remove(),e}catch{return!1}}();function Ea(){var t=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return!B()&&!!Mc&&(t?function(){return Ei()?!1:["Chrome","Firefox"].includes(xe())}():function(){if(Ei())return!1;var e=xe();if(e==="Safari"){var n=or();if(n.major<15||n.major===15&&n.minor<4)return!1}return e==="Chrome"?ar().major>=77:e==="Firefox"?cr().major>=97:["Chrome","Firefox","Safari"].includes(e)}())}function wa(){if(B()||ka()||typeof AudioWorkletNode>"u")return!1;switch(xe()){case"Chrome":case"Firefox":return!0;case"Safari":return nn().major>=17}return!1}function Si(){return Sa()&&!function(){var t,e=xe();if(!le())return!0;switch(e){case"Chrome":return(t=ar()).major&&t.major>0&&t.major<75;case"Firefox":return(t=cr()).major<91;case"Safari":return(t=or()).major<13||t.major===13&&t.minor<1;default:return!0}}()}function ka(){return le().match(/Linux; Android/)}function Ei(){var t,e,n=le(),r=n.match(/Mac/)&&(!B()&&typeof window<"u"&&(t=window)!==null&&t!==void 0&&(e=t.navigator)!==null&&e!==void 0&&e.maxTouchPoints?window.navigator.maxTouchPoints:0)>=5;return!!(n.match(/Mobi/)||n.match(/Android/)||r)||!!le().match(/DailyAnd\//)||void 0}function xe(){if(typeof window<"u"){var t=le();return Ta()?"Safari":t.indexOf("Edge")>-1?"Edge":t.match(/Chrome\//)?"Chrome":t.indexOf("Safari")>-1||Ca()?"Safari":t.indexOf("Firefox")>-1?"Firefox":t.indexOf("MSIE")>-1||t.indexOf(".NET")>-1?"IE":"Unknown Browser"}}function nn(){switch(xe()){case"Chrome":return ar();case"Safari":return or();case"Firefox":return cr();case"Edge":return function(){var t=0,e=0;if(typeof window<"u"){var n=le().match(/Edge\/(\d+).(\d+)/);if(n)try{t=parseInt(n[1]),e=parseInt(n[2])}catch{}}return{major:t,minor:e}}()}}function ar(){var t=0,e=0,n=0,r=0,s=!1;if(typeof window<"u"){var o=le(),a=o.match(/Chrome\/(\d+).(\d+).(\d+).(\d+)/);if(a)try{t=parseInt(a[1]),e=parseInt(a[2]),n=parseInt(a[3]),r=parseInt(a[4]),s=o.indexOf("OPR/")>-1}catch{}}return{major:t,minor:e,build:n,patch:r,opera:s}}function Ta(){return!!le().match(/iPad|iPhone|iPod/i)&&Sa()}function Ca(){return le().indexOf("AppleWebKit/605.1.15")>-1}function or(){var t=0,e=0,n=0;if(typeof window<"u"){var r=le().match(/Version\/(\d+).(\d+)(.(\d+))?/);if(r)try{t=parseInt(r[1]),e=parseInt(r[2]),n=parseInt(r[4])}catch{}else(Ta()||Ca())&&(t=14,e=0,n=3)}return{major:t,minor:e,point:n}}function cr(){var t=0,e=0;if(typeof window<"u"){var n=le().match(/Firefox\/(\d+).(\d+)/);if(n)try{t=parseInt(n[1]),e=parseInt(n[2])}catch{}}return{major:t,minor:e}}var Aa=function(){function t(){ge(this,t)}return ye(t,[{key:"addListenerForMessagesFromCallMachine",value:function(e,n,r){dt()}},{key:"addListenerForMessagesFromDailyJs",value:function(e,n,r){dt()}},{key:"sendMessageToCallMachine",value:function(e,n,r,s){dt()}},{key:"sendMessageToDailyJs",value:function(e,n){dt()}},{key:"removeListener",value:function(e){dt()}}]),t}();function wi(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function bn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?wi(Object(n),!0).forEach(function(r){Ce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wi(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Oc(t){var e=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=me(t);if(e){var s=me(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return on(this,n)}}var Lc=function(t){an(n,Aa);var e=Oc(n);function n(){var r;return ge(this,n),(r=e.call(this))._wrappedListeners={},r._messageCallbacks={},r}return ye(n,[{key:"addListenerForMessagesFromCallMachine",value:function(r,s,o){var a=this,c=function(u){if(u.data&&u.data.what==="iframe-call-message"&&(!u.data.callClientId||u.data.callClientId===s)&&(!u.data.from||u.data.from!=="module")){var f=bn({},u.data);if(delete f.from,f.callbackStamp&&a._messageCallbacks[f.callbackStamp]){var h=f.callbackStamp;a._messageCallbacks[h].call(o,f),delete a._messageCallbacks[h]}delete f.what,delete f.callbackStamp,r.call(o,f)}};this._wrappedListeners[r]=c,window.addEventListener("message",c)}},{key:"addListenerForMessagesFromDailyJs",value:function(r,s,o){var a=function(c){var u;if(!(!c.data||c.data.what!==vn||!c.data.action||c.data.from&&c.data.from!=="module"||c.data.callClientId&&s&&c.data.callClientId!==s||c!=null&&(u=c.data)!==null&&u!==void 0&&u.callFrameId)){var f=c.data;r.call(o,f)}};this._wrappedListeners[r]=a,window.addEventListener("message",a)}},{key:"sendMessageToCallMachine",value:function(r,s,o,a){if(!o)throw new Error("undefined callClientId. Are you trying to use a DailyCall instance previously destroyed?");var c=bn({},r);if(c.what=vn,c.from="module",c.callClientId=o,s){var u=cn();this._messageCallbacks[u]=s,c.callbackStamp=u}var f=a?a.contentWindow:window,h=this._callMachineTargetOrigin(a);h&&f.postMessage(c,h)}},{key:"sendMessageToDailyJs",value:function(r,s){r.what=vn,r.callClientId=s,r.from="embedded",window.postMessage(r,this._targetOriginFromWindowLocation())}},{key:"removeListener",value:function(r){var s=this._wrappedListeners[r];s&&(window.removeEventListener("message",s),delete this._wrappedListeners[r])}},{key:"forwardPackagedMessageToCallMachine",value:function(r,s,o){var a=bn({},r);a.callClientId=o;var c=s?s.contentWindow:window,u=this._callMachineTargetOrigin(s);u&&c.postMessage(a,u)}},{key:"addListenerForPackagedMessagesFromCallMachine",value:function(r,s){var o=function(a){if(a.data&&a.data.what==="iframe-call-message"&&(!a.data.callClientId||a.data.callClientId===s)&&(!a.data.from||a.data.from!=="module")){var c=a.data;r(c)}};return this._wrappedListeners[r]=o,window.addEventListener("message",o),r}},{key:"removeListenerForPackagedMessagesFromCallMachine",value:function(r){var s=this._wrappedListeners[r];s&&(window.removeEventListener("message",s),delete this._wrappedListeners[r])}},{key:"_callMachineTargetOrigin",value:function(r){return r?r.src?new URL(r.src).origin:void 0:this._targetOriginFromWindowLocation()}},{key:"_targetOriginFromWindowLocation",value:function(){return window.location.protocol==="file:"?"*":window.location.origin}}]),n}();function ki(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Pc(t){var e=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=me(t);if(e){var s=me(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return on(this,n)}}var Dc=function(t){an(n,Aa);var e=Pc(n);function n(){var r;return ge(this,n),r=e.call(this),global.callMachineToDailyJsEmitter=global.callMachineToDailyJsEmitter||new Ae.EventEmitter,global.dailyJsToCallMachineEmitter=global.dailyJsToCallMachineEmitter||new Ae.EventEmitter,r._wrappedListeners={},r._messageCallbacks={},r}return ye(n,[{key:"addListenerForMessagesFromCallMachine",value:function(r,s,o){this._addListener(r,global.callMachineToDailyJsEmitter,s,o,"received call machine message")}},{key:"addListenerForMessagesFromDailyJs",value:function(r,s,o){this._addListener(r,global.dailyJsToCallMachineEmitter,s,o,"received daily-js message")}},{key:"sendMessageToCallMachine",value:function(r,s,o){this._sendMessage(r,global.dailyJsToCallMachineEmitter,o,s,"sending message to call machine")}},{key:"sendMessageToDailyJs",value:function(r,s){this._sendMessage(r,global.callMachineToDailyJsEmitter,s,null,"sending message to daily-js")}},{key:"removeListener",value:function(r){var s=this._wrappedListeners[r];s&&(global.callMachineToDailyJsEmitter.removeListener("message",s),global.dailyJsToCallMachineEmitter.removeListener("message",s),delete this._wrappedListeners[r])}},{key:"_addListener",value:function(r,s,o,a,c){var u=this,f=function(h){if(h.callClientId===o){if(h.callbackStamp&&u._messageCallbacks[h.callbackStamp]){var p=h.callbackStamp;u._messageCallbacks[p].call(a,h),delete u._messageCallbacks[p]}r.call(a,h)}};this._wrappedListeners[r]=f,s.addListener("message",f)}},{key:"_sendMessage",value:function(r,s,o,a,c){var u=function(h){for(var p=1;p<arguments.length;p++){var y=arguments[p]!=null?arguments[p]:{};p%2?ki(Object(y),!0).forEach(function(_){Ce(h,_,y[_])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(y)):ki(Object(y)).forEach(function(_){Object.defineProperty(h,_,Object.getOwnPropertyDescriptor(y,_))})}return h}({},r);if(u.callClientId=o,a){var f=cn();this._messageCallbacks[f]=a,u.callbackStamp=f}s.emit("message",u)}}]),n}(),$n="replace",Jn="shallow-merge",Ti=[$n,Jn],Ic=function(){function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.data,r=e.mergeStrategy,s=r===void 0?$n:r;ge(this,t),t._validateMergeStrategy(s),t._validateData(n,s),this.mergeStrategy=s,this.data=n}return ye(t,[{key:"isNoOp",value:function(){return t.isNoOpUpdate(this.data,this.mergeStrategy)}}],[{key:"isNoOpUpdate",value:function(e,n){return Object.keys(e).length===0&&n===Jn}},{key:"_validateMergeStrategy",value:function(e){if(!Ti.includes(e))throw Error("Unrecognized mergeStrategy provided. Options are: [".concat(Ti,"]"))}},{key:"_validateData",value:function(e,n){if(!function(c){if(c==null||Y(c)!=="object")return!1;var u=Object.getPrototypeOf(c);return u==null||u===Object.prototype}(e))throw Error("Meeting session data must be a plain (map-like) object");var r;try{if(r=JSON.stringify(e),n===$n){var s=JSON.parse(r);se(s,e)||console.warn("The meeting session data provided will be modified when serialized.",s,e)}else if(n===Jn){for(var o in e)if(Object.hasOwnProperty.call(e,o)&&e[o]!==void 0){var a=JSON.parse(JSON.stringify(e[o]));se(e[o],a)||console.warn("At least one key in the meeting session data provided will be modified when serialized.",a,e[o])}}}catch(c){throw Error("Meeting session data must be serializable to JSON: ".concat(c))}if(r.length>mi)throw Error("Meeting session data is too large (".concat(r.length," characters). Maximum size suppported is ").concat(mi,"."))}}]),t}();function Wn(t,e,n){return Wn=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}()?Reflect.construct.bind():function(r,s,o){var a=[null];a.push.apply(a,s);var c=new(Function.bind.apply(r,a));return o&&St(c,o.prototype),c},Wn.apply(null,arguments)}function zn(t){var e=typeof Map=="function"?new Map:void 0;return zn=function(n){if(n===null||(r=n,Function.toString.call(r).indexOf("[native code]")===-1))return n;var r;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(e!==void 0){if(e.has(n))return e.get(n);e.set(n,s)}function s(){return Wn(n,arguments,me(this).constructor)}return s.prototype=Object.create(n.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),St(s,n)},zn(t)}function Nc(t){var e=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=me(t);if(e){var s=me(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return on(this,n)}}function Ci(t){var e,n=(e=window._daily)===null||e===void 0?void 0:e.pendings;if(n){var r=n.indexOf(t);r!==-1&&n.splice(r,1)}}var Rc=function(){function t(e){ge(this,t),this._currentLoad=null,this._callClientId=e}return ye(t,[{key:"load",value:function(){var e,n=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0,o=arguments.length>2?arguments[2]:void 0;if(this.loaded)return window._daily.instances[this._callClientId].callMachine.reset(),void s(!0);e=this._callClientId,window._daily.pendings.push(e),this._currentLoad&&this._currentLoad.cancel(),this._currentLoad=new jc(r,function(){s(!1)},function(a,c){c||Ci(n._callClientId),o(a,c)}),this._currentLoad.start()}},{key:"cancel",value:function(){this._currentLoad&&this._currentLoad.cancel(),Ci(this._callClientId)}},{key:"loaded",get:function(){return this._currentLoad&&this._currentLoad.succeeded}}]),t}(),jc=function(){function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;ge(this,t),this._attemptsRemaining=3,this._currentAttempt=null,this._dailyConfig=e,this._successCallback=n,this._failureCallback=r}return ye(t,[{key:"start",value:function(){var e=this;this._currentAttempt||(this._currentAttempt=new Ai(this._dailyConfig,this._successCallback,function n(r){e._currentAttempt.cancelled||(e._attemptsRemaining--,e._failureCallback(r,e._attemptsRemaining>0),e._attemptsRemaining<=0||setTimeout(function(){e._currentAttempt.cancelled||(e._currentAttempt=new Ai(e._dailyConfig,e._successCallback,n),e._currentAttempt.start())},3e3))}),this._currentAttempt.start())}},{key:"cancel",value:function(){this._currentAttempt&&this._currentAttempt.cancel()}},{key:"cancelled",get:function(){return this._currentAttempt&&this._currentAttempt.cancelled}},{key:"succeeded",get:function(){return this._currentAttempt&&this._currentAttempt.succeeded}}]),t}(),Sn=function(t){an(n,zn(Error));var e=Nc(n);function n(){return ge(this,n),e.apply(this,arguments)}return ye(n)}(),rn=2e4,Ai=function(){function t(n,r,s){ge(this,t),this._loadAttemptImpl=B()||!n.avoidEval?new xc(n,r,s):new Fc(n,r,s)}var e;return ye(t,[{key:"start",value:(e=D(function*(){return this._loadAttemptImpl.start()}),function(){return e.apply(this,arguments)})},{key:"cancel",value:function(){this._loadAttemptImpl.cancel()}},{key:"cancelled",get:function(){return this._loadAttemptImpl.cancelled}},{key:"succeeded",get:function(){return this._loadAttemptImpl.succeeded}}]),t}(),xc=function(){function t(o,a,c){ge(this,t),this.cancelled=!1,this.succeeded=!1,this._networkTimedOut=!1,this._networkTimeout=null,this._iosCache=typeof iOSCallObjectBundleCache<"u"&&iOSCallObjectBundleCache,this._refetchHeaders=null,this._dailyConfig=o,this._successCallback=a,this._failureCallback=c}var e,n,r,s;return ye(t,[{key:"start",value:(s=D(function*(){var o=Ht(this._dailyConfig);!(yield this._tryLoadFromIOSCache(o))&&this._loadFromNetwork(o)}),function(){return s.apply(this,arguments)})},{key:"cancel",value:function(){clearTimeout(this._networkTimeout),this.cancelled=!0}},{key:"_tryLoadFromIOSCache",value:(r=D(function*(o){if(!this._iosCache)return!1;try{var a=yield this._iosCache.get(o);return!!this.cancelled||!!a&&(a.code?(Function('"use strict";'+a.code)(),this.succeeded=!0,this._successCallback(),!0):(this._refetchHeaders=a.refetchHeaders,!1))}catch{return!1}}),function(o){return r.apply(this,arguments)})},{key:"_loadFromNetwork",value:(n=D(function*(o){var a=this;this._networkTimeout=setTimeout(function(){a._networkTimedOut=!0,a._failureCallback({msg:"Timed out (>".concat(rn," ms) when loading call object bundle ").concat(o),type:"timeout"})},rn);try{var c=this._refetchHeaders?{headers:this._refetchHeaders}:{},u=yield fetch(o,c);if(clearTimeout(this._networkTimeout),this.cancelled||this._networkTimedOut)throw new Sn;var f=yield this._getBundleCodeFromResponse(o,u);if(this.cancelled)throw new Sn;Function('"use strict";'+f)(),this._iosCache&&this._iosCache.set(o,f,u.headers),this.succeeded=!0,this._successCallback()}catch(h){if(clearTimeout(this._networkTimeout),h instanceof Sn||this.cancelled||this._networkTimedOut)return;this._failureCallback({msg:"Failed to load call object bundle ".concat(o,": ").concat(h),type:h.message})}}),function(o){return n.apply(this,arguments)})},{key:"_getBundleCodeFromResponse",value:(e=D(function*(o,a){if(a.ok)return yield a.text();if(this._iosCache&&a.status===304)return(yield this._iosCache.renew(o,a.headers)).code;throw new Error("Received ".concat(a.status," response"))}),function(o,a){return e.apply(this,arguments)})}]),t}(),Fc=function(){function t(e,n,r){ge(this,t),this.cancelled=!1,this.succeeded=!1,this._dailyConfig=e,this._successCallback=n,this._failureCallback=r,this._attemptId=cn(),this._networkTimeout=null,this._scriptElement=null}return ye(t,[{key:"start",value:function(){window._dailyCallMachineLoadWaitlist||(window._dailyCallMachineLoadWaitlist=new Set);var e=Ht(this._dailyConfig);(typeof document>"u"?"undefined":Y(document))==="object"?this._startLoading(e):this._failureCallback({msg:"Call object bundle must be loaded in a DOM/web context",type:"missing context"})}},{key:"cancel",value:function(){this._stopLoading(),this.cancelled=!0}},{key:"_startLoading",value:function(e){var n=this;this._signUpForCallMachineLoadWaitlist(),this._networkTimeout=setTimeout(function(){n._stopLoading(),n._failureCallback({msg:"Timed out (>".concat(rn," ms) when loading call object bundle ").concat(e),type:"timeout"})},rn);var r=document.getElementsByTagName("head")[0],s=document.createElement("script");this._scriptElement=s,s.onload=function(){n._stopLoading(),n.succeeded=!0,n._successCallback()},s.onerror=function(o){n._stopLoading(),n._failureCallback({msg:"Failed to load call object bundle ".concat(o.target.src),type:o.message})},s.src=e,r.appendChild(s)}},{key:"_stopLoading",value:function(){this._withdrawFromCallMachineLoadWaitlist(),clearTimeout(this._networkTimeout),this._scriptElement&&(this._scriptElement.onload=null,this._scriptElement.onerror=null)}},{key:"_signUpForCallMachineLoadWaitlist",value:function(){window._dailyCallMachineLoadWaitlist.add(this._attemptId)}},{key:"_withdrawFromCallMachineLoadWaitlist",value:function(){window._dailyCallMachineLoadWaitlist.delete(this._attemptId)}}]),t}(),qt=function(t,e,n){return Bc(t.local,e,n)===!0},Uc=function(t,e,n){return t.local.streams&&t.local.streams[e]&&t.local.streams[e].stream&&t.local.streams[e].stream["get".concat(n==="video"?"Video":"Audio","Tracks")]()[0]},Qe=function(t,e,n,r){var s=qc(t,e,n,r);return s&&s.pendingTrack},Bc=function(t,e,n){if(!t)return!1;var r=function(o){switch(o){case"avatar":return!0;case"staged":return o;default:return!!o}},s=t.public.subscribedTracks;return s&&s[e]?["cam-audio","cam-video","screen-video","screen-audio","rmpAudio","rmpVideo"].indexOf(n)===-1&&s[e].custom?[!0,"staged"].includes(s[e].custom)?r(s[e].custom):r(s[e].custom[n]):r(s[e][n]):!s||r(s.ALL)},qc=function(t,e,n,r){var s=Object.values(t.streams||{}).filter(function(o){return o.participantId===e&&o.type===n&&o.pendingTrack&&o.pendingTrack.kind===r}).sort(function(o,a){return new Date(a.starttime)-new Date(o.starttime)});return s&&s[0]},Vc=function(t,e){var n=t.local.public.customTracks;if(n&&n[e])return n[e].track};function Mi(t,e){for(var n=e.getState(),r=0,s=["cam","screen"];r<s.length;r++)for(var o=s[r],a=0,c=["video","audio"];a<c.length;a++){var u=c[a],f=o==="cam"?u:"screen".concat(u.charAt(0).toUpperCase()+u.slice(1)),h=t.tracks[f];if(h){var p=t.local?Uc(n,o,u):Qe(n,t.session_id,o,u);h.state==="playable"&&(h.track=p),h.persistentTrack=p}}}function Oi(t,e){try{var n=e.getState();for(var r in t.tracks)if(!Yc(r)){var s=t.tracks[r].kind;if(s){var o=t.tracks[r];if(o){var a=t.local?Vc(n,r):Qe(n,t.session_id,r,s);o.state==="playable"&&(t.tracks[r].track=a),o.persistentTrack=a}}else console.error("unknown type for custom track")}}catch(c){console.error(c)}}function Yc(t){return["video","audio","screenVideo","screenAudio"].includes(t)}function Li(t,e,n){var r=n.getState();if(t.local){if(t.audio)try{t.audioTrack=r.local.streams.cam.stream.getAudioTracks()[0],t.audioTrack||(t.audio=!1)}catch{}if(t.video)try{t.videoTrack=r.local.streams.cam.stream.getVideoTracks()[0],t.videoTrack||(t.video=!1)}catch{}if(t.screen)try{t.screenVideoTrack=r.local.streams.screen.stream.getVideoTracks()[0],t.screenAudioTrack=r.local.streams.screen.stream.getAudioTracks()[0],t.screenVideoTrack||t.screenAudioTrack||(t.screen=!1)}catch{}}else{var s=!0;try{var o=r.participants[t.session_id];o&&o.public&&o.public.rtcType&&o.public.rtcType.impl==="peer-to-peer"&&o.private&&!["connected","completed"].includes(o.private.peeringState)&&(s=!1)}catch(h){console.error(h)}if(!s)return t.audio=!1,t.audioTrack=!1,t.video=!1,t.videoTrack=!1,t.screen=!1,void(t.screenTrack=!1);try{if(r.streams,t.audio&&qt(r,t.session_id,"cam-audio")){var a=Qe(r,t.session_id,"cam","audio");a&&(e&&e.audioTrack&&e.audioTrack.id===a.id?t.audioTrack=a:a.muted||(t.audioTrack=a)),t.audioTrack||(t.audio=!1)}if(t.video&&qt(r,t.session_id,"cam-video")){var c=Qe(r,t.session_id,"cam","video");c&&(e&&e.videoTrack&&e.videoTrack.id===c.id?t.videoTrack=c:c.muted||(t.videoTrack=c)),t.videoTrack||(t.video=!1)}if(t.screen&&qt(r,t.session_id,"screen-audio")){var u=Qe(r,t.session_id,"screen","audio");u&&(e&&e.screenAudioTrack&&e.screenAudioTrack.id===u.id?t.screenAudioTrack=u:u.muted||(t.screenAudioTrack=u))}if(t.screen&&qt(r,t.session_id,"screen-video")){var f=Qe(r,t.session_id,"screen","video");f&&(e&&e.screenVideoTrack&&e.screenVideoTrack.id===f.id?t.screenVideoTrack=f:f.muted||(t.screenVideoTrack=f))}t.screenVideoTrack||t.screenAudioTrack||(t.screen=!1)}catch(h){console.error("unexpected error matching up tracks",h)}}}function Gc(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(u,f){if(u){if(typeof u=="string")return Pi(u,f);var h=Object.prototype.toString.call(u).slice(8,-1);if(h==="Object"&&u.constructor&&(h=u.constructor.name),h==="Map"||h==="Set")return Array.from(u);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return Pi(u,f)}}(t))||e){n&&(t=n);var r=0,s=function(){};return{s,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(u){throw u},f:s}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o,a=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var u=n.next();return a=u.done,u},e:function(u){c=!0,o=u},f:function(){try{a||n.return==null||n.return()}finally{if(c)throw o}}}}function Pi(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var ve=new Map,rt=null;function $c(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(u,f){if(u){if(typeof u=="string")return Di(u,f);var h=Object.prototype.toString.call(u).slice(8,-1);if(h==="Object"&&u.constructor&&(h=u.constructor.name),h==="Map"||h==="Set")return Array.from(u);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return Di(u,f)}}(t))||e){n&&(t=n);var r=0,s=function(){};return{s,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(u){throw u},f:s}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o,a=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var u=n.next();return a=u.done,u},e:function(u){c=!0,o=u},f:function(){try{a||n.return==null||n.return()}finally{if(c)throw o}}}}function Di(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var _e=new Map,bt=null,Jc=3e3;function Wc(t){Ma()?function(e){ve.has(e)||(ve.set(e,{}),navigator.mediaDevices.enumerateDevices().then(function(n){ve.has(e)&&(ve.get(e).lastDevicesString=JSON.stringify(n),rt||(rt=function(){var r=D(function*(){var s,o=yield navigator.mediaDevices.enumerateDevices(),a=Gc(ve.keys());try{for(a.s();!(s=a.n()).done;){var c=s.value,u=JSON.stringify(o);u!==ve.get(c).lastDevicesString&&(ve.get(c).lastDevicesString=u,c(o))}}catch(f){a.e(f)}finally{a.f()}});return function(){return r.apply(this,arguments)}}(),navigator.mediaDevices.addEventListener("devicechange",rt)))}).catch(function(){}))}(t):function(e){_e.has(e)||(_e.set(e,{}),navigator.mediaDevices.enumerateDevices().then(function(n){_e.has(e)&&(_e.get(e).lastDevicesString=JSON.stringify(n),bt||(bt=setInterval(D(function*(){var r,s=yield navigator.mediaDevices.enumerateDevices(),o=$c(_e.keys());try{for(o.s();!(r=o.n()).done;){var a=r.value,c=JSON.stringify(s);c!==_e.get(a).lastDevicesString&&(_e.get(a).lastDevicesString=c,a(s))}}catch(u){o.e(u)}finally{o.f()}}),Jc)))}))}(t)}function zc(t){Ma()?function(e){ve.has(e)&&(ve.delete(e),ve.size===0&&rt&&(navigator.mediaDevices.removeEventListener("devicechange",rt),rt=null))}(t):function(e){_e.has(e)&&(_e.delete(e),_e.size===0&&bt&&(clearInterval(bt),bt=null))}(t)}function Ma(){return B()||navigator.mediaDevices.ondevicechange!==void 0}var Hc=new Set;function Qc(t,e){var n=e.isLocalScreenVideo;return t&&t.readyState==="live"&&!function(r,s){return(!s.isLocalScreenVideo||xe()!=="Chrome")&&r.muted&&!Hc.has(r.id)}(t,{isLocalScreenVideo:n})}var Kc=["result"],Xc=["preserveIframe"];function Ii(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function I(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Ii(Object(n),!0).forEach(function(r){Ce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ii(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Zc(t){var e=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=me(t);if(e){var s=me(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return on(this,n)}}function Ni(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(u,f){if(u){if(typeof u=="string")return Ri(u,f);var h=Object.prototype.toString.call(u).slice(8,-1);if(h==="Object"&&u.constructor&&(h=u.constructor.name),h==="Map"||h==="Set")return Array.from(u);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return Ri(u,f)}}(t))||e){n&&(t=n);var r=0,s=function(){};return{s,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(u){throw u},f:s}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o,a=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var u=n.next();return a=u.done,u},e:function(u){c=!0,o=u},f:function(){try{a||n.return==null||n.return()}finally{if(c)throw o}}}}function Ri(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Fe={},ji="video",eu="voice",xi=B()?{data:{}}:{data:{},topology:"none"},Fi={present:0,hidden:0},Oa={maxBitrate:{min:1e5,max:25e5},maxFramerate:{min:1,max:30},scaleResolutionDownBy:{min:1,max:8}},En=Object.keys(Oa),Ui=["state","volume","simulcastEncodings"],Bi={androidInCallNotification:{title:"string",subtitle:"string",iconName:"string",disableForCustomOverride:"boolean"},disableAutoDeviceManagement:{audio:"boolean",video:"boolean"}},sn={id:{iconPath:"string",iconPathDarkMode:"string",label:"string",tooltip:"string"}},Hn={id:{allow:"string",controlledBy:"'*' | 'owners' | string[]",csp:"string",iconURL:"string",label:"string",loading:"'eager' | 'lazy'",location:"'main' | 'sidebar'",name:"string",referrerPolicy:"string",sandbox:"string",src:"string",srcdoc:"string",shared:"string[] | 'owners' | boolean"}},Ue={customIntegrations:{validate:xa,help:Ra()},customTrayButtons:{validate:ja,help:"customTrayButtons should be a dictionary of the type ".concat(JSON.stringify(sn))},url:{validate:function(t){return typeof t=="string"},help:"url should be a string"},baseUrl:{validate:function(t){return typeof t=="string"},help:"baseUrl should be a string"},token:{validate:function(t){return typeof t=="string"},help:"token should be a string",queryString:"t"},dailyConfig:{validate:function(t,e){try{return e.validateDailyConfig(t),!0}catch(n){console.error("Failed to validate dailyConfig",n)}return!1},help:"Unsupported dailyConfig. Check error logs for detailed info."},reactNativeConfig:{validate:function(t){return Fa(t,Bi)},help:"reactNativeConfig should look like ".concat(JSON.stringify(Bi),", all fields optional")},lang:{validate:function(t){return["da","de","en-us","en","es","fi","fr","it","jp","ka","nl","no","pl","pt","pt-BR","ru","sv","tr","user"].includes(t)},help:"language not supported. Options are: da, de, en-us, en, es, fi, fr, it, jp, ka, nl, no, pl, pt, pt-BR, ru, sv, tr, user"},userName:!0,userData:{validate:function(t){try{return La(t),!0}catch(e){return console.error(e),!1}},help:"invalid userData type provided"},startVideoOff:!0,startAudioOff:!0,activeSpeakerMode:!0,showLeaveButton:!0,showLocalVideo:!0,showParticipantsBar:!0,showFullscreenButton:!0,showUserNameChangeUI:!0,iframeStyle:!0,customLayout:!0,cssFile:!0,cssText:!0,bodyClass:!0,videoSource:{validate:function(t,e){return t instanceof MediaStreamTrack&&(e._sharedTracks.videoDeviceId=t),e._preloadCache.videoDeviceId=t,!0}},audioSource:{validate:function(t,e){return t instanceof MediaStreamTrack&&(e._sharedTracks.audioDeviceId=t),e._preloadCache.audioDeviceId=t,!0}},subscribeToTracksAutomatically:{validate:function(t,e){return e._preloadCache.subscribeToTracksAutomatically=t,!0}},theme:{validate:function(t){var e=["accent","accentText","background","backgroundAccent","baseText","border","mainAreaBg","mainAreaBgAccent","mainAreaText","supportiveText"],n=function(r){for(var s=0,o=Object.keys(r);s<o.length;s++){var a=o[s];if(!e.includes(a))return console.error('unsupported color "'.concat(a,'". Valid colors: ').concat(e.join(", "))),!1;if(!r[a].match(/^#[0-9a-f]{6}|#[0-9a-f]{3}$/i))return console.error("".concat(a,' theme color should be provided in valid hex color format. Received: "').concat(r[a],'"')),!1}return!0};return Y(t)==="object"&&("light"in t&&"dark"in t||"colors"in t)?"light"in t&&"dark"in t?"colors"in t.light?"colors"in t.dark?n(t.light.colors)&&n(t.dark.colors):(console.error('Dark theme is missing "colors" property.',t),!1):(console.error('Light theme is missing "colors" property.',t),!1):n(t.colors):(console.error('Theme must contain either both "light" and "dark" properties, or "colors".',t),!1)},help:"unsupported theme configuration. Check error logs for detailed info."},layoutConfig:{validate:function(t){if("grid"in t){var e=t.grid;if("maxTilesPerPage"in e){if(!Number.isInteger(e.maxTilesPerPage))return console.error("grid.maxTilesPerPage should be an integer. You passed ".concat(e.maxTilesPerPage,".")),!1;if(e.maxTilesPerPage>49)return console.error("grid.maxTilesPerPage can't be larger than 49 without sacrificing browser performance. Please contact us at https://www.daily.co/contact to talk about your use case."),!1}if("minTilesPerPage"in e){if(!Number.isInteger(e.minTilesPerPage))return console.error("grid.minTilesPerPage should be an integer. You passed ".concat(e.minTilesPerPage,".")),!1;if(e.minTilesPerPage<1)return console.error("grid.minTilesPerPage can't be lower than 1."),!1;if("maxTilesPerPage"in e&&e.minTilesPerPage>e.maxTilesPerPage)return console.error("grid.minTilesPerPage can't be higher than grid.maxTilesPerPage."),!1}}return!0},help:"unsupported layoutConfig. Check error logs for detailed info."},receiveSettings:{validate:function(t){return Pa(t,{allowAllParticipantsKey:!1})},help:Na({allowAllParticipantsKey:!1})},sendSettings:{validate:function(t,e){return!!function(n,r){try{return r.validateUpdateSendSettings(n),!0}catch(s){return console.error("Failed to validate send settings",s),!1}}(t,e)&&(e._preloadCache.sendSettings=t,!0)},help:"Invalid sendSettings provided. Check error logs for detailed info."},inputSettings:{validate:function(t,e){var n;return!!Da(t)&&(e._preloadCache.inputSettings||(e._preloadCache.inputSettings={}),Ia(t,(n=e.properties)===null||n===void 0?void 0:n.dailyConfig),t.audio&&(e._preloadCache.inputSettings.audio=t.audio),t.video&&(e._preloadCache.inputSettings.video=t.video),!0)},help:Qn()},layout:{validate:function(t){return t==="custom-v1"||t==="browser"||t==="none"},help:'layout may only be set to "custom-v1"',queryString:"layout"},emb:{queryString:"emb"},embHref:{queryString:"embHref"},dailyJsVersion:{queryString:"dailyJsVersion"},proxy:{queryString:"proxy"},strictMode:!0,allowMultipleCallInstances:!0},Vt={styles:{validate:function(t){for(var e in t)if(e!=="cam"&&e!=="screen")return!1;if(t.cam){for(var n in t.cam)if(n!=="div"&&n!=="video")return!1}if(t.screen){for(var r in t.screen)if(r!=="div"&&r!=="video")return!1}return!0},help:"styles format should be a subset of: { cam: {div: {}, video: {}}, screen: {div: {}, video: {}} }"},setSubscribedTracks:{validate:function(t,e){if(e._preloadCache.subscribeToTracksAutomatically)return!1;var n=[!0,!1,"staged"];if(n.includes(t)||!B()&&t==="avatar")return!0;var r=["audio","video","screenAudio","screenVideo","rmpAudio","rmpVideo"];return function s(o){var a=arguments.length>1&&arguments[1]!==void 0&&arguments[1];for(var c in o)if(c==="custom"){if(!n.includes(o[c])&&!s(o[c],!0))return!1}else{var u=!a&&!r.includes(c),f=!n.includes(o[c]);if(u||f)return!1}return!0}(t)},help:"setSubscribedTracks cannot be used when setSubscribeToTracksAutomatically is enabled, and should be of the form: "+"true".concat(B()?"":" | 'avatar'"," | false | 'staged' | { [audio: true|false|'staged'], [video: true|false|'staged'], [screenAudio: true|false|'staged'], [screenVideo: true|false|'staged'] }")},setAudio:!0,setVideo:!0,setScreenShare:{validate:function(t){return t===!1},help:"setScreenShare must be false, as it's only meant for stopping remote participants' screen shares"},eject:!0,updatePermissions:{validate:function(t){for(var e=0,n=Object.entries(t);e<n.length;e++){var r=Ge(n[e],2),s=r[0],o=r[1];switch(s){case"hasPresence":if(typeof o!="boolean")return!1;break;case"canSend":if(o instanceof Set||o instanceof Array||Array.isArray(o)){var a,c=["video","audio","screenVideo","screenAudio","customVideo","customAudio"],u=Ni(o);try{for(u.s();!(a=u.n()).done;){var f=a.value;if(!c.includes(f))return!1}}catch(w){u.e(w)}finally{u.f()}}else if(typeof o!="boolean")return!1;(o instanceof Array||Array.isArray(o))&&(t.canSend=new Set(o));break;case"canAdmin":if(o instanceof Set||o instanceof Array||Array.isArray(o)){var h,p=["participants","streaming","transcription"],y=Ni(o);try{for(y.s();!(h=y.n()).done;){var _=h.value;if(!p.includes(_))return!1}}catch(w){y.e(w)}finally{y.f()}}else if(typeof o!="boolean")return!1;(o instanceof Array||Array.isArray(o))&&(t.canAdmin=new Set(o));break;default:return!1}}return!0},help:"updatePermissions can take hasPresence, canSend, and canAdmin permissions. hasPresence must be a boolean. canSend can be a boolean or an Array or Set of media types (video, audio, screenVideo, screenAudio, customVideo, customAudio). canAdmin can be a boolean or an Array or Set of admin types (participants, streaming, transcription)."}};Promise.any||(Promise.any=function(){var t=D(function*(e){return new Promise(function(n,r){var s=[];e.forEach(function(o){return Promise.resolve(o).then(function(a){n(a)}).catch(function(a){s.push(a),s.length===e.length&&r(s)})})})});return function(e){return t.apply(this,arguments)}}());var tu=function(t){an(ce,Ae);var e,n,r,s,o,a,c,u,f,h,p,y,_,w,k,M,P,x,W,E,v,T,C,L,q,R,re,Me,ct,Ot,ur,lr,dr,hr,fr,pr,mr,gr,Ua=Zc(ce);function ce(i){var d,l,g,m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(ge(this,ce),Ce(we(l=Ua.call(this)),"startListeningForDeviceChanges",function(){Wc(l.handleDeviceChange)}),Ce(we(l),"stopListeningForDeviceChanges",function(){zc(l.handleDeviceChange)}),Ce(we(l),"handleDeviceChange",function(A){A=A.map(function(O){return JSON.parse(JSON.stringify(O))}),l.emitDailyJSEvent({action:"available-devices-updated",availableDevices:A})}),Ce(we(l),"handleNativeAppStateChange",function(){var A=D(function*(O){if(O==="destroyed")return console.warn("App has been destroyed before leaving the meeting. Cleaning up all the resources!"),void(yield l.destroy());var U=O==="active";l.disableReactNativeAutoDeviceManagement("video")||(U?l.camUnmutedBeforeLosingNativeActiveState&&l.setLocalVideo(!0):(l.camUnmutedBeforeLosingNativeActiveState=l.localVideo(),l.camUnmutedBeforeLosingNativeActiveState&&l.setLocalVideo(!1)))});return function(O){return A.apply(this,arguments)}}()),Ce(we(l),"handleNativeAudioFocusChange",function(A){l.disableReactNativeAutoDeviceManagement("audio")||(l._hasNativeAudioFocus=A,l.toggleParticipantAudioBasedOnNativeAudioFocus(),l._hasNativeAudioFocus?l.micUnmutedBeforeLosingNativeAudioFocus&&l.setLocalAudio(!0):(l.micUnmutedBeforeLosingNativeAudioFocus=l.localAudio(),l.setLocalAudio(!1)))}),Ce(we(l),"handleNativeSystemScreenCaptureStop",function(){l.stopScreenShare()}),l.strictMode=m.strictMode===void 0||m.strictMode,l.allowMultipleCallInstances=(d=m.allowMultipleCallInstances)!==null&&d!==void 0&&d,Object.keys(Fe).length&&(l._logDuplicateInstanceAttempt(),!l.allowMultipleCallInstances)){if(l.strictMode)throw new Error("Duplicate DailyIframe instances are not allowed");console.warn("Using strictMode: false to allow multiple call instances is now deprecated. Set `allowMultipleCallInstances: true`")}if(window._daily||(window._daily={pendings:[],instances:{}}),l.callClientId=cn(),g=we(l),Fe[g.callClientId]=g,window._daily.instances[l.callClientId]={},l._sharedTracks={},window._daily.instances[l.callClientId].tracks=l._sharedTracks,m.dailyJsVersion=ce.version(),l._iframe=i,l._callObjectMode=m.layout==="none"&&!l._iframe,l._preloadCache={subscribeToTracksAutomatically:!0,audioDeviceId:null,videoDeviceId:null,outputDeviceId:null,inputSettings:null,sendSettings:null,videoTrackForNetworkConnectivityTest:null,videoTrackForConnectionQualityTest:null},m.showLocalVideo!==void 0?l._callObjectMode?console.error("showLocalVideo is not available in call object mode"):l._showLocalVideo=!!m.showLocalVideo:l._showLocalVideo=!0,m.showParticipantsBar!==void 0?l._callObjectMode?console.error("showParticipantsBar is not available in call object mode"):l._showParticipantsBar=!!m.showParticipantsBar:l._showParticipantsBar=!0,m.customIntegrations!==void 0?l._callObjectMode?console.error("customIntegrations is not available in call object mode"):l._customIntegrations=m.customIntegrations:l._customIntegrations={},m.customTrayButtons!==void 0?l._callObjectMode?console.error("customTrayButtons is not available in call object mode"):l._customTrayButtons=m.customTrayButtons:l._customTrayButtons={},m.activeSpeakerMode!==void 0?l._callObjectMode?console.error("activeSpeakerMode is not available in call object mode"):l._activeSpeakerMode=!!m.activeSpeakerMode:l._activeSpeakerMode=!1,m.receiveSettings?l._callObjectMode?l._receiveSettings=m.receiveSettings:console.error("receiveSettings is only available in call object mode"):l._receiveSettings={},l.validateProperties(m),l.properties=I({},m),l._preloadCache.inputSettings||(l._preloadCache.inputSettings={}),m.inputSettings&&m.inputSettings.audio&&(l._preloadCache.inputSettings.audio=m.inputSettings.audio),m.inputSettings&&m.inputSettings.video&&(l._preloadCache.inputSettings.video=m.inputSettings.video),l._callObjectLoader=l._callObjectMode?new Rc(l.callClientId):null,l._callState=Fn,l._isPreparingToJoin=!1,l._accessState={access:Jt},l._meetingSessionSummary={},l._finalSummaryOfPrevSession={},l._meetingSessionState=Tn(xi,l._callObjectMode),l._nativeInCallAudioMode=ji,l._participants={},l._isScreenSharing=!1,l._participantCounts=Fi,l._rmpPlayerState={},l._waitingParticipants={},l._network={threshold:"good",quality:100},l._activeSpeaker={},l._localAudioLevel=0,l._isLocalAudioLevelObserverRunning=!1,l._remoteParticipantsAudioLevel={},l._isRemoteParticipantsAudioLevelObserverRunning=!1,l._maxAppMessageSize=yn,l._messageChannel=B()?new Dc:new Lc,l._iframe&&(l._iframe.requestFullscreen?l._iframe.addEventListener("fullscreenchange",function(){document.fullscreenElement===l._iframe?(l.emitDailyJSEvent({action:gt}),l.sendMessageToCallMachine({action:gt})):(l.emitDailyJSEvent({action:yt}),l.sendMessageToCallMachine({action:yt}))}):l._iframe.webkitRequestFullscreen&&l._iframe.addEventListener("webkitfullscreenchange",function(){document.webkitFullscreenElement===l._iframe?(l.emitDailyJSEvent({action:gt}),l.sendMessageToCallMachine({action:gt})):(l.emitDailyJSEvent({action:yt}),l.sendMessageToCallMachine({action:yt}))})),B()){var b=l.nativeUtils();b.addAudioFocusChangeListener&&b.removeAudioFocusChangeListener&&b.addAppStateChangeListener&&b.removeAppStateChangeListener&&b.addSystemScreenCaptureStopListener&&b.removeSystemScreenCaptureStopListener||console.warn("expected (add|remove)(AudioFocusChange|AppActiveStateChange|SystemScreenCaptureStop)Listener to be available in React Native"),l._hasNativeAudioFocus=!0,b.addAudioFocusChangeListener(l.handleNativeAudioFocusChange),b.addAppStateChangeListener(l.handleNativeAppStateChange),b.addSystemScreenCaptureStopListener(l.handleNativeSystemScreenCaptureStop)}return l._callObjectMode&&l.startListeningForDeviceChanges(),l._messageChannel.addListenerForMessagesFromCallMachine(l.handleMessageFromCallMachine,l.callClientId,we(l)),l}return ye(ce,[{key:"destroy",value:(gr=D(function*(){var i,d;try{yield this.leave()}catch{}var l=this._iframe;if(l){var g=l.parentElement;g&&g.removeChild(l)}if(this._messageChannel.removeListener(this.handleMessageFromCallMachine),B()){var m=this.nativeUtils();m.removeAudioFocusChangeListener(this.handleNativeAudioFocusChange),m.removeAppStateChangeListener(this.handleNativeAppStateChange),m.removeSystemScreenCaptureStopListener(this.handleNativeSystemScreenCaptureStop)}this._callObjectMode&&this.stopListeningForDeviceChanges(),this.resetMeetingDependentVars(),this._destroyed=!0,this.emitDailyJSEvent({action:"call-instance-destroyed"}),delete Fe[this.callClientId],!((i=window)===null||i===void 0||(d=i._daily)===null||d===void 0)&&d.instances&&delete window._daily.instances[this.callClientId],this.strictMode&&(this.callClientId=void 0)}),function(){return gr.apply(this,arguments)})},{key:"isDestroyed",value:function(){return!!this._destroyed}},{key:"loadCss",value:function(i){var d=i.bodyClass,l=i.cssFile,g=i.cssText;return F(),this.sendMessageToCallMachine({action:"load-css",cssFile:this.absoluteUrl(l),bodyClass:d,cssText:g}),this}},{key:"iframe",value:function(){return F(),this._iframe}},{key:"meetingState",value:function(){return this._callState}},{key:"accessState",value:function(){return he(this._callObjectMode,"accessState()"),this._accessState}},{key:"participants",value:function(){return this._participants}},{key:"participantCounts",value:function(){return this._participantCounts}},{key:"waitingParticipants",value:function(){return he(this._callObjectMode,"waitingParticipants()"),this._waitingParticipants}},{key:"validateParticipantProperties",value:function(i,d){for(var l in d){if(!Vt[l])throw new Error("unrecognized updateParticipant property ".concat(l));if(Vt[l].validate&&!Vt[l].validate(d[l],this,this._participants[i]))throw new Error(Vt[l].help)}}},{key:"updateParticipant",value:function(i,d){return this._participants.local&&this._participants.local.session_id===i&&(i="local"),i&&d&&(this.validateParticipantProperties(i,d),this.sendMessageToCallMachine({action:"update-participant",id:i,properties:d})),this}},{key:"updateParticipants",value:function(i){var d=this._participants.local&&this._participants.local.session_id;for(var l in i)l===d&&(l="local"),l&&i[l]&&this.validateParticipantProperties(l,i[l]);return this.sendMessageToCallMachine({action:"update-participants",participants:i}),this}},{key:"updateWaitingParticipant",value:(mr=D(function*(){var i=this,d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(he(this._callObjectMode,"updateWaitingParticipant()"),$(this._callState,"updateWaitingParticipant()"),typeof d!="string"||Y(l)!=="object")throw new Error("updateWaitingParticipant() must take an id string and a updates object");return new Promise(function(g,m){i.sendMessageToCallMachine({action:"daily-method-update-waiting-participant",id:d,updates:l},function(b){b.error&&m(b.error),b.id||m(new Error("unknown error in updateWaitingParticipant()")),g({id:b.id})})})}),function(){return mr.apply(this,arguments)})},{key:"updateWaitingParticipants",value:(pr=D(function*(){var i=this,d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(he(this._callObjectMode,"updateWaitingParticipants()"),$(this._callState,"updateWaitingParticipants()"),Y(d)!=="object")throw new Error("updateWaitingParticipants() must take a mapping between ids and update objects");return new Promise(function(l,g){i.sendMessageToCallMachine({action:"daily-method-update-waiting-participants",updatesById:d},function(m){m.error&&g(m.error),m.ids||g(new Error("unknown error in updateWaitingParticipants()")),l({ids:m.ids})})})}),function(){return pr.apply(this,arguments)})},{key:"requestAccess",value:(fr=D(function*(){var i=this,d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},l=d.access,g=l===void 0?{level:Ss}:l,m=d.name,b=m===void 0?"":m;return he(this._callObjectMode,"requestAccess()"),$(this._callState,"requestAccess()"),new Promise(function(A,O){i.sendMessageToCallMachine({action:"daily-method-request-access",access:g,name:b},function(U){U.error&&O(U.error),U.access||O(new Error("unknown error in requestAccess()")),A({access:U.access,granted:U.granted})})})}),function(){return fr.apply(this,arguments)})},{key:"localAudio",value:function(){return this._participants.local?!["blocked","off"].includes(this._participants.local.tracks.audio.state):null}},{key:"localVideo",value:function(){return this._participants.local?!["blocked","off"].includes(this._participants.local.tracks.video.state):null}},{key:"setLocalAudio",value:function(i){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return"forceDiscardTrack"in d&&(B()?(console.warn("forceDiscardTrack option not supported in React Native; ignoring"),d={}):i&&(console.warn("forceDiscardTrack option only supported when calling setLocalAudio(false); ignoring"),d={})),this.sendMessageToCallMachine({action:"local-audio",state:i,options:d}),this}},{key:"localScreenAudio",value:function(){return this._participants.local?!["blocked","off"].includes(this._participants.local.tracks.screenAudio.state):null}},{key:"localScreenVideo",value:function(){return this._participants.local?!["blocked","off"].includes(this._participants.local.tracks.screenVideo.state):null}},{key:"updateScreenShare",value:function(i){if(this._isScreenSharing)return this.sendMessageToCallMachine({action:"local-screen-update",options:i}),this;console.warn("There is no screen share in progress. Try calling startScreenShare first.")}},{key:"setLocalVideo",value:function(i){return this.sendMessageToCallMachine({action:"local-video",state:i}),this}},{key:"getReceiveSettings",value:(hr=D(function*(i){var d=this,l=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}).showInheritedValues,g=l!==void 0&&l;if(he(this._callObjectMode,"getReceiveSettings()"),!this._callMachineInitialized)return this._receiveSettings;switch(Y(i)){case"string":return new Promise(function(m){d.sendMessageToCallMachine({action:"get-single-participant-receive-settings",id:i,showInheritedValues:g},function(b){m(b.receiveSettings)})});case"undefined":return this._receiveSettings;default:throw new Error('first argument to getReceiveSettings() must be a participant id (or "base"), or there should be no arguments')}}),function(i){return hr.apply(this,arguments)})},{key:"updateReceiveSettings",value:(dr=D(function*(i){var d=this;if(he(this._callObjectMode,"updateReceiveSettings()"),!Pa(i,{allowAllParticipantsKey:!0}))throw new Error(Na({allowAllParticipantsKey:!0}));return $(this._callState,"updateReceiveSettings()","To specify receive settings earlier, use the receiveSettings config property."),new Promise(function(l){d.sendMessageToCallMachine({action:"update-receive-settings",receiveSettings:i},function(g){l({receiveSettings:g.receiveSettings})})})}),function(i){return dr.apply(this,arguments)})},{key:"_prepInputSettingsToPresentToUser",value:function(i){var d,l,g,m,b,A,O,U;if(i){var Z={},H=((d=i.audio)===null||d===void 0||(l=d.processor)===null||l===void 0?void 0:l.type)==="none"&&((g=i.audio)===null||g===void 0||(m=g.processor)===null||m===void 0?void 0:m._isDefaultWhenNone);if(i.audio&&!H){var be=I({},i.audio.processor);delete be._isDefaultWhenNone,Z.audio=I(I({},i.audio),{},{processor:be})}var Oe=((b=i.video)===null||b===void 0||(A=b.processor)===null||A===void 0?void 0:A.type)==="none"&&((O=i.video)===null||O===void 0||(U=O.processor)===null||U===void 0?void 0:U._isDefaultWhenNone);if(i.video&&!Oe){var Se=I({},i.video.processor);delete Se._isDefaultWhenNone,Z.video=I(I({},i.video),{},{processor:Se})}return Z}}},{key:"getInputSettings",value:function(){var i=this;return F(),new Promise(function(d){d(i._getInputSettings())})}},{key:"_getInputSettings",value:function(){var i,d,l,g,m,b,A,O,U={processor:{type:"none",_isDefaultWhenNone:!0}};this._inputSettings?(i=((l=this._inputSettings)===null||l===void 0?void 0:l.video)||U,d=((g=this._inputSettings)===null||g===void 0?void 0:g.audio)||U):(i=((m=this._preloadCache)===null||m===void 0||(b=m.inputSettings)===null||b===void 0?void 0:b.video)||U,d=((A=this._preloadCache)===null||A===void 0||(O=A.inputSettings)===null||O===void 0?void 0:O.audio)||U);var Z={audio:d,video:i};return this._prepInputSettingsToPresentToUser(Z)}},{key:"updateInputSettings",value:(lr=D(function*(i){var d=this;return F(),Da(i)?(i&&(this._preloadCache.inputSettings||(this._preloadCache.inputSettings={}),Ia(i,this.properties.dailyConfig),i.audio&&(this._preloadCache.inputSettings.audio=i.audio),i.video&&(this._preloadCache.inputSettings.video=i.video)),i.video||i.audio?this._callObjectMode&&!this._callMachineInitialized?this._getInputSettings():new Promise(function(l,g){d.sendMessageToCallMachine({action:"update-input-settings",inputSettings:i},function(m){m.error?g(m.error):l({inputSettings:d._prepInputSettingsToPresentToUser(m.inputSettings)})})}):this._getInputSettings()):(console.error(Qn()),Promise.reject(Qn()))}),function(i){return lr.apply(this,arguments)})},{key:"setBandwidth",value:function(i){var d=i.kbs,l=i.trackConstraints;if(F(),this._callMachineInitialized)return this.sendMessageToCallMachine({action:"set-bandwidth",kbs:d,trackConstraints:l}),this}},{key:"getDailyLang",value:function(){var i=this;if(F(),this._callMachineInitialized)return new Promise(function(d){i.sendMessageToCallMachine({action:"get-daily-lang"},function(l){delete l.action,delete l.callbackStamp,d(l)})})}},{key:"setDailyLang",value:function(i){return F(),this.sendMessageToCallMachine({action:"set-daily-lang",lang:i}),this}},{key:"setProxyUrl",value:function(i){return this.sendMessageToCallMachine({action:"set-proxy-url",proxyUrl:i}),this}},{key:"setIceConfig",value:function(i){return this.sendMessageToCallMachine({action:"set-ice-config",iceConfig:i}),this}},{key:"meetingSessionSummary",value:function(){return[Pe,ke].includes(this._callState)?this._finalSummaryOfPrevSession:this._meetingSessionSummary}},{key:"getMeetingSession",value:(ur=D(function*(){var i=this;return console.warn("getMeetingSession() is deprecated: use meetingSessionSummary(), which will return immediately"),$(this._callState,"getMeetingSession()"),new Promise(function(d){i.sendMessageToCallMachine({action:"get-meeting-session"},function(l){delete l.action,delete l.callbackStamp,d(l)})})}),function(){return ur.apply(this,arguments)})},{key:"meetingSessionState",value:function(){return $(this._callState,"meetingSessionState"),this._meetingSessionState}},{key:"setMeetingSessionData",value:function(i){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"replace";he(this._callObjectMode,"setMeetingSessionData()"),$(this._callState,"setMeetingSessionData");try{(function(l,g){new Ic({data:l,mergeStrategy:g})})(i,d)}catch(l){throw console.error(l),l}try{this.sendMessageToCallMachine({action:"set-session-data",data:i,mergeStrategy:d})}catch(l){throw new Error("Error setting meeting session data: ".concat(l))}}},{key:"setUserName",value:function(i,d){var l=this;return this.properties.userName=i,new Promise(function(g){l.sendMessageToCallMachine({action:"set-user-name",name:i??"",thisMeetingOnly:B()||!!d&&!!d.thisMeetingOnly},function(m){delete m.action,delete m.callbackStamp,g(m)})})}},{key:"setUserData",value:(Ot=D(function*(i){var d=this;try{La(i)}catch(l){throw console.error(l),l}if(this.properties.userData=i,this._callMachineInitialized)return new Promise(function(l){try{d.sendMessageToCallMachine({action:"set-user-data",userData:i},function(g){delete g.action,delete g.callbackStamp,l(g)})}catch(g){throw new Error("Error setting user data: ".concat(g))}})}),function(i){return Ot.apply(this,arguments)})},{key:"validateAudioLevelInterval",value:function(i){if(i&&(i<100||typeof i!="number"))throw new Error("The interval must be a number greater than or equal to 100 milliseconds.")}},{key:"startLocalAudioLevelObserver",value:function(i){var d=this;if(typeof AudioWorkletNode>"u"&&!B())throw new Error("startLocalAudioLevelObserver() is not supported on this browser");if(this.validateAudioLevelInterval(i),this._callMachineInitialized)return this._isLocalAudioLevelObserverRunning=!0,new Promise(function(l,g){d.sendMessageToCallMachine({action:"start-local-audio-level-observer",interval:i},function(m){d._isLocalAudioLevelObserverRunning=!m.error,m.error?g({error:m.error}):l()})});this._preloadCache.localAudioLevelObserver={enabled:!0,interval:i}}},{key:"isLocalAudioLevelObserverRunning",value:function(){return this._isLocalAudioLevelObserverRunning}},{key:"stopLocalAudioLevelObserver",value:function(){this._preloadCache.localAudioLevelObserver=null,this._localAudioLevel=0,this._isLocalAudioLevelObserverRunning=!1,this.sendMessageToCallMachine({action:"stop-local-audio-level-observer"})}},{key:"startRemoteParticipantsAudioLevelObserver",value:function(i){var d=this;if(this.validateAudioLevelInterval(i),this._callMachineInitialized)return this._isRemoteParticipantsAudioLevelObserverRunning=!0,new Promise(function(l,g){d.sendMessageToCallMachine({action:"start-remote-participants-audio-level-observer",interval:i},function(m){d._isRemoteParticipantsAudioLevelObserverRunning=!m.error,m.error?g({error:m.error}):l()})});this._preloadCache.remoteParticipantsAudioLevelObserver={enabled:!0,interval:i}}},{key:"isRemoteParticipantsAudioLevelObserverRunning",value:function(){return this._isRemoteParticipantsAudioLevelObserverRunning}},{key:"stopRemoteParticipantsAudioLevelObserver",value:function(){this._preloadCache.remoteParticipantsAudioLevelObserver=null,this._remoteParticipantsAudioLevel={},this._isRemoteParticipantsAudioLevelObserverRunning=!1,this.sendMessageToCallMachine({action:"stop-remote-participants-audio-level-observer"})}},{key:"startCamera",value:(ct=D(function*(){var i=this,d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(he(this._callObjectMode,"startCamera()"),wn(this._callState,this._isPreparingToJoin,"startCamera()","Did you mean to use setLocalAudio() and/or setLocalVideo() instead?"),this.needsLoad())try{yield this.load(d)}catch(l){return Promise.reject(l)}else{if(this._didPreAuth){if(d.url&&d.url!==this.properties.url)return console.error("url in startCamera() is different than the one used in preAuth()"),Promise.reject();if(d.token&&d.token!==this.properties.token)return console.error("token in startCamera() is different than the one used in preAuth()"),Promise.reject()}this.validateProperties(d),this.properties=I(I({},this.properties),d)}return new Promise(function(l){i.sendMessageToCallMachine({action:"start-camera",properties:He(i.properties,i.callClientId),preloadCache:He(i._preloadCache,i.callClientId)},function(g){delete g.action,delete g.callbackStamp,l(g)})})}),function(){return ct.apply(this,arguments)})},{key:"validateCustomTrack",value:function(i,d,l){if(l&&l.length>50)throw new Error("Custom track `trackName` must not be more than 50 characters");if(d&&d!=="music"&&d!=="speech"&&!(d instanceof Object))throw new Error("Custom track `mode` must be either `music` | `speech` | `DailyMicAudioModeSettings` or `undefined`");if(l&&["cam-audio","cam-video","screen-video","screen-audio","rmpAudio","rmpVideo","customVideoDefaults"].includes(l))throw new Error("Custom track `trackName` must not match a track name already used by daily: cam-audio, cam-video, customVideoDefaults, screen-video, screen-audio, rmpAudio, rmpVideo");if(!(i instanceof MediaStreamTrack))throw new Error("Custom tracks provided must be instances of MediaStreamTrack")}},{key:"startCustomTrack",value:function(){var i=this,d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{track,mode,trackName};return F(),$(this._callState,"startCustomTrack()"),this.validateCustomTrack(d.track,d.mode,d.trackName),new Promise(function(l,g){i._sharedTracks.customTrack=d.track,d.track=vt,i.sendMessageToCallMachine({action:"start-custom-track",properties:d},function(m){m.error?g({error:m.error}):l(m.mediaTag)})})}},{key:"stopCustomTrack",value:function(i){var d=this;return F(),$(this._callState,"stopCustomTrack()"),new Promise(function(l){d.sendMessageToCallMachine({action:"stop-custom-track",mediaTag:i},function(g){l(g.mediaTag)})})}},{key:"setCamera",value:function(i){var d=this;return ft(),Yt(this._callMachineInitialized,"setCamera()"),new Promise(function(l){d.sendMessageToCallMachine({action:"set-camera",cameraDeviceId:i},function(g){l({device:g.device})})})}},{key:"setAudioDevice",value:(Me=D(function*(i){return ft(),this.nativeUtils().setAudioDevice(i),{deviceId:yield this.nativeUtils().getAudioDevice()}}),function(i){return Me.apply(this,arguments)})},{key:"cycleCamera",value:function(){var i=this,d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new Promise(function(l){i.sendMessageToCallMachine({action:"cycle-camera",properties:d},function(g){l({device:g.device})})})}},{key:"cycleMic",value:function(){var i=this;return F(),new Promise(function(d){i.sendMessageToCallMachine({action:"cycle-mic"},function(l){d({device:l.device})})})}},{key:"getCameraFacingMode",value:function(){var i=this;return ft(),new Promise(function(d){i.sendMessageToCallMachine({action:"get-camera-facing-mode"},function(l){d(l.facingMode)})})}},{key:"setInputDevicesAsync",value:(re=D(function*(i){var d=this,l=i.audioDeviceId,g=i.videoDeviceId,m=i.audioSource,b=i.videoSource;return F(),m!==void 0&&(l=m),b!==void 0&&(g=b),l&&(this._preloadCache.audioDeviceId=l,this._sharedTracks.audioDeviceId=l),g&&(this._preloadCache.videoDeviceId=g,this._sharedTracks.videoDeviceId=g),this._callObjectMode&&this.needsLoad()?{camera:{deviceId:this._preloadCache.videoDeviceId},mic:{deviceId:this._preloadCache.audioDeviceId},speaker:{deviceId:this._preloadCache.outputDeviceId}}:(l instanceof MediaStreamTrack&&(l=vt),g instanceof MediaStreamTrack&&(g=vt),new Promise(function(A){d.sendMessageToCallMachine({action:"set-input-devices",audioDeviceId:l,videoDeviceId:g},function(O){delete O.action,delete O.callbackStamp,O.returnPreloadCache?A({camera:{deviceId:d._preloadCache.videoDeviceId},mic:{deviceId:d._preloadCache.audioDeviceId},speaker:{deviceId:d._preloadCache.outputDeviceId}}):A(O)})}))}),function(i){return re.apply(this,arguments)})},{key:"setOutputDeviceAsync",value:(R=D(function*(i){var d=this,l=i.outputDeviceId;return F(),l&&(this._preloadCache.outputDeviceId=l),this._callObjectMode&&this.needsLoad()?{camera:{deviceId:this._preloadCache.videoDeviceId},mic:{deviceId:this._preloadCache.audioDeviceId},speaker:{deviceId:this._preloadCache.outputDeviceId}}:new Promise(function(g){d.sendMessageToCallMachine({action:"set-output-device",outputDeviceId:l},function(m){delete m.action,delete m.callbackStamp,m.returnPreloadCache?g({camera:{deviceId:d._preloadCache.videoDeviceId},mic:{deviceId:d._preloadCache.audioDeviceId},speaker:{deviceId:d._preloadCache.outputDeviceId}}):g(m)})})}),function(i){return R.apply(this,arguments)})},{key:"getInputDevices",value:(q=D(function*(){var i=this;return this._callObjectMode&&this.needsLoad()?{camera:{deviceId:this._preloadCache.videoDeviceId},mic:{deviceId:this._preloadCache.audioDeviceId},speaker:{deviceId:this._preloadCache.outputDeviceId}}:new Promise(function(d){i.sendMessageToCallMachine({action:"get-input-devices"},function(l){delete l.action,delete l.callbackStamp,l.returnPreloadCache?d({camera:{deviceId:i._preloadCache.videoDeviceId},mic:{deviceId:i._preloadCache.audioDeviceId},speaker:{deviceId:i._preloadCache.outputDeviceId}}):d(l)})})}),function(){return q.apply(this,arguments)})},{key:"nativeInCallAudioMode",value:function(){return ft(),this._nativeInCallAudioMode}},{key:"setNativeInCallAudioMode",value:function(i){if(ft(),[ji,eu].includes(i)){if(i!==this._nativeInCallAudioMode)return this._nativeInCallAudioMode=i,!this.disableReactNativeAutoDeviceManagement("audio")&&zt(this._callState,this._isPreparingToJoin)&&this.nativeUtils().setAudioMode(this._nativeInCallAudioMode),this}else console.error("invalid in-call audio mode specified: ",i)}},{key:"preAuth",value:(L=D(function*(){var i=this,d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(he(this._callObjectMode,"preAuth()"),wn(this._callState,this._isPreparingToJoin,"preAuth()"),this.needsLoad()&&(yield this.load(d)),!d.url)throw new Error("preAuth() requires at least a url to be provided");return this.validateProperties(d),this.properties=I(I({},this.properties),d),new Promise(function(l,g){i.sendMessageToCallMachine({action:"daily-method-preauth",properties:He(i.properties,i.callClientId),preloadCache:He(i._preloadCache,i.callClientId)},function(m){return m.error?g(m.error):m.access?(i._didPreAuth=!0,void l({access:m.access})):g(new Error("unknown error in preAuth()"))})})}),function(){return L.apply(this,arguments)})},{key:"load",value:(C=D(function*(i){var d=this;if(this.needsLoad()){if(this._destroyed&&(this._logUseAfterDestroy(),this.strictMode))throw new Error("Use after destroy");if(i&&(this.validateProperties(i),this.properties=I(I({},this.properties),i)),!this._callObjectMode&&!this.properties.url)throw new Error("can't load iframe meeting because url property isn't set");return this._updateCallState(fi),this.emitDailyJSEvent({action:As}),this._callObjectMode?new Promise(function(l,g){d._callObjectLoader.cancel();var m=Date.now();d._callObjectLoader.load(d.properties.dailyConfig,function(b){d._bundleLoadTime=b?"no-op":Date.now()-m,d._updateCallState(pi),b&&d.emitDailyJSEvent({action:Un}),l()},function(b,A){if(d.emitDailyJSEvent({action:Ms}),!A){d._updateCallState(ke),d.resetMeetingDependentVars();var O={action:Yn,errorMsg:b.msg,error:{type:"connection-error",msg:"Failed to load call object bundle.",details:{on:"load",sourceError:b,bundleUrl:Ht(d.properties.dailyConfig)}}};d._maybeSendToSentry(O),d.emitDailyJSEvent(O),g(b.msg)}})}):(this._iframe.src=Zi(this.assembleMeetingUrl(),this.properties.dailyConfig),new Promise(function(l,g){d._loadedCallback=function(m){d._callState!==ke?(d._updateCallState(pi),(d.properties.cssFile||d.properties.cssText)&&d.loadCss(d.properties),l()):g(m)}}))}}),function(i){return C.apply(this,arguments)})},{key:"join",value:(T=D(function*(){var i=this,d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._testCallInProgress&&this.stopTestCallQuality();var l=!1;if(this.needsLoad()){this.updateIsPreparingToJoin(!0);try{yield this.load(d)}catch(g){return this.updateIsPreparingToJoin(!1),Promise.reject(g)}}else{if(l=!(!this.properties.cssFile&&!this.properties.cssText),this._didPreAuth){if(d.url&&d.url!==this.properties.url)return console.error("url in join() is different than the one used in preAuth()"),this.updateIsPreparingToJoin(!1),Promise.reject();if(d.token&&d.token!==this.properties.token)return console.error("token in join() is different than the one used in preAuth()"),this.updateIsPreparingToJoin(!1),Promise.reject()}if(d.url&&!this._callObjectMode&&d.url&&d.url!==this.properties.url)return console.error("url in join() is different than the one used in load() (".concat(this.properties.url," -> ").concat(d.url,")")),this.updateIsPreparingToJoin(!1),Promise.reject();this.validateProperties(d),this.properties=I(I({},this.properties),d)}return d.showLocalVideo!==void 0&&(this._callObjectMode?console.error("showLocalVideo is not available in callObject mode"):this._showLocalVideo=!!d.showLocalVideo),d.showParticipantsBar!==void 0&&(this._callObjectMode?console.error("showParticipantsBar is not available in callObject mode"):this._showParticipantsBar=!!d.showParticipantsBar),this._callState===Ve||this._callState===tn?(console.warn("already joined meeting, call leave() before joining again"),void this.updateIsPreparingToJoin(!1)):(this._updateCallState(tn,!1),this.emitDailyJSEvent({action:Ps}),this._preloadCache.inputSettings||(this._preloadCache.inputSettings={}),d.inputSettings&&d.inputSettings.audio&&(this._preloadCache.inputSettings.audio=d.inputSettings.audio),d.inputSettings&&d.inputSettings.video&&(this._preloadCache.inputSettings.video=d.inputSettings.video),this.sendMessageToCallMachine({action:"join-meeting",properties:He(this.properties,this.callClientId),preloadCache:He(this._preloadCache,this.callClientId)}),new Promise(function(g,m){i._joinedCallback=function(b,A){if(i._callState!==ke){if(i._updateCallState(Ve),b)for(var O in b){if(i._callObjectMode){var U=i._callMachine().store;Mi(b[O],U),Oi(b[O],U),Li(b[O],i._participants[O],U)}i._participants[O]=I({},b[O]),i.toggleParticipantAudioBasedOnNativeAudioFocus()}l&&i.loadCss(i.properties),g(b)}else m(A)}}))}),function(){return T.apply(this,arguments)})},{key:"leave",value:(v=D(function*(){var i=this;return this._testCallInProgress&&this.stopTestCallQuality(),new Promise(function(d){i._callState===Pe||i._callState===ke?d():i._callObjectLoader&&!i._callObjectLoader.loaded?(i._callObjectLoader.cancel(),i._updateCallState(Pe),i.resetMeetingDependentVars(),i.emitDailyJSEvent({action:Pe}),d()):(i._resolveLeave=d,i.sendMessageToCallMachine({action:"leave-meeting"}))})}),function(){return v.apply(this,arguments)})},{key:"startScreenShare",value:(E=D(function*(){var i=this,d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(Yt(this._callMachineInitialized,"startScreenShare()"),d.screenVideoSendSettings&&this._validateVideoSendSettings("screenVideo",d.screenVideoSendSettings),d.mediaStream&&(this._sharedTracks.screenMediaStream=d.mediaStream,d.mediaStream=vt),typeof DailyNativeUtils<"u"&&DailyNativeUtils.isIOS!==void 0&&DailyNativeUtils.isIOS){var l=this.nativeUtils();if(yield l.isScreenBeingCaptured())return void this.emitDailyJSEvent({action:Vn,type:"screen-share-error",errorMsg:"Could not start the screen sharing. The screen is already been captured!"});l.setSystemScreenCaptureStartCallback(function(){l.setSystemScreenCaptureStartCallback(null),i.sendMessageToCallMachine({action:gi,captureOptions:d})}),l.presentSystemScreenCapturePrompt()}else this.sendMessageToCallMachine({action:gi,captureOptions:d})}),function(){return E.apply(this,arguments)})},{key:"stopScreenShare",value:function(){Yt(this._callMachineInitialized,"stopScreenShare()"),this.sendMessageToCallMachine({action:"local-screen-stop"})}},{key:"startRecording",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.sendMessageToCallMachine(I({action:"local-recording-start"},i))}},{key:"updateRecording",value:function(i){var d=i.layout,l=d===void 0?{preset:"default"}:d,g=i.instanceId;this.sendMessageToCallMachine({action:"daily-method-update-recording",layout:l,instanceId:g})}},{key:"stopRecording",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.sendMessageToCallMachine(I({action:"local-recording-stop"},i))}},{key:"startLiveStreaming",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.sendMessageToCallMachine(I({action:"daily-method-start-live-streaming"},i))}},{key:"updateLiveStreaming",value:function(i){var d=i.layout,l=d===void 0?{preset:"default"}:d,g=i.instanceId;this.sendMessageToCallMachine({action:"daily-method-update-live-streaming",layout:l,instanceId:g})}},{key:"addLiveStreamingEndpoints",value:function(i){var d=i.endpoints,l=i.instanceId;this.sendMessageToCallMachine({action:yi,endpointsOp:Tc,endpoints:d,instanceId:l})}},{key:"removeLiveStreamingEndpoints",value:function(i){var d=i.endpoints,l=i.instanceId;this.sendMessageToCallMachine({action:yi,endpointsOp:Cc,endpoints:d,instanceId:l})}},{key:"stopLiveStreaming",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.sendMessageToCallMachine(I({action:"daily-method-stop-live-streaming"},i))}},{key:"validateDailyConfig",value:function(i){i.camSimulcastEncodings&&(console.warn("camSimulcastEncodings is deprecated. Use sendSettings, found in DailyCallOptions, to provide camera simulcast settings."),this.validateSimulcastEncodings(i.camSimulcastEncodings)),i.screenSimulcastEncodings&&console.warn("screenSimulcastEncodings is deprecated. Use sendSettings, found in DailyCallOptions, to provide screen simulcast settings."),ka()&&i.noAutoDefaultDeviceChange&&console.warn("noAutoDefaultDeviceChange is not supported on Android, and will be ignored.")}},{key:"validateSimulcastEncodings",value:function(i){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,l=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(i){if(!(i instanceof Array||Array.isArray(i)))throw new Error("encodings must be an Array");if(!Yi(i.length,1,3))throw new Error("encodings must be an Array with between 1 to ".concat(3," layers"));for(var g=0;g<i.length;g++){var m=i[g];for(var b in this._validateEncodingLayerHasValidProperties(m),m)if(En.includes(b)){if(typeof m[b]!="number")throw new Error("".concat(b," must be a number"));if(d){var A=d[b],O=A.min,U=A.max;if(!Yi(m[b],O,U))throw new Error("".concat(b," value not in range. valid range: ").concat(O," to ").concat(U))}}else if(!["active","scalabilityMode"].includes(b))throw new Error("Invalid key ".concat(b,", valid keys are:")+Object.values(En));if(l&&!m.hasOwnProperty("maxBitrate"))throw new Error("maxBitrate is not specified")}}}},{key:"startRemoteMediaPlayer",value:(W=D(function*(i){var d=this,l=i.url,g=i.settings,m=g===void 0?{state:Gn.PLAY}:g;try{(function(b){if(typeof b!="string")throw new Error('url parameter must be "string" type')})(l),Vi(m),function(b){for(var A in b)if(!Ui.includes(A))throw new Error("Invalid key ".concat(A,", valid keys are: ").concat(Ui));b.simulcastEncodings&&this.validateSimulcastEncodings(b.simulcastEncodings,Oa,!0)}(m)}catch(b){throw console.error("invalid argument Error: ".concat(b)),console.error(`startRemoteMediaPlayer arguments must be of the form:
  { url: "playback url",
  settings?:
  {state: "play"|"pause", simulcastEncodings?: [{}] } }`),b}return new Promise(function(b,A){d.sendMessageToCallMachine({action:"daily-method-start-remote-media-player",url:l,settings:m},function(O){O.error?A({error:O.error,errorMsg:O.errorMsg}):b({session_id:O.session_id,remoteMediaPlayerState:{state:O.state,settings:O.settings}})})})}),function(i){return W.apply(this,arguments)})},{key:"stopRemoteMediaPlayer",value:(x=D(function*(i){var d=this;if(typeof i!="string")throw new Error(" remotePlayerID must be of type string");return new Promise(function(l,g){d.sendMessageToCallMachine({action:"daily-method-stop-remote-media-player",session_id:i},function(m){m.error?g({error:m.error,errorMsg:m.errorMsg}):l()})})}),function(i){return x.apply(this,arguments)})},{key:"updateRemoteMediaPlayer",value:(P=D(function*(i){var d=this,l=i.session_id,g=i.settings;try{Vi(g)}catch(m){throw console.error("invalid argument Error: ".concat(m)),console.error(`updateRemoteMediaPlayer arguments must be of the form:
  session_id: "participant session",
  { settings?: {state: "play"|"pause"} }`),m}return new Promise(function(m,b){d.sendMessageToCallMachine({action:"daily-method-update-remote-media-player",session_id:l,settings:g},function(A){A.error?b({error:A.error,errorMsg:A.errorMsg}):m({session_id:A.session_id,remoteMediaPlayerState:{state:A.state,settings:A.settings}})})})}),function(i){return P.apply(this,arguments)})},{key:"startTranscription",value:function(i){$(this._callState,"startTranscription()"),this.sendMessageToCallMachine(I({action:"daily-method-start-transcription"},i))}},{key:"updateTranscription",value:function(i){if($(this._callState,"updateTranscription()"),!i)throw new Error("updateTranscription Error: options is mandatory");if(Y(i)!=="object")throw new Error("updateTranscription Error: options must be object type");if(i.participants&&!Array.isArray(i.participants))throw new Error("updateTranscription Error: participants must be an array");this.sendMessageToCallMachine(I({action:"daily-method-update-transcription"},i))}},{key:"stopTranscription",value:function(i){if($(this._callState,"stopTranscription()"),i&&Y(i)!=="object")throw new Error("stopTranscription Error: options must be object type");if(i&&!i.instanceId)throw new Error('"instanceId" not provided');this.sendMessageToCallMachine(I({action:"daily-method-stop-transcription"},i))}},{key:"startDialOut",value:(M=D(function*(i){var d=this;$(this._callState,"startDialOut()");var l=function(g){if(g){if(!Array.isArray(g))throw new Error("Error starting dial out: audio codec must be an array");if(g.length<=0)throw new Error("Error starting dial out: audio codec array specified but empty");g.forEach(function(m){if(typeof m!="string")throw new Error("Error starting dial out: audio codec must be a string");if(m!=="OPUS"&&m!=="PCMU"&&m!=="PCMA"&&m!=="G722")throw new Error("Error starting dial out: audio codec must be one of OPUS, PCMU, PCMA, G722")})}};if(!i.sipUri&&!i.phoneNumber)throw new Error("Error starting dial out: either a sip uri or phone number must be provided");if(i.sipUri&&i.phoneNumber)throw new Error("Error starting dial out: only one of sip uri or phone number must be provided");if(i.sipUri){if(typeof i.sipUri!="string")throw new Error("Error starting dial out: sipUri must be a string");if(!i.sipUri.startsWith("sip:"))throw new Error("Error starting dial out: Invalid SIP URI, must start with 'sip:'");if(i.video&&typeof i.video!="boolean")throw new Error("Error starting dial out: video must be a boolean value");(function(g){if(g&&(l(g.audio),g.video)){if(!Array.isArray(g.video))throw new Error("Error starting dial out: video codec must be an array");if(g.video.length<=0)throw new Error("Error starting dial out: video codec array specified but empty");g.video.forEach(function(m){if(typeof m!="string")throw new Error("Error starting dial out: video codec must be a string");if(m!=="H264"&&m!=="VP8")throw new Error("Error starting dial out: video codec must be H264 or VP8")})}})(i.codecs)}if(i.phoneNumber){if(typeof i.phoneNumber!="string")throw new Error("Error starting dial out: phoneNumber must be a string");if(!/^\+\d{1,}$/.test(i.phoneNumber))throw new Error("Error starting dial out: Invalid phone number, must be valid phone number as per E.164");i.codecs&&l(i.codecs.audio)}if(i.callerId){if(typeof i.callerId!="string")throw new Error("Error starting dial out: callerId must be a string");if(i.sipUri)throw new Error("Error starting dial out: callerId not allowed with sipUri")}if(i.displayName){if(typeof i.displayName!="string")throw new Error("Error starting dial out: displayName must be a string");if(i.displayName.length>=200)throw new Error("Error starting dial out: displayName length must be less than 200")}if(i.userId){if(typeof i.userId!="string")throw new Error("Error starting dial out: userId must be a string");if(i.userId.length>36)throw new Error("Error starting dial out: userId length must be less than or equal to 36")}return new Promise(function(g,m){d.sendMessageToCallMachine(I({action:"dialout-start"},i),function(b){b.error?m(b.error):g(b)})})}),function(i){return M.apply(this,arguments)})},{key:"stopDialOut",value:function(i){var d=this;return $(this._callState,"stopDialOut()"),new Promise(function(l,g){d.sendMessageToCallMachine(I({action:"dialout-stop"},i),function(m){m.error?g(m.error):l(m)})})}},{key:"sipCallTransfer",value:(k=D(function*(i){var d=this;if($(this._callState,"sipCallTransfer()"),!i)throw new Error("sipCallTransfer() requires a sessionId and toEndPoint");return i.useSipRefer=!1,qi(i,"sipCallTransfer"),new Promise(function(l,g){d.sendMessageToCallMachine(I({action:_i},i),function(m){m.error?g(m.error):l(m)})})}),function(i){return k.apply(this,arguments)})},{key:"sipRefer",value:(w=D(function*(i){var d=this;if($(this._callState,"sipRefer()"),!i)throw new Error("sessionId and toEndPoint are mandatory parameter");return i.useSipRefer=!0,qi(i,"sipRefer"),new Promise(function(l,g){d.sendMessageToCallMachine(I({action:_i},i),function(m){m.error?g(m.error):l(m)})})}),function(i){return w.apply(this,arguments)})},{key:"sendDTMF",value:(_=D(function*(i){var d=this;return $(this._callState,"sendDTMF()"),function(l){var g=l.sessionId,m=l.tones;if(!g||!m)throw new Error("sessionId and tones are mandatory parameter");if(typeof g!="string"||typeof m!="string")throw new Error("sessionId and tones should be of string type");if(m.length>20)throw new Error("tones string must be upto 20 characters");var b=/[^0-9A-D*#]/g,A=m.match(b);if(A&&A[0])throw new Error("".concat(A[0]," is not valid DTMF tone"))}(i),new Promise(function(l,g){d.sendMessageToCallMachine(I({action:"send-dtmf"},i),function(m){m.error?g(m.error):l(m)})})}),function(i){return _.apply(this,arguments)})},{key:"getNetworkStats",value:function(){var i=this;return this._callState!==Ve?{stats:{latest:{}}}:new Promise(function(d){i.sendMessageToCallMachine({action:"get-calc-stats"},function(l){d(I({stats:l.stats},i._network))})})}},{key:"testWebsocketConnectivity",value:(y=D(function*(){var i=this;if(kn(this._testCallInProgress,"testWebsocketConnectivity()"),this.needsLoad())try{yield this.load()}catch(d){return Promise.reject(d)}return new Promise(function(d,l){i.sendMessageToCallMachine({action:"test-websocket-connectivity"},function(g){g.error?l(g.error):d(g.results)})})}),function(){return y.apply(this,arguments)})},{key:"abortTestWebsocketConnectivity",value:function(){this.sendMessageToCallMachine({action:"abort-test-websocket-connectivity"})}},{key:"_validateVideoTrackForNetworkTests",value:function(i){return i?i instanceof MediaStreamTrack?!!Qc(i,{isLocalScreenVideo:!1})||(console.error("Video track is not playable. This test needs a live video track."),!1):(console.error("Video track needs to be of type `MediaStreamTrack`."),!1):(console.error("Missing video track. You must provide a video track in order to run this test."),!1)}},{key:"testCallQuality",value:(p=D(function*(){var i=this;F(),he(this._callObjectMode,"testCallQuality()"),Yt(this._callMachineInitialized,"testCallQuality()",null,!0),wn(this._callState,this._isPreparingToJoin,"testCallQuality()");var d=this._testCallAlreadyInProgress,l=function(m){d||(i._testCallInProgress=m)};if(l(!0),this.needsLoad())try{var g=this._callState;yield this.load(),this._callState=g}catch(m){return l(!1),Promise.reject(m)}return new Promise(function(m){i.sendMessageToCallMachine({action:"test-call-quality",dailyJsVersion:i.properties.dailyJsVersion},function(b){var A=b.results,O=A.result,U=yr(A,Kc);if(O==="failed"){var Z,H=I({},U);(Z=U.error)!==null&&Z!==void 0&&Z.details?(U.error.details=JSON.parse(U.error.details),H.error=I(I({},H.error),{},{details:I({},H.error.details)}),H.error.details.duringTest="testCallQuality"):(H.error=H.error?I({},H.error):{},H.error.details={duringTest:"testCallQuality"}),i._maybeSendToSentry(H)}l(!1),m(I({result:O},U))})})}),function(){return p.apply(this,arguments)})},{key:"stopTestCallQuality",value:function(){this.sendMessageToCallMachine({action:"stop-test-call-quality"})}},{key:"testConnectionQuality",value:(h=D(function*(i){var d;B()?(console.warn("testConnectionQuality() is deprecated: use testPeerToPeerCallQuality() instead"),d=yield this.testPeerToPeerCallQuality(i)):(console.warn("testConnectionQuality() is deprecated: use testCallQuality() instead"),d=yield this.testCallQuality());var l={result:d.result,secondsElapsed:d.secondsElapsed};return d.data&&(l.data={maxRTT:d.data.maxRoundTripTime,packetLoss:d.data.avgRecvPacketLoss}),l}),function(i){return h.apply(this,arguments)})},{key:"testPeerToPeerCallQuality",value:(f=D(function*(i){var d=this;if(kn(this._testCallInProgress,"testPeerToPeerCallQuality()"),this.needsLoad())try{yield this.load()}catch(m){return Promise.reject(m)}var l=i.videoTrack,g=i.duration;if(!this._validateVideoTrackForNetworkTests(l))throw new Error("Video track error");return this._sharedTracks.videoTrackForConnectionQualityTest=l,new Promise(function(m,b){d.sendMessageToCallMachine({action:"test-p2p-call-quality",duration:g},function(A){A.error?b(A.error):m(A.results)})})}),function(i){return f.apply(this,arguments)})},{key:"stopTestConnectionQuality",value:function(){B()?(console.warn("stopTestConnectionQuality() is deprecated: use testPeerToPeerCallQuality() and stopTestPeerToPeerCallQuality() instead"),this.stopTestPeerToPeerCallQuality()):(console.warn("stopTestConnectionQuality() is deprecated: use testCallQuality() and stopTestCallQuality() instead"),this.stopTestCallQuality())}},{key:"stopTestPeerToPeerCallQuality",value:function(){this.sendMessageToCallMachine({action:"stop-test-p2p-call-quality"})}},{key:"testNetworkConnectivity",value:(u=D(function*(i){var d=this;if(kn(this._testCallInProgress,"testNetworkConnectivity()"),this.needsLoad())try{yield this.load()}catch(l){return Promise.reject(l)}if(!this._validateVideoTrackForNetworkTests(i))throw new Error("Video track error");return this._sharedTracks.videoTrackForNetworkConnectivityTest=i,new Promise(function(l,g){d.sendMessageToCallMachine({action:"test-network-connectivity"},function(m){m.error?g(m.error):l(m.results)})})}),function(i){return u.apply(this,arguments)})},{key:"abortTestNetworkConnectivity",value:function(){this.sendMessageToCallMachine({action:"abort-test-network-connectivity"})}},{key:"getCpuLoadStats",value:function(){var i=this;return new Promise(function(d){i._callState===Ve?i.sendMessageToCallMachine({action:"get-cpu-load-stats"},function(l){d(l.cpuStats)}):d({cpuLoadState:void 0,cpuLoadStateReason:void 0,stats:{}})})}},{key:"_validateEncodingLayerHasValidProperties",value:function(i){var d;if(!(((d=Object.keys(i))===null||d===void 0?void 0:d.length)>0))throw new Error("Empty encoding is not allowed. At least one of these valid keys should be specified:"+Object.values(En))}},{key:"_validateVideoSendSettings",value:function(i,d){var l=i==="screenVideo"?["default-screen-video","detail-optimized","motion-optimized","motion-and-detail-balanced"]:["default-video","bandwidth-optimized","bandwidth-and-quality-balanced","quality-optimized","adaptive-2-layers","adaptive-3-layers"],g="Video send settings should be either an object or one of the supported presets: ".concat(l.join());if(typeof d=="string"){if(!l.includes(d))throw new Error(g)}else{if(Y(d)!=="object")throw new Error(g);if(!d.maxQuality&&!d.encodings&&d.allowAdaptiveLayers===void 0)throw new Error("Video send settings must contain at least maxQuality, allowAdaptiveLayers or encodings attribute");if(d.maxQuality&&["low","medium","high"].indexOf(d.maxQuality)===-1)throw new Error("maxQuality must be either low, medium or high");if(d.encodings){var m=!1;switch(Object.keys(d.encodings).length){case 1:m=!d.encodings.low;break;case 2:m=!d.encodings.low||!d.encodings.medium;break;case 3:m=!d.encodings.low||!d.encodings.medium||!d.encodings.high;break;default:m=!0}if(m)throw new Error("Encodings must be defined as: low, low and medium, or low, medium and high.");d.encodings.low&&this._validateEncodingLayerHasValidProperties(d.encodings.low),d.encodings.medium&&this._validateEncodingLayerHasValidProperties(d.encodings.medium),d.encodings.high&&this._validateEncodingLayerHasValidProperties(d.encodings.high)}}}},{key:"validateUpdateSendSettings",value:function(i){var d=this;if(!i||Object.keys(i).length===0)throw new Error("Send settings must contain at least information for one track!");Object.entries(i).forEach(function(l){var g=Ge(l,2),m=g[0],b=g[1];d._validateVideoSendSettings(m,b)})}},{key:"updateSendSettings",value:function(i){var d=this;return this.validateUpdateSendSettings(i),this.needsLoad()?(this._preloadCache.sendSettings=i,{sendSettings:this._preloadCache.sendSettings}):new Promise(function(l,g){d.sendMessageToCallMachine({action:"update-send-settings",sendSettings:i},function(m){m.error?g(m.error):l(m.sendSettings)})})}},{key:"getSendSettings",value:function(){return this._sendSettings||this._preloadCache.sendSettings}},{key:"getLocalAudioLevel",value:function(){return this._localAudioLevel}},{key:"getRemoteParticipantsAudioLevel",value:function(){return this._remoteParticipantsAudioLevel}},{key:"getActiveSpeaker",value:function(){return F(),this._activeSpeaker}},{key:"setActiveSpeakerMode",value:function(i){return F(),this.sendMessageToCallMachine({action:"set-active-speaker-mode",enabled:i}),this}},{key:"activeSpeakerMode",value:function(){return F(),this._activeSpeakerMode}},{key:"subscribeToTracksAutomatically",value:function(){return this._preloadCache.subscribeToTracksAutomatically}},{key:"setSubscribeToTracksAutomatically",value:function(i){return $(this._callState,"setSubscribeToTracksAutomatically()","Use the subscribeToTracksAutomatically configuration property."),this._preloadCache.subscribeToTracksAutomatically=i,this.sendMessageToCallMachine({action:"daily-method-subscribe-to-tracks-automatically",enabled:i}),this}},{key:"enumerateDevices",value:(c=D(function*(){var i=this;if(this._callObjectMode){var d=yield navigator.mediaDevices.enumerateDevices();return xe()==="Firefox"&&nn().major>115&&nn().major<123&&(d=d.filter(function(l){return l.kind!=="audiooutput"})),{devices:d.map(function(l){var g=JSON.parse(JSON.stringify(l));if(!B()&&l.kind==="videoinput"&&l.getCapabilities){var m,b=l.getCapabilities();g.facing=(b==null||(m=b.facingMode)===null||m===void 0?void 0:m.length)>=1?b.facingMode[0]:void 0}return g})}}return new Promise(function(l){i.sendMessageToCallMachine({action:"enumerate-devices"},function(g){l({devices:g.devices})})})}),function(){return c.apply(this,arguments)})},{key:"sendAppMessage",value:function(i){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"*";if($(this._callState,"sendAppMessage()"),JSON.stringify(i).length>this._maxAppMessageSize)throw new Error("Message data too large. Max size is "+this._maxAppMessageSize);return this.sendMessageToCallMachine({action:"app-msg",data:i,to:d}),this}},{key:"addFakeParticipant",value:function(i){return F(),$(this._callState,"addFakeParticipant()"),this.sendMessageToCallMachine(I({action:"add-fake-participant"},i)),this}},{key:"setShowNamesMode",value:function(i){return ae(this._callObjectMode,"setShowNamesMode()"),F(),i&&i!=="always"&&i!=="never"?(console.error('setShowNamesMode argument should be "always", "never", or false'),this):(this.sendMessageToCallMachine({action:"set-show-names",mode:i}),this)}},{key:"setShowLocalVideo",value:function(){var i=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];return ae(this._callObjectMode,"setShowLocalVideo()"),F(),$(this._callState,"setShowLocalVideo()"),typeof i!="boolean"?(console.error("setShowLocalVideo only accepts a boolean value"),this):(this.sendMessageToCallMachine({action:"set-show-local-video",show:i}),this._showLocalVideo=i,this)}},{key:"showLocalVideo",value:function(){return ae(this._callObjectMode,"showLocalVideo()"),F(),this._showLocalVideo}},{key:"setShowParticipantsBar",value:function(){var i=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];return ae(this._callObjectMode,"setShowParticipantsBar()"),F(),$(this._callState,"setShowParticipantsBar()"),typeof i!="boolean"?(console.error("setShowParticipantsBar only accepts a boolean value"),this):(this.sendMessageToCallMachine({action:"set-show-participants-bar",show:i}),this._showParticipantsBar=i,this)}},{key:"showParticipantsBar",value:function(){return ae(this._callObjectMode,"showParticipantsBar()"),F(),this._showParticipantsBar}},{key:"customIntegrations",value:function(){return F(),ae(this._callObjectMode,"customIntegrations()"),this._customIntegrations}},{key:"setCustomIntegrations",value:function(i){return F(),ae(this._callObjectMode,"setCustomIntegrations()"),$(this._callState,"setCustomIntegrations()"),xa(i)?(this.sendMessageToCallMachine({action:"set-custom-integrations",integrations:i}),this._customIntegrations=i,this):this}},{key:"startCustomIntegrations",value:function(i){var d=this;if(F(),ae(this._callObjectMode,"startCustomIntegrations()"),$(this._callState,"startCustomIntegrations()"),Array.isArray(i)&&i.some(function(m){return typeof m!="string"})||!Array.isArray(i)&&typeof i!="string")return console.error("startCustomIntegrations() only accepts string | string[]"),this;var l=typeof i=="string"?[i]:i,g=l.filter(function(m){return!(m in d._customIntegrations)});return g.length?(console.error(`Can't find custom integration(s): "`.concat(g.join(", "),'"')),this):(this.sendMessageToCallMachine({action:"start-custom-integrations",ids:l}),this)}},{key:"stopCustomIntegrations",value:function(i){var d=this;if(F(),ae(this._callObjectMode,"stopCustomIntegrations()"),$(this._callState,"stopCustomIntegrations()"),Array.isArray(i)&&i.some(function(m){return typeof m!="string"})||!Array.isArray(i)&&typeof i!="string")return console.error("stopCustomIntegrations() only accepts string | string[]"),this;var l=typeof i=="string"?[i]:i,g=l.filter(function(m){return!(m in d._customIntegrations)});return g.length?(console.error(`Can't find custom integration(s): "`.concat(g.join(", "),'"')),this):(this.sendMessageToCallMachine({action:"stop-custom-integrations",ids:l}),this)}},{key:"customTrayButtons",value:function(){return ae(this._callObjectMode,"customTrayButtons()"),F(),this._customTrayButtons}},{key:"updateCustomTrayButtons",value:function(i){return ae(this._callObjectMode,"updateCustomTrayButtons()"),F(),$(this._callState,"updateCustomTrayButtons()"),ja(i)?(this.sendMessageToCallMachine({action:"update-custom-tray-buttons",btns:i}),this._customTrayButtons=i,this):(console.error("updateCustomTrayButtons only accepts a dictionary of the type ".concat(JSON.stringify(sn))),this)}},{key:"theme",value:function(){return ae(this._callObjectMode,"theme()"),this.properties.theme}},{key:"setTheme",value:function(i){var d=this;return ae(this._callObjectMode,"setTheme()"),new Promise(function(l,g){try{d.validateProperties({theme:i}),d.properties.theme=I({},i),d.sendMessageToCallMachine({action:"set-theme",theme:d.properties.theme});try{d.emitDailyJSEvent({action:Cs,theme:d.properties.theme})}catch(m){console.log("could not emit 'theme-updated'",m)}l(d.properties.theme)}catch(m){g(m)}})}},{key:"requestFullscreen",value:(a=D(function*(){if(F(),this._iframe&&!document.fullscreenElement&&bi())try{(yield this._iframe.requestFullscreen)?this._iframe.requestFullscreen():this._iframe.webkitRequestFullscreen()}catch(i){console.log("could not make video call fullscreen",i)}}),function(){return a.apply(this,arguments)})},{key:"exitFullscreen",value:function(){F(),document.fullscreenElement?document.exitFullscreen():document.webkitFullscreenElement&&document.webkitExitFullscreen()}},{key:"getSidebarView",value:(o=D(function*(){var i=this;return this._callObjectMode?(console.error("getSidebarView is not available in callObject mode"),Promise.resolve(null)):new Promise(function(d){i.sendMessageToCallMachine({action:"get-sidebar-view"},function(l){d(l.view)})})}),function(){return o.apply(this,arguments)})},{key:"setSidebarView",value:function(i){return this._callObjectMode?(console.error("setSidebarView is not available in callObject mode"),this):(this.sendMessageToCallMachine({action:"set-sidebar-view",view:i}),this)}},{key:"room",value:(s=D(function*(){var i=this,d=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).includeRoomConfigDefaults,l=d===void 0||d;return this._accessState.access===Jt||this.needsLoad()?this.properties.url?{roomUrlPendingJoin:this.properties.url}:null:new Promise(function(g){i.sendMessageToCallMachine({action:"lib-room-info",includeRoomConfigDefaults:l},function(m){delete m.action,delete m.callbackStamp,g(m)})})}),function(){return s.apply(this,arguments)})},{key:"geo",value:(r=D(function*(){try{var i=yield fetch("https://gs.daily.co/_ks_/x-swsl/:");return{current:(yield i.json()).geo}}catch(d){return console.error("geo lookup failed",d),{current:""}}}),function(){return r.apply(this,arguments)})},{key:"setNetworkTopology",value:(n=D(function*(i){var d=this;return F(),$(this._callState,"setNetworkTopology()"),new Promise(function(l,g){d.sendMessageToCallMachine({action:"set-network-topology",opts:i},function(m){m.error?g({error:m.error}):l({workerId:m.workerId})})})}),function(i){return n.apply(this,arguments)})},{key:"getNetworkTopology",value:(e=D(function*(){var i=this;return new Promise(function(d,l){i.needsLoad()&&d({topology:"none"}),i.sendMessageToCallMachine({action:"get-network-topology"},function(g){g.error?l({error:g.error}):d({topology:g.topology})})})}),function(){return e.apply(this,arguments)})},{key:"setPlayNewParticipantSound",value:function(i){if(F(),typeof i!="number"&&i!==!0&&i!==!1)throw new Error("argument to setShouldPlayNewParticipantSound should be true, false, or a number, but is ".concat(i));this.sendMessageToCallMachine({action:"daily-method-set-play-ding",arg:i})}},{key:"on",value:function(i,d){return Ae.prototype.on.call(this,i,d)}},{key:"once",value:function(i,d){return Ae.prototype.once.call(this,i,d)}},{key:"off",value:function(i,d){return Ae.prototype.off.call(this,i,d)}},{key:"validateProperties",value:function(i){for(var d in i){if(!Ue[d])throw new Error("unrecognized property '".concat(d,"'"));if(Ue[d].validate&&!Ue[d].validate(i[d],this))throw new Error("property '".concat(d,"': ").concat(Ue[d].help))}}},{key:"assembleMeetingUrl",value:function(){var i,d,l=I(I({},this.properties),{},{emb:this.callClientId,embHref:encodeURIComponent(window.location.href),proxy:(i=this.properties.dailyConfig)!==null&&i!==void 0&&i.proxyUrl?encodeURIComponent((d=this.properties.dailyConfig)===null||d===void 0?void 0:d.proxyUrl):void 0}),g=l.url.match(/\?/)?"&":"?";return l.url+g+Object.keys(Ue).filter(function(m){return Ue[m].queryString&&l[m]!==void 0}).map(function(m){return"".concat(Ue[m].queryString,"=").concat(l[m])}).join("&")}},{key:"needsLoad",value:function(){return[Fn,fi,Pe,ke].includes(this._callState)}},{key:"sendMessageToCallMachine",value:function(i,d){if(this._destroyed&&(this._logUseAfterDestroy(),this.strictMode))throw new Error("Use after destroy");this._messageChannel.sendMessageToCallMachine(i,d,this.callClientId,this._iframe)}},{key:"forwardPackagedMessageToCallMachine",value:function(i){this._messageChannel.forwardPackagedMessageToCallMachine(i,this._iframe,this.callClientId)}},{key:"addListenerForPackagedMessagesFromCallMachine",value:function(i){return this._messageChannel.addListenerForPackagedMessagesFromCallMachine(i,this.callClientId)}},{key:"removeListenerForPackagedMessagesFromCallMachine",value:function(i){this._messageChannel.removeListenerForPackagedMessagesFromCallMachine(i)}},{key:"handleMessageFromCallMachine",value:function(i){switch(i.action){case ks:this.sendMessageToCallMachine(I({action:Ts},this.properties));break;case"call-machine-initialized":this._callMachineInitialized=!0;var d={action:Bt,level:"log",code:1011,stats:{event:"bundle load",time:this._bundleLoadTime==="no-op"?0:this._bundleLoadTime,preLoaded:this._bundleLoadTime==="no-op",url:Ht(this.properties.dailyConfig)}};this.sendMessageToCallMachine(d),this._delayDuplicateInstanceLog&&this._logDuplicateInstanceAttempt();break;case Un:this._loadedCallback&&(this._loadedCallback(),this._loadedCallback=null),this.emitDailyJSEvent(i);break;case Ds:var l,g=I({},i);delete g.internal,this._maxAppMessageSize=((l=i.internal)===null||l===void 0?void 0:l._maxAppMessageSize)||yn,this._joinedCallback&&(this._joinedCallback(i.participants),this._joinedCallback=null),this.emitDailyJSEvent(g);break;case Ns:case Rs:if(this._callState===Pe)return;if(i.participant&&i.participant.session_id){var m=i.participant.local?"local":i.participant.session_id;if(this._callObjectMode){var b=this._callMachine().store;Mi(i.participant,b),Oi(i.participant,b),Li(i.participant,this._participants[m],b)}try{this.maybeParticipantTracksStopped(this._participants[m],i.participant),this.maybeParticipantTracksStarted(this._participants[m],i.participant),this.maybeEventRecordingStopped(this._participants[m],i.participant),this.maybeEventRecordingStarted(this._participants[m],i.participant)}catch(Ba){console.error("track events error",Ba)}this.compareEqualForParticipantUpdateEvent(i.participant,this._participants[m])||(this._participants[m]=I({},i.participant),this.toggleParticipantAudioBasedOnNativeAudioFocus(),this.emitDailyJSEvent(i))}break;case js:if(i.participant&&i.participant.session_id){var A=this._participants[i.participant.session_id];A&&this.maybeParticipantTracksStopped(A,null),delete this._participants[i.participant.session_id],this.emitDailyJSEvent(i)}break;case xs:se(this._participantCounts,i.participantCounts)||(this._participantCounts=i.participantCounts,this.emitDailyJSEvent(i));break;case Fs:var O={access:i.access};i.awaitingAccess&&(O.awaitingAccess=i.awaitingAccess),se(this._accessState,O)||(this._accessState=O,this.emitDailyJSEvent(i));break;case Us:if(i.meetingSession){this._meetingSessionSummary=i.meetingSession,this.emitDailyJSEvent(i);var U=I(I({},i),{},{action:"meeting-session-updated"});this.emitDailyJSEvent(U)}break;case Yn:var Z;this._iframe&&!i.preserveIframe&&(this._iframe.src=""),this._updateCallState(ke),this.resetMeetingDependentVars(),this._loadedCallback&&(this._loadedCallback(i.errorMsg),this._loadedCallback=null),i.preserveIframe;var H=yr(i,Xc);H!=null&&(Z=H.error)!==null&&Z!==void 0&&Z.details&&(H.error.details=JSON.parse(H.error.details)),this._maybeSendToSentry(i),this._joinedCallback&&(this._joinedCallback(null,H),this._joinedCallback=null),this.emitDailyJSEvent(H);break;case Is:this._callState!==ke&&this._updateCallState(Pe),this.resetMeetingDependentVars(),this._resolveLeave&&(this._resolveLeave(),this._resolveLeave=null),this.emitDailyJSEvent(i);break;case"selected-devices-updated":i.devices&&this.emitDailyJSEvent(i);break;case ua:var be=i.threshold,Oe=i.quality;be===this._network.threshold&&Oe===this._network.quality||(this._network.quality=Oe,this._network.threshold=be,this.emitDailyJSEvent(i));break;case da:i&&i.cpuLoadState&&this.emitDailyJSEvent(i);break;case ha:i&&i.faceCounts!==void 0&&this.emitDailyJSEvent(i);break;case oa:var Se=i.activeSpeaker;this._activeSpeaker.peerId!==Se.peerId&&(this._activeSpeaker.peerId=Se.peerId,this.emitDailyJSEvent({action:i.action,activeSpeaker:this._activeSpeaker}));break;case"show-local-video-changed":if(this._callObjectMode)return;var Lt=i.show;this._showLocalVideo=Lt,this.emitDailyJSEvent({action:i.action,show:Lt});break;case ca:var te=i.enabled;this._activeSpeakerMode!==te&&(this._activeSpeakerMode=te,this.emitDailyJSEvent({action:i.action,enabled:this._activeSpeakerMode}));break;case qs:case Vs:case Ys:this._waitingParticipants=i.allWaitingParticipants,this.emitDailyJSEvent({action:i.action,participant:i.participant});break;case va:se(this._receiveSettings,i.receiveSettings)||(this._receiveSettings=i.receiveSettings,this.emitDailyJSEvent({action:i.action,receiveSettings:i.receiveSettings}));break;case _a:if(!se(this._inputSettings,i.inputSettings)){var Ee=this._getInputSettings();this._inputSettings=i.inputSettings,this._preloadCache.inputSettings={},se(Ee,this._getInputSettings())||this.emitDailyJSEvent({action:i.action,inputSettings:this._getInputSettings()})}break;case"send-settings-updated":se(this._sendSettings,i.sendSettings)||(this._sendSettings=i.sendSettings,this._preloadCache.sendSettings=null,this.emitDailyJSEvent({action:i.action,sendSettings:i.sendSettings}));break;case"local-audio-level":this._localAudioLevel=i.audioLevel,this._preloadCache.localAudioLevelObserver=null,this.emitDailyJSEvent(i);break;case"remote-participants-audio-level":this._remoteParticipantsAudioLevel=i.participantsAudioLevel,this._preloadCache.remoteParticipantsAudioLevelObserver=null,this.emitDailyJSEvent(i);break;case ta:var ze=i.session_id;this._rmpPlayerState[ze]=i.playerState,this.emitDailyJSEvent(i);break;case ra:delete this._rmpPlayerState[i.session_id],this.emitDailyJSEvent(i);break;case na:var ut=i.session_id,Pt=this._rmpPlayerState[ut];Pt&&this.compareEqualForRMPUpdateEvent(Pt,i.remoteMediaPlayerState)||(this._rmpPlayerState[ut]=i.remoteMediaPlayerState,this.emitDailyJSEvent(i));break;case"custom-button-click":case"sidebar-view-changed":this.emitDailyJSEvent(i);break;case Bs:var dn=this._meetingSessionState.topology!==(i.meetingSessionState&&i.meetingSessionState.topology);this._meetingSessionState=Tn(i.meetingSessionState,this._callObjectMode),(this._callObjectMode||dn)&&this.emitDailyJSEvent(i);break;case ia:this._isScreenSharing=!0,this.emitDailyJSEvent(i);break;case sa:case aa:this._isScreenSharing=!1,this.emitDailyJSEvent(i);break;case Bn:case qn:case Hs:case Qs:case Ks:case Js:case Ws:case zs:case Os:case Ls:case Zs:case ea:case"test-completed":case la:case Xs:case fa:case pa:case ma:case ga:case Vn:case ya:case"dialin-ready":case"dialin-connected":case"dialin-error":case"dialin-stopped":case"dialin-warning":case"dialout-connected":case"dialout-answered":case"dialout-error":case"dialout-stopped":case"dialout-warning":this.emitDailyJSEvent(i);break;case"request-fullscreen":this.requestFullscreen();break;case"request-exit-fullscreen":this.exitFullscreen()}}},{key:"maybeEventRecordingStopped",value:function(i,d){var l="record";i&&(d.local||d[l]!==!1||i[l]===d[l]||this.emitDailyJSEvent({action:qn}))}},{key:"maybeEventRecordingStarted",value:function(i,d){var l="record";i&&(d.local||d[l]!==!0||i[l]===d[l]||this.emitDailyJSEvent({action:Bn}))}},{key:"maybeEventTrackStopped",value:function(i,d,l,g){i&&(i.readyState!=="ended"&&d&&i.id===d.id||this.emitDailyJSEvent({action:$s,track:i,participant:l,type:g}))}},{key:"maybeEventTrackStarted",value:function(i,d,l,g){d&&(i&&i.readyState!=="ended"&&d.id===i.id||this.emitDailyJSEvent({action:Gs,track:d,participant:l,type:g}))}},{key:"maybeParticipantTracksStopped",value:function(i,d){if(i)for(var l in i.tracks)this.maybeEventTrackStopped(i.tracks[l].track,d&&d.tracks[l]?d.tracks[l].track:null,d,l)}},{key:"maybeParticipantTracksStarted",value:function(i,d){if(d)for(var l in d.tracks)this.maybeEventTrackStarted(i&&i.tracks[l]?i.tracks[l].track:null,d.tracks[l].track,d,l)}},{key:"compareEqualForRMPUpdateEvent",value:function(i,d){var l,g;return i.state===d.state&&((l=i.settings)===null||l===void 0?void 0:l.volume)===((g=d.settings)===null||g===void 0?void 0:g.volume)}},{key:"emitDailyJSEvent",value:function(i){try{i.callClientId=this.callClientId,this.emit(i.action,i)}catch(d){console.log("could not emit",i,d)}}},{key:"compareEqualForParticipantUpdateEvent",value:function(i,d){return!!se(i,d)&&(!i.videoTrack||!d.videoTrack||i.videoTrack.id===d.videoTrack.id&&i.videoTrack.muted===d.videoTrack.muted&&i.videoTrack.enabled===d.videoTrack.enabled)&&(!i.audioTrack||!d.audioTrack||i.audioTrack.id===d.audioTrack.id&&i.audioTrack.muted===d.audioTrack.muted&&i.audioTrack.enabled===d.audioTrack.enabled)}},{key:"nativeUtils",value:function(){return B()?typeof DailyNativeUtils>"u"?(console.warn("in React Native, DailyNativeUtils is expected to be available"),null):DailyNativeUtils:null}},{key:"updateIsPreparingToJoin",value:function(i){this._updateCallState(this._callState,i)}},{key:"_updateCallState",value:function(i){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._isPreparingToJoin;if(i!==this._callState||d!==this._isPreparingToJoin){var l=this._callState,g=this._isPreparingToJoin;this._callState=i,this._isPreparingToJoin=d;var m=zt(l,g),b=zt(this._callState,this._isPreparingToJoin);m!==b&&(this.updateKeepDeviceAwake(b),this.updateDeviceAudioMode(b),this.updateShowAndroidOngoingMeetingNotification(b),this.updateNoOpRecordingEnsuringBackgroundContinuity(b))}}},{key:"resetMeetingDependentVars",value:function(){this._participants={},this._participantCounts=Fi,this._waitingParticipants={},this._activeSpeaker={},this._activeSpeakerMode=!1,this._didPreAuth=!1,this._accessState={access:Jt},this._finalSummaryOfPrevSession=this._meetingSessionSummary,this._meetingSessionSummary={},this._meetingSessionState=Tn(xi,this._callObjectMode),this._isScreenSharing=!1,this._receiveSettings={},this._inputSettings=void 0,this._sendSettings={},this._localAudioLevel=0,this._isLocalAudioLevelObserverRunning=!1,this._remoteParticipantsAudioLevel={},this._isRemoteParticipantsAudioLevelObserverRunning=!1,this._maxAppMessageSize=yn,this._callMachineInitialized=!1,this._bundleLoadTime=void 0,this._preloadCache}},{key:"updateKeepDeviceAwake",value:function(i){B()&&this.nativeUtils().setKeepDeviceAwake(i,this.callClientId)}},{key:"updateDeviceAudioMode",value:function(i){if(B()&&!this.disableReactNativeAutoDeviceManagement("audio")){var d=i?this._nativeInCallAudioMode:"idle";this.nativeUtils().setAudioMode(d)}}},{key:"updateShowAndroidOngoingMeetingNotification",value:function(i){if(B()&&this.nativeUtils().setShowOngoingMeetingNotification){var d,l,g,m;if(this.properties.reactNativeConfig&&this.properties.reactNativeConfig.androidInCallNotification){var b=this.properties.reactNativeConfig.androidInCallNotification;d=b.title,l=b.subtitle,g=b.iconName,m=b.disableForCustomOverride}m&&(i=!1),this.nativeUtils().setShowOngoingMeetingNotification(i,d,l,g,this.callClientId)}}},{key:"updateNoOpRecordingEnsuringBackgroundContinuity",value:function(i){B()&&this.nativeUtils().enableNoOpRecordingEnsuringBackgroundContinuity&&this.nativeUtils().enableNoOpRecordingEnsuringBackgroundContinuity(i)}},{key:"toggleParticipantAudioBasedOnNativeAudioFocus",value:function(){var i,d;if(B()){var l=(i=this._callMachine())===null||i===void 0||(d=i.store)===null||d===void 0?void 0:d.getState();for(var g in l==null?void 0:l.streams){var m=l.streams[g];m&&m.pendingTrack&&m.pendingTrack.kind==="audio"&&(m.pendingTrack.enabled=this._hasNativeAudioFocus)}}}},{key:"disableReactNativeAutoDeviceManagement",value:function(i){return this.properties.reactNativeConfig&&this.properties.reactNativeConfig.disableAutoDeviceManagement&&this.properties.reactNativeConfig.disableAutoDeviceManagement[i]}},{key:"absoluteUrl",value:function(i){if(i!==void 0){var d=document.createElement("a");return d.href=i,d.href}}},{key:"sayHello",value:function(){var i="hello, world.";return console.log(i),i}},{key:"_logUseAfterDestroy",value:function(){var i=Object.values(Fe)[0];if(this.needsLoad())if(i&&!i.needsLoad()){var d={action:Bt,level:"error",code:this.strictMode?9995:9997};i.sendMessageToCallMachine(d)}else this.strictMode||console.error("You are are attempting to use a call instance that was previously destroyed, which is unsupported. Please remove `strictMode: false` from your constructor properties to enable strict mode to track down and fix this unsupported usage.");else{var l={action:Bt,level:"error",code:this.strictMode?9995:9997};this._messageChannel.sendMessageToCallMachine(l,null,this.callClientId,this._iframe)}}},{key:"_logDuplicateInstanceAttempt",value:function(){for(var i=0,d=Object.values(Fe);i<d.length;i++){var l=d[i];l._callMachineInitialized?(l.sendMessageToCallMachine({action:Bt,level:"warn",code:this.allowMultipleCallInstances?9993:9992}),l._delayDuplicateInstanceLog=!1):l._delayDuplicateInstanceLog=!0}}},{key:"_maybeSendToSentry",value:function(i){var d,l,g,m,b,A;if(!((d=i.error)!==null&&d!==void 0&&d.type&&!["connection-error","end-of-life","no-room"].includes(i.error.type))){var O=(l=this.properties)!==null&&l!==void 0&&l.url?new URL(this.properties.url):void 0,U="production";O&&O.host.includes(".staging.daily")&&(U="staging");var Z,H,be,Oe,Se,Lt=new Yo({dsn:"https://f10f1c81e5d44a4098416c0867a8b740@o77906.ingest.sentry.io/168844",transport:Go,integrations:[new hi.GlobalHandlers({onunhandledrejection:!1}),new hi.HttpContext],environment:U}),te=new rr(Lt,void 0,ce.version());if(this.session_id&&te.setExtra("sessionId",this.session_id),this.properties){var Ee=I({},this.properties);Ee.userName=Ee.userName?"[Filtered]":void 0,Ee.userData=Ee.userData?"[Filtered]":void 0,Ee.token=Ee.token?"[Filtered]":void 0,te.setExtra("properties",Ee)}if(O){var ze=O.searchParams.get("domain");if(!ze){var ut=O.host.match(/(.*?)\./);ze=ut&&ut[1]||""}ze&&te.setTag("domain",ze)}i.error&&(te.setTag("fatalErrorType",i.error.type),te.setExtra("errorDetails",i.error.details),!((Z=i.error.details)===null||Z===void 0)&&Z.uri&&te.setTag("serverAddress",i.error.details.uri),!((H=i.error.details)===null||H===void 0)&&H.workerGroup&&te.setTag("workerGroup",i.error.details.workerGroup),!((be=i.error.details)===null||be===void 0)&&be.geoGroup&&te.setTag("geoGroup",i.error.details.geoGroup),!((Oe=i.error.details)===null||Oe===void 0)&&Oe.on&&te.setTag("connectionAttempt",i.error.details.on),(Se=i.error.details)!==null&&Se!==void 0&&Se.bundleUrl&&(te.setTag("bundleUrl",i.error.details.bundleUrl),te.setTag("bundleError",i.error.details.sourceError.type))),te.setTags({callMode:this._callObjectMode?B()?"reactNative":(g=this.properties)!==null&&g!==void 0&&(m=g.dailyConfig)!==null&&m!==void 0&&(b=m.callMode)!==null&&b!==void 0&&b.includes("prebuilt")?this.properties.dailyConfig.callMode:"custom":"prebuilt-frame",version:ce.version()});var Pt=((A=i.error)===null||A===void 0?void 0:A.msg)||i.errorMsg;te.run(function(dn){dn.captureException(new Error(Pt))})}}},{key:"_callMachine",value:function(){var i,d,l;return(i=window._daily)===null||i===void 0||(d=i.instances)===null||d===void 0||(l=d[this.callClientId])===null||l===void 0?void 0:l.callMachine}}],[{key:"supportedBrowser",value:function(){if(B())return{supported:!0,mobile:!0,name:"React Native",version:null,supportsScreenShare:!0,supportsSfu:!0,supportsVideoProcessing:!1,supportsAudioProcessing:!1};var i=so.getParser(le());return{supported:!!Si(),mobile:i.getPlatformType()==="mobile",name:i.getBrowserName(),version:i.getBrowserVersion(),supportsFullscreen:!!bi(),supportsScreenShare:!!Ac(),supportsSfu:!!Si(),supportsVideoProcessing:Ea(),supportsAudioProcessing:wa()}}},{key:"version",value:function(){return"0.72.2"}},{key:"createCallObject",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return i.layout="none",new ce(null,i)}},{key:"wrap",value:function(i){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(F(),!i||!i.contentWindow||typeof i.src!="string")throw new Error("DailyIframe::Wrap needs an iframe-like first argument");return d.layout||(d.customLayout?d.layout="custom-v1":d.layout="browser"),new ce(i,d)}},{key:"createFrame",value:function(i,d){var l,g;F(),i&&d?(l=i,g=d):i&&i.append?(l=i,g={}):(l=document.body,g=i||{});var m=g.iframeStyle;m||(m=l===document.body?{position:"fixed",border:"1px solid black",backgroundColor:"white",width:"375px",height:"450px",right:"1em",bottom:"1em"}:{border:0,width:"100%",height:"100%"});var b=document.createElement("iframe");window.navigator&&window.navigator.userAgent.match(/Chrome\/61\./)?b.allow="microphone, camera":b.allow="microphone; camera; autoplay; display-capture; screen-wake-lock",b.style.visibility="hidden",l.appendChild(b),b.style.visibility=null,Object.keys(m).forEach(function(A){return b.style[A]=m[A]}),g.layout||(g.customLayout?g.layout="custom-v1":g.layout="browser");try{return new ce(b,g)}catch(A){throw l.removeChild(b),A}}},{key:"createTransparentFrame",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};F();var d=document.createElement("iframe");return d.allow="microphone; camera; autoplay",d.style.cssText=`
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      border: 0;
      pointer-events: none;
    `,document.body.appendChild(d),i.layout||(i.layout="custom-v1"),ce.wrap(d,i)}},{key:"getCallInstance",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;return i?Fe[i]:Object.values(Fe)[0]}}]),ce}();function He(t,e){var n={};for(var r in t)if(t[r]instanceof MediaStreamTrack)n[r]=vt;else if(r==="dailyConfig"){if(t[r].modifyLocalSdpHook){var s=window._daily.instances[e].customCallbacks||{};s.modifyLocalSdpHook=t[r].modifyLocalSdpHook,window._daily.instances[e].customCallbacks=s,delete t[r].modifyLocalSdpHook}if(t[r].modifyRemoteSdpHook){var o=window._daily.instances[e].customCallbacks||{};o.modifyRemoteSdpHook=t[r].modifyRemoteSdpHook,window._daily.instances[e].customCallbacks=o,delete t[r].modifyRemoteSdpHook}n[r]=t[r]}else n[r]=t[r];return n}function $(t){var e=arguments.length>2?arguments[2]:void 0;if(t!==Ve){var n="".concat(arguments.length>1&&arguments[1]!==void 0?arguments[1]:"This daily-js method"," only supported after join.");throw e&&(n+=" ".concat(e)),console.error(n),new Error(n)}}function zt(t,e){return[tn,Ve].includes(t)||e}function wn(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"This daily-js method",r=arguments.length>3?arguments[3]:void 0;if(zt(t,e)){var s="".concat(n," not supported after joining a meeting.");throw r&&(s+=" ".concat(r)),console.error(s),new Error(s)}}function Yt(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"This daily-js method",n=arguments.length>2?arguments[2]:void 0;if(!t){var r="".concat(e,arguments.length>3&&arguments[3]!==void 0&&arguments[3]?" requires preAuth() or startCamera() to initialize call state.":" requires preAuth(), startCamera(), or join() to initialize call state.");throw n&&(r+=" ".concat(n)),console.error(r),new Error(r)}}function kn(t){if(t){var e="A pre-call quality test is in progress. Please try ".concat(arguments.length>1&&arguments[1]!==void 0?arguments[1]:"This daily-js method"," again once testing has completed. Use stopTestCallQuality() to end it early.");throw console.error(e),new Error(e)}}function he(t){if(!t){var e="".concat(arguments.length>1&&arguments[1]!==void 0?arguments[1]:"This daily-js method"," is only supported on custom callObject instances");throw console.error(e),new Error(e)}}function ae(t){if(t){var e="".concat(arguments.length>1&&arguments[1]!==void 0?arguments[1]:"This daily-js method"," is only supported as part of Daily's Prebuilt");throw console.error(e),new Error(e)}}function F(){if(B())throw new Error("This daily-js method is not currently supported in React Native")}function ft(){if(!B())throw new Error("This daily-js method is only supported in React Native")}function La(t){if(t===void 0)return!0;var e;if(typeof t=="string")e=t;else try{e=JSON.stringify(t),se(JSON.parse(e),t)||console.warn("The userData provided will be modified when serialized.")}catch(n){throw Error("userData must be serializable to JSON: ".concat(n))}if(e.length>4096)throw Error("userData is too large (".concat(e.length," characters). Maximum size suppported is ").concat(4096,"."));return!0}function Pa(t,e){for(var n=e.allowAllParticipantsKey,r=function(p){var y=["local"];return n||y.push("*"),p&&!y.includes(p)},s=function(p){return!!(p.layer===void 0||Number.isInteger(p.layer)&&p.layer>=0||p.layer==="inherit")},o=function(p){return!!p&&!(p.video&&!s(p.video))&&!(p.screenVideo&&!s(p.screenVideo))},a=0,c=Object.entries(t);a<c.length;a++){var u=Ge(c[a],2),f=u[0],h=u[1];if(!r(f)||!o(h))return!1}return!0}function Da(t){return Y(t)==="object"&&!(t.video&&(Y(t.video)!=="object"||!function(s){var o=["type","config"];return!s||Y(s)!=="object"||!function(a){return typeof a!="string"?!1:Object.values(Wt).includes(a)?!0:(console.error("inputSettings video processor type invalid"),!1)}(s.type)||s.config&&(Y(s.config)!=="object"||!function(a,c){var u=Object.keys(c);if(u.length===0)return!0;var f="invalid object in inputSettings -> video -> processor -> config";switch(a){case Wt.BGBLUR:return u.length>1||u[0]!=="strength"?(console.error(f),!1):!(typeof c.strength!="number"||c.strength<=0||c.strength>1||isNaN(c.strength))||(console.error("".concat(f,"; expected: {0 < strength <= 1}, got: ").concat(c.strength)),!1);case Wt.BGIMAGE:return!(c.source!==void 0&&!function(h){if(h.source==="default")return h.type="default",!0;if(h.source instanceof ArrayBuffer)return!0;if(Et(h.source))return h.type="url",!!function(_){var w=new URL(_),k=w.pathname;if(w.protocol==="data:")try{var M=k.substring(k.indexOf(":")+1,k.indexOf(";")).split("/")[1];return _n.includes(M)}catch(x){return console.error("failed to deduce blob content type",x),!1}var P=k.split(".").at(-1).toLowerCase().trim();return _n.includes(P)}(h.source)||(console.error("invalid image type; supported types: [".concat(_n.join(", "),"]")),!1);return p=h.source,y=Number(p),isNaN(y)||!Number.isInteger(y)||y<=0||y>vi?(console.error("invalid image selection; must be an int, > 0, <= ".concat(vi)),!1):(h.type="daily-preselect",!0);var p,y}(c));default:return!0}}(s.type,s.config))?!1:(Object.keys(s).filter(function(a){return!o.includes(a)}).forEach(function(a){console.warn("invalid key inputSettings -> video -> processor : ".concat(a)),delete s[a]}),!0)}(t.video.processor)))&&!(t.audio&&(Y(t.audio)!=="object"||(n=t.audio.processor,r=["type"],!n||Y(n)!=="object"||(Object.keys(n).filter(function(s){return!r.includes(s)}).forEach(function(s){console.warn("invalid key inputSettings -> audio -> processor : ".concat(s)),delete n[s]}),e=n.type,typeof e!="string"||!Object.values(ba).includes(e)&&(console.error("inputSettings audio processor type invalid"),1)))));var e,n,r}function Ia(t,e){var n,r=[];t.video&&!Ea((n=e==null?void 0:e.useLegacyVideoProcessor)!==null&&n!==void 0&&n)&&(delete t.video,r.push("video")),t.audio&&!wa()&&(delete t.audio,r.push("audio")),r.length>0&&console.error("Ignoring settings for browser- or platform-unsupported input processor(s): ".concat(r.join(", ")))}function Qn(){var t=Object.values(Wt).join(" | "),e=Object.values(ba).join(" | ");return"inputSettings must be of the form: { video?: { processor: { type: [ ".concat(t," ], config?: {} } }, audio?: { processor: {type: [ ").concat(e," ] } } }")}function Na(t){var e=t.allowAllParticipantsKey;return"receiveSettings must be of the form { [<remote participant id> | ".concat(Es).concat(e?' | "'.concat(ws,'"'):"","]: ")+'{ [video: [{ layer: [<non-negative integer> | "inherit"] } | "inherit"]], [screenVideo: [{ layer: [<non-negative integer> | "inherit"] } | "inherit"]] }}}'}function Ra(){return"customIntegrations should be an object of type ".concat(JSON.stringify(Hn),".")}function ja(t){if(t&&Y(t)!=="object"||Array.isArray(t))return console.error("customTrayButtons should be an Object of the type ".concat(JSON.stringify(sn),".")),!1;if(t)for(var e=0,n=Object.entries(t);e<n.length;e++)for(var r=Ge(n[e],1)[0],s=0,o=Object.entries(t[r]);s<o.length;s++){var a=Ge(o[s],2),c=a[0],u=a[1];if(c==="iconPath"&&!Et(u)||c==="iconPathDarkMode"&&!Et(u))return console.error("customTrayButton ".concat(c," should be a url.")),!1;var f=sn.id[c];if(!f)return console.error("customTrayButton does not support key ".concat(c)),!1;if(Y(u)!==f)return console.error("customTrayButton ".concat(c," should be a ").concat(f,".")),!1}return!0}function xa(t){if(!t||t&&Y(t)!=="object"||Array.isArray(t))return console.error(Ra()),!1;for(var e=function(p){return"".concat(p," should be ").concat(Hn.id[p])},n=function(p,y){return console.error("customIntegration ".concat(p,": ").concat(y))},r=0,s=Object.entries(t);r<s.length;r++){var o=Ge(s[r],1)[0];if(!("label"in t[o]))return n(o,"label is required"),!1;if(!("location"in t[o]))return n(o,"location is required"),!1;if(!("src"in t[o])&&!("srcdoc"in t[o]))return n(o,"src or srcdoc is required"),!1;for(var a=0,c=Object.entries(t[o]);a<c.length;a++){var u=Ge(c[a],2),f=u[0],h=u[1];switch(f){case"allow":case"csp":case"name":case"referrerPolicy":case"sandbox":if(typeof h!="string")return n(o,e(f)),!1;break;case"iconURL":if(!Et(h))return n(o,"".concat(f," should be a url")),!1;break;case"src":if("srcdoc"in t[o])return n(o,"cannot have both src and srcdoc"),!1;if(!Et(h))return n(o,'src "'.concat(h,'" is not a valid URL')),!1;break;case"srcdoc":if("src"in t[o])return n(o,"cannot have both src and srcdoc"),!1;if(typeof h!="string")return n(o,e(f)),!1;break;case"location":if(!["main","sidebar"].includes(h))return n(o,e(f)),!1;break;case"controlledBy":if(h!=="*"&&h!=="owners"&&(!Array.isArray(h)||h.some(function(p){return typeof p!="string"})))return n(o,e(f)),!1;break;case"shared":if((!Array.isArray(h)||h.some(function(p){return typeof p!="string"}))&&h!=="owners"&&typeof h!="boolean")return n(o,e(f)),!1;break;default:if(!Hn.id[f])return console.error("customIntegration does not support key ".concat(f)),!1}}}return!0}function Fa(t,e){if(e===void 0)return!1;switch(Y(e)){case"string":return Y(t)===e;case"object":if(Y(t)!=="object")return!1;for(var n in t)if(!Fa(t[n],e[n]))return!1;return!0;default:return!1}}function qi(t,e){var n=t.sessionId,r=t.toEndPoint,s=t.useSipRefer;if(!n||!r)throw new Error("".concat(e,"() requires a sessionId and toEndPoint"));if(typeof n!="string"||typeof r!="string")throw new Error("Invalid paramater: sessionId and toEndPoint must be of type string");if(s&&!r.startsWith("sip:"))throw new Error('"toEndPoint" must be a "sip" address');if(!r.startsWith("sip:")&&!r.startsWith("+"))throw new Error("toEndPoint: ".concat(r,' must starts with either "sip:" or "+"'))}function Vi(t){if(Y(t)!=="object")throw new Error('RemoteMediaPlayerSettings: must be "object" type');if(t.state&&!Object.values(Gn).includes(t.state))throw new Error("Invalid value for RemoteMediaPlayerSettings.state, valid values are: "+JSON.stringify(Gn));if(t.volume){if(typeof t.volume!="number")throw new Error('RemoteMediaPlayerSettings.volume: must be "number" type');if(t.volume<0||t.volume>2)throw new Error("RemoteMediaPlayerSettings.volume: must be between 0.0 - 2.0")}}function Yi(t,e,n){return!(typeof t!="number"||t<e||t>n)}function Tn(t,e){return t&&!e&&delete t.data,t}const nu=Object.freeze(Object.defineProperty({__proto__:null,DAILY_ACCESS_LEVEL_FULL:Ss,DAILY_ACCESS_LEVEL_LOBBY:ic,DAILY_ACCESS_LEVEL_NONE:sc,DAILY_ACCESS_UNKNOWN:Jt,DAILY_CAMERA_ERROR_CAM_AND_MIC_IN_USE:vc,DAILY_CAMERA_ERROR_CAM_IN_USE:gc,DAILY_CAMERA_ERROR_CONSTRAINTS:Ec,DAILY_CAMERA_ERROR_MIC_IN_USE:yc,DAILY_CAMERA_ERROR_NOT_FOUND:Sc,DAILY_CAMERA_ERROR_PERMISSIONS:_c,DAILY_CAMERA_ERROR_UNDEF_MEDIADEVICES:bc,DAILY_CAMERA_ERROR_UNKNOWN:wc,DAILY_EVENT_ACCESS_STATE_UPDATED:Fs,DAILY_EVENT_ACTIVE_SPEAKER_CHANGE:oa,DAILY_EVENT_ACTIVE_SPEAKER_MODE_CHANGE:ca,DAILY_EVENT_APP_MSG:Zs,DAILY_EVENT_CAMERA_ERROR:Ls,DAILY_EVENT_CPU_LOAD_CHANGE:da,DAILY_EVENT_ERROR:Yn,DAILY_EVENT_EXIT_FULLSCREEN:yt,DAILY_EVENT_FACE_COUNTS_UPDATED:ha,DAILY_EVENT_FULLSCREEN:gt,DAILY_EVENT_IFRAME_LAUNCH_CONFIG:Ts,DAILY_EVENT_IFRAME_READY_FOR_LAUNCH_CONFIG:ks,DAILY_EVENT_INPUT_SETTINGS_UPDATED:_a,DAILY_EVENT_JOINED_MEETING:Ds,DAILY_EVENT_JOINING_MEETING:Ps,DAILY_EVENT_LANG_UPDATED:ya,DAILY_EVENT_LEFT_MEETING:Is,DAILY_EVENT_LIVE_STREAMING_ERROR:ga,DAILY_EVENT_LIVE_STREAMING_STARTED:fa,DAILY_EVENT_LIVE_STREAMING_STOPPED:ma,DAILY_EVENT_LIVE_STREAMING_UPDATED:pa,DAILY_EVENT_LOADED:Un,DAILY_EVENT_LOADING:As,DAILY_EVENT_LOAD_ATTEMPT_FAILED:Ms,DAILY_EVENT_LOCAL_SCREEN_SHARE_CANCELED:aa,DAILY_EVENT_LOCAL_SCREEN_SHARE_STARTED:ia,DAILY_EVENT_LOCAL_SCREEN_SHARE_STOPPED:sa,DAILY_EVENT_MEETING_SESSION_DATA_ERROR:kc,DAILY_EVENT_MEETING_SESSION_STATE_UPDATED:Bs,DAILY_EVENT_MEETING_SESSION_SUMMARY_UPDATED:Us,DAILY_EVENT_NETWORK_CONNECTION:la,DAILY_EVENT_NETWORK_QUALITY_CHANGE:ua,DAILY_EVENT_NONFATAL_ERROR:Vn,DAILY_EVENT_PARTICIPANT_COUNTS_UPDATED:xs,DAILY_EVENT_PARTICIPANT_JOINED:Ns,DAILY_EVENT_PARTICIPANT_LEFT:js,DAILY_EVENT_PARTICIPANT_UPDATED:Rs,DAILY_EVENT_RECEIVE_SETTINGS_UPDATED:va,DAILY_EVENT_RECORDING_DATA:Xs,DAILY_EVENT_RECORDING_ERROR:Qs,DAILY_EVENT_RECORDING_STARTED:Bn,DAILY_EVENT_RECORDING_STATS:Hs,DAILY_EVENT_RECORDING_STOPPED:qn,DAILY_EVENT_RECORDING_UPLOAD_COMPLETED:Ks,DAILY_EVENT_REMOTE_MEDIA_PLAYER_STARTED:ta,DAILY_EVENT_REMOTE_MEDIA_PLAYER_STOPPED:ra,DAILY_EVENT_REMOTE_MEDIA_PLAYER_UPDATED:na,DAILY_EVENT_STARTED_CAMERA:Os,DAILY_EVENT_THEME_UPDATED:Cs,DAILY_EVENT_TRACK_STARTED:Gs,DAILY_EVENT_TRACK_STOPPED:$s,DAILY_EVENT_TRANSCRIPTION_ERROR:zs,DAILY_EVENT_TRANSCRIPTION_MSG:ea,DAILY_EVENT_TRANSCRIPTION_STARTED:Js,DAILY_EVENT_TRANSCRIPTION_STOPPED:Ws,DAILY_EVENT_WAITING_PARTICIPANT_ADDED:qs,DAILY_EVENT_WAITING_PARTICIPANT_REMOVED:Ys,DAILY_EVENT_WAITING_PARTICIPANT_UPDATED:Vs,DAILY_FATAL_ERROR_CONNECTION:mc,DAILY_FATAL_ERROR_EJECTED:ac,DAILY_FATAL_ERROR_EOL:fc,DAILY_FATAL_ERROR_EXP_ROOM:uc,DAILY_FATAL_ERROR_EXP_TOKEN:lc,DAILY_FATAL_ERROR_MEETING_FULL:hc,DAILY_FATAL_ERROR_NBF_ROOM:oc,DAILY_FATAL_ERROR_NBF_TOKEN:cc,DAILY_FATAL_ERROR_NOT_ALLOWED:pc,DAILY_FATAL_ERROR_NO_ROOM:dc,DAILY_RECEIVE_SETTINGS_ALL_PARTICIPANTS_KEY:ws,DAILY_RECEIVE_SETTINGS_BASE_KEY:Es,DAILY_STATE_ERROR:ke,DAILY_STATE_JOINED:Ve,DAILY_STATE_JOINING:tn,DAILY_STATE_LEFT:Pe,DAILY_STATE_NEW:Fn,DAILY_TRACK_STATE_BLOCKED:Xo,DAILY_TRACK_STATE_INTERRUPTED:nc,DAILY_TRACK_STATE_LOADING:tc,DAILY_TRACK_STATE_OFF:Zo,DAILY_TRACK_STATE_PLAYABLE:rc,DAILY_TRACK_STATE_SENDABLE:ec,default:tu},Symbol.toStringTag,{value:"Module"})),ru=Ga(nu);var Gt={exports:{}},Gi;function iu(){if(Gi)return Gt.exports;Gi=1;var t=typeof Reflect=="object"?Reflect:null,e=t&&typeof t.apply=="function"?t.apply:function(v,T,C){return Function.prototype.apply.call(v,T,C)},n;t&&typeof t.ownKeys=="function"?n=t.ownKeys:Object.getOwnPropertySymbols?n=function(v){return Object.getOwnPropertyNames(v).concat(Object.getOwnPropertySymbols(v))}:n=function(v){return Object.getOwnPropertyNames(v)};function r(E){console&&console.warn&&console.warn(E)}var s=Number.isNaN||function(v){return v!==v};function o(){o.init.call(this)}Gt.exports=o,Gt.exports.once=P,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var a=10;function c(E){if(typeof E!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof E)}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(E){if(typeof E!="number"||E<0||s(E))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+E+".");a=E}}),o.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(v){if(typeof v!="number"||v<0||s(v))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+v+".");return this._maxListeners=v,this};function u(E){return E._maxListeners===void 0?o.defaultMaxListeners:E._maxListeners}o.prototype.getMaxListeners=function(){return u(this)},o.prototype.emit=function(v){for(var T=[],C=1;C<arguments.length;C++)T.push(arguments[C]);var L=v==="error",q=this._events;if(q!==void 0)L=L&&q.error===void 0;else if(!L)return!1;if(L){var R;if(T.length>0&&(R=T[0]),R instanceof Error)throw R;var re=new Error("Unhandled error."+(R?" ("+R.message+")":""));throw re.context=R,re}var Me=q[v];if(Me===void 0)return!1;if(typeof Me=="function")e(Me,this,T);else for(var ct=Me.length,Ot=w(Me,ct),C=0;C<ct;++C)e(Ot[C],this,T);return!0};function f(E,v,T,C){var L,q,R;if(c(T),q=E._events,q===void 0?(q=E._events=Object.create(null),E._eventsCount=0):(q.newListener!==void 0&&(E.emit("newListener",v,T.listener?T.listener:T),q=E._events),R=q[v]),R===void 0)R=q[v]=T,++E._eventsCount;else if(typeof R=="function"?R=q[v]=C?[T,R]:[R,T]:C?R.unshift(T):R.push(T),L=u(E),L>0&&R.length>L&&!R.warned){R.warned=!0;var re=new Error("Possible EventEmitter memory leak detected. "+R.length+" "+String(v)+" listeners added. Use emitter.setMaxListeners() to increase limit");re.name="MaxListenersExceededWarning",re.emitter=E,re.type=v,re.count=R.length,r(re)}return E}o.prototype.addListener=function(v,T){return f(this,v,T,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(v,T){return f(this,v,T,!0)};function h(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(E,v,T){var C={fired:!1,wrapFn:void 0,target:E,type:v,listener:T},L=h.bind(C);return L.listener=T,C.wrapFn=L,L}o.prototype.once=function(v,T){return c(T),this.on(v,p(this,v,T)),this},o.prototype.prependOnceListener=function(v,T){return c(T),this.prependListener(v,p(this,v,T)),this},o.prototype.removeListener=function(v,T){var C,L,q,R,re;if(c(T),L=this._events,L===void 0)return this;if(C=L[v],C===void 0)return this;if(C===T||C.listener===T)--this._eventsCount===0?this._events=Object.create(null):(delete L[v],L.removeListener&&this.emit("removeListener",v,C.listener||T));else if(typeof C!="function"){for(q=-1,R=C.length-1;R>=0;R--)if(C[R]===T||C[R].listener===T){re=C[R].listener,q=R;break}if(q<0)return this;q===0?C.shift():k(C,q),C.length===1&&(L[v]=C[0]),L.removeListener!==void 0&&this.emit("removeListener",v,re||T)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(v){var T,C,L;if(C=this._events,C===void 0)return this;if(C.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):C[v]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete C[v]),this;if(arguments.length===0){var q=Object.keys(C),R;for(L=0;L<q.length;++L)R=q[L],R!=="removeListener"&&this.removeAllListeners(R);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(T=C[v],typeof T=="function")this.removeListener(v,T);else if(T!==void 0)for(L=T.length-1;L>=0;L--)this.removeListener(v,T[L]);return this};function y(E,v,T){var C=E._events;if(C===void 0)return[];var L=C[v];return L===void 0?[]:typeof L=="function"?T?[L.listener||L]:[L]:T?M(L):w(L,L.length)}o.prototype.listeners=function(v){return y(this,v,!0)},o.prototype.rawListeners=function(v){return y(this,v,!1)},o.listenerCount=function(E,v){return typeof E.listenerCount=="function"?E.listenerCount(v):_.call(E,v)},o.prototype.listenerCount=_;function _(E){var v=this._events;if(v!==void 0){var T=v[E];if(typeof T=="function")return 1;if(T!==void 0)return T.length}return 0}o.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function w(E,v){for(var T=new Array(v),C=0;C<v;++C)T[C]=E[C];return T}function k(E,v){for(;v+1<E.length;v++)E[v]=E[v+1];E.pop()}function M(E){for(var v=new Array(E.length),T=0;T<v.length;++T)v[T]=E[T].listener||E[T];return v}function P(E,v){return new Promise(function(T,C){function L(R){E.removeListener(v,q),C(R)}function q(){typeof E.removeListener=="function"&&E.removeListener("error",L),T([].slice.call(arguments))}W(E,v,q,{once:!0}),v!=="error"&&x(E,L,{once:!0})})}function x(E,v,T){typeof E.on=="function"&&W(E,"error",v,T)}function W(E,v,T,C){if(typeof E.on=="function")C.once?E.once(v,T):E.on(v,T);else if(typeof E.addEventListener=="function")E.addEventListener(v,function L(q){C.once&&E.removeEventListener(v,L),T(q)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof E)}return Gt.exports}var pt={},fe={},$i;function su(){if($i)return fe;$i=1,Object.defineProperty(fe,"__esModule",{value:!0}),fe.Api=fe.HttpClient=fe.ContentType=fe.AuthenticationType=void 0;var t;(function(s){s.OAUTH2="oauth2"})(t||(fe.AuthenticationType=t={}));var e;(function(s){s.Json="application/json",s.FormData="multipart/form-data",s.UrlEncoded="application/x-www-form-urlencoded",s.Text="text/plain"})(e||(fe.ContentType=e={}));class n{constructor(o={}){j(this,"baseUrl","");j(this,"securityData",null);j(this,"securityWorker");j(this,"abortControllers",new Map);j(this,"customFetch",(...o)=>fetch(...o));j(this,"baseApiParams",{credentials:"same-origin",headers:{},redirect:"follow",referrerPolicy:"no-referrer"});j(this,"setSecurityData",o=>{this.securityData=o});j(this,"contentFormatters",{[e.Json]:o=>o!==null&&(typeof o=="object"||typeof o=="string")?JSON.stringify(o):o,[e.Text]:o=>o!==null&&typeof o!="string"?JSON.stringify(o):o,[e.FormData]:o=>Object.keys(o||{}).reduce((a,c)=>{const u=o[c];return a.append(c,u instanceof Blob?u:typeof u=="object"&&u!==null?JSON.stringify(u):`${u}`),a},new FormData),[e.UrlEncoded]:o=>this.toQueryString(o)});j(this,"createAbortSignal",o=>{if(this.abortControllers.has(o)){const c=this.abortControllers.get(o);return c?c.signal:void 0}const a=new AbortController;return this.abortControllers.set(o,a),a.signal});j(this,"abortRequest",o=>{const a=this.abortControllers.get(o);a&&(a.abort(),this.abortControllers.delete(o))});j(this,"request",async({body:o,secure:a,path:c,type:u,query:f,format:h,baseUrl:p,cancelToken:y,..._})=>{const w=(typeof a=="boolean"?a:this.baseApiParams.secure)&&this.securityWorker&&await this.securityWorker(this.securityData)||{},k=this.mergeRequestParams(_,w),M=f&&this.toQueryString(f),P=this.contentFormatters[u||e.Json],x=h||k.format;return this.customFetch(`${p||this.baseUrl||""}${c}${M?`?${M}`:""}`,{...k,headers:{...k.headers||{},...u&&u!==e.FormData?{"Content-Type":u}:{}},signal:(y?this.createAbortSignal(y):k.signal)||null,body:typeof o>"u"||o===null?null:P(o)}).then(async W=>{const E=W.clone();E.data=null,E.error=null;const v=x?await W[x]().then(T=>(E.ok?E.data=T:E.error=T,E)).catch(T=>(E.error=T,E)):E;if(y&&this.abortControllers.delete(y),!W.ok)throw v;return v})});Object.assign(this,o)}encodeQueryParam(o,a){return`${encodeURIComponent(o)}=${encodeURIComponent(typeof a=="number"?a:`${a}`)}`}addQueryParam(o,a){return this.encodeQueryParam(a,o[a])}addArrayQueryParam(o,a){return o[a].map(u=>this.encodeQueryParam(a,u)).join("&")}toQueryString(o){const a=o||{};return Object.keys(a).filter(u=>typeof a[u]<"u").map(u=>Array.isArray(a[u])?this.addArrayQueryParam(a,u):this.addQueryParam(a,u)).join("&")}addQueryParams(o){const a=this.toQueryString(o);return a?`?${a}`:""}mergeRequestParams(o,a){return{...this.baseApiParams,...o,...a||{},headers:{...this.baseApiParams.headers||{},...o.headers||{},...a&&a.headers||{}}}}}fe.HttpClient=n;class r extends n{constructor(){super(...arguments);j(this,"call",{callControllerCreate:(a,c={})=>this.request({path:"/call",method:"POST",body:a,secure:!0,type:e.Json,format:"json",...c}),callControllerFindAll:(a,c={})=>this.request({path:"/call",method:"GET",query:a,secure:!0,format:"json",...c}),callControllerFindOne:(a,c={})=>this.request({path:`/call/${a}`,method:"GET",secure:!0,format:"json",...c}),callControllerUpdate:(a,c,u={})=>this.request({path:`/call/${a}`,method:"PATCH",body:c,secure:!0,type:e.Json,format:"json",...u}),callControllerDeleteCallData:(a,c={})=>this.request({path:`/call/${a}`,method:"DELETE",secure:!0,format:"json",...c}),callControllerCreatePhoneCall:(a,c={})=>this.request({path:"/call/phone",method:"POST",body:a,secure:!0,type:e.Json,format:"json",...c}),callControllerCreateWebCall:(a,c={})=>this.request({path:"/call/web",method:"POST",body:a,secure:!0,type:e.Json,format:"json",...c})});j(this,"v2",{callControllerFindAllPaginated:(a,c={})=>this.request({path:"/v2/call",method:"GET",query:a,secure:!0,format:"json",...c}),callControllerFindAllMetadataPaginated:(a,c={})=>this.request({path:"/v2/call/metadata",method:"GET",query:a,secure:!0,format:"json",...c}),phoneNumberControllerFindAllPaginated:(a,c={})=>this.request({path:"/v2/phone-number",method:"GET",query:a,secure:!0,format:"json",...c})});j(this,"assistant",{assistantControllerCreate:(a,c={})=>this.request({path:"/assistant",method:"POST",body:a,secure:!0,type:e.Json,format:"json",...c}),assistantControllerFindAll:(a,c={})=>this.request({path:"/assistant",method:"GET",query:a,secure:!0,format:"json",...c}),assistantControllerFindOne:(a,c={})=>this.request({path:`/assistant/${a}`,method:"GET",secure:!0,format:"json",...c}),assistantControllerUpdate:(a,c,u={})=>this.request({path:`/assistant/${a}`,method:"PATCH",body:c,secure:!0,type:e.Json,format:"json",...u}),assistantControllerReplace:(a,c,u={})=>this.request({path:`/assistant/${a}`,method:"PUT",body:c,secure:!0,type:e.Json,format:"json",...u}),assistantControllerRemove:(a,c={})=>this.request({path:`/assistant/${a}`,method:"DELETE",secure:!0,format:"json",...c})});j(this,"phoneNumber",{phoneNumberControllerBuy:(a,c={})=>this.request({path:"/phone-number/buy",method:"POST",body:a,secure:!0,type:e.Json,format:"json",...c}),phoneNumberControllerImportTwilio:(a,c={})=>this.request({path:"/phone-number/import/twilio",method:"POST",body:a,secure:!0,type:e.Json,format:"json",...c}),phoneNumberControllerImportVonage:(a,c={})=>this.request({path:"/phone-number/import/vonage",method:"POST",body:a,secure:!0,type:e.Json,format:"json",...c}),phoneNumberControllerCreate:(a,c={})=>this.request({path:"/phone-number",method:"POST",body:a,secure:!0,type:e.Json,format:"json",...c}),phoneNumberControllerFindAll:(a,c={})=>this.request({path:"/phone-number",method:"GET",query:a,secure:!0,format:"json",...c}),phoneNumberControllerFindOne:(a,c={})=>this.request({path:`/phone-number/${a}`,method:"GET",secure:!0,format:"json",...c}),phoneNumberControllerUpdate:(a,c,u={})=>this.request({path:`/phone-number/${a}`,method:"PATCH",body:c,secure:!0,type:e.Json,format:"json",...u}),phoneNumberControllerRemove:(a,c={})=>this.request({path:`/phone-number/${a}`,method:"DELETE",secure:!0,format:"json",...c})});j(this,"squad",{squadControllerCreate:(a,c={})=>this.request({path:"/squad",method:"POST",body:a,secure:!0,type:e.Json,format:"json",...c}),squadControllerFindAll:(a,c={})=>this.request({path:"/squad",method:"GET",query:a,secure:!0,format:"json",...c}),squadControllerFindOne:(a,c={})=>this.request({path:`/squad/${a}`,method:"GET",secure:!0,format:"json",...c}),squadControllerUpdate:(a,c,u={})=>this.request({path:`/squad/${a}`,method:"PATCH",body:c,secure:!0,type:e.Json,format:"json",...u}),squadControllerRemove:(a,c={})=>this.request({path:`/squad/${a}`,method:"DELETE",secure:!0,format:"json",...c})});j(this,"knowledgeBase",{knowledgeBaseControllerCreate:(a,c={})=>this.request({path:"/knowledge-base",method:"POST",body:a,secure:!0,type:e.Json,format:"json",...c}),knowledgeBaseControllerFindAll:(a,c={})=>this.request({path:"/knowledge-base",method:"GET",query:a,secure:!0,format:"json",...c}),knowledgeBaseControllerFindOne:(a,c={})=>this.request({path:`/knowledge-base/${a}`,method:"GET",secure:!0,format:"json",...c}),knowledgeBaseControllerUpdate:(a,c={})=>this.request({path:`/knowledge-base/${a}`,method:"PATCH",secure:!0,format:"json",...c}),knowledgeBaseControllerRemove:(a,c={})=>this.request({path:`/knowledge-base/${a}`,method:"DELETE",secure:!0,format:"json",...c})});j(this,"block",{blockControllerCreate:(a,c={})=>this.request({path:"/block",method:"POST",body:a,secure:!0,type:e.Json,format:"json",...c}),blockControllerFindAll:(a,c={})=>this.request({path:"/block",method:"GET",query:a,secure:!0,format:"json",...c}),blockControllerFindOne:(a,c={})=>this.request({path:`/block/${a}`,method:"GET",secure:!0,format:"json",...c}),blockControllerUpdate:(a,c,u={})=>this.request({path:`/block/${a}`,method:"PATCH",body:c,secure:!0,type:e.Json,format:"json",...u}),blockControllerRemove:(a,c={})=>this.request({path:`/block/${a}`,method:"DELETE",secure:!0,format:"json",...c})});j(this,"tool",{toolControllerCreate:(a,c={})=>this.request({path:"/tool",method:"POST",body:a,secure:!0,type:e.Json,format:"json",...c}),toolControllerFindAll:(a,c={})=>this.request({path:"/tool",method:"GET",query:a,secure:!0,format:"json",...c}),toolControllerFindOne:(a,c={})=>this.request({path:`/tool/${a}`,method:"GET",secure:!0,format:"json",...c}),toolControllerUpdate:(a,c,u={})=>this.request({path:`/tool/${a}`,method:"PATCH",body:c,secure:!0,type:e.Json,format:"json",...u}),toolControllerRemove:(a,c={})=>this.request({path:`/tool/${a}`,method:"DELETE",secure:!0,format:"json",...c})});j(this,"file",{fileControllerCreateDeprecated:(a,c={})=>this.request({path:"/file/upload",method:"POST",body:a,secure:!0,type:e.FormData,format:"json",...c}),fileControllerCreate:(a,c={})=>this.request({path:"/file",method:"POST",body:a,secure:!0,type:e.FormData,format:"json",...c}),fileControllerFindAll:(a={})=>this.request({path:"/file",method:"GET",secure:!0,format:"json",...a}),fileControllerFindOne:(a,c={})=>this.request({path:`/file/${a}`,method:"GET",secure:!0,format:"json",...c}),fileControllerUpdate:(a,c,u={})=>this.request({path:`/file/${a}`,method:"PATCH",body:c,secure:!0,type:e.Json,format:"json",...u}),fileControllerRemove:(a,c={})=>this.request({path:`/file/${a}`,method:"DELETE",secure:!0,format:"json",...c})});j(this,"metrics",{analyticsControllerFindAllDeprecated:(a,c={})=>this.request({path:"/metrics",method:"GET",query:a,secure:!0,format:"json",...c})});j(this,"analytics",{analyticsControllerQuery:(a,c={})=>this.request({path:"/analytics",method:"POST",body:a,secure:!0,type:e.Json,format:"json",...c}),analyticsControllerGetQuery:(a,c={})=>this.request({path:"/analytics",method:"GET",body:a,secure:!0,type:e.Json,format:"json",...c})});j(this,"log",{loggingControllerGetCallLogs:(a,c={})=>this.request({path:"/log",method:"GET",query:a,secure:!0,format:"json",...c})});j(this,"logs",{loggingControllerQueryLogs:(a,c={})=>this.request({path:"/logs",method:"GET",query:a,secure:!0,format:"json",...c})});j(this,"chat",{chatControllerChat:(a,c={})=>this.request({path:"/chat",method:"POST",body:a,secure:!0,type:e.Json,format:"json",...c})});j(this,"credential",{credentialControllerCreate:(a,c={})=>this.request({path:"/credential",method:"POST",body:a,secure:!0,type:e.Json,format:"json",...c}),credentialControllerFindAll:(a,c={})=>this.request({path:"/credential",method:"GET",query:a,secure:!0,format:"json",...c}),credentialControllerFindOne:(a,c={})=>this.request({path:`/credential/${a}`,method:"GET",secure:!0,format:"json",...c}),credentialControllerRemove:(a,c={})=>this.request({path:`/credential/${a}`,method:"DELETE",secure:!0,format:"json",...c})});j(this,"provider",{providerControllerGetWorkflows:(a,c,u={})=>this.request({path:`/${a}/workflows`,method:"GET",query:c,secure:!0,format:"json",...u}),providerControllerGetWorkflowTriggerHook:(a,c,u={})=>this.request({path:`/${a}/workflows/${c}/hooks`,method:"GET",secure:!0,format:"json",...u}),providerControllerGetLocations:(a,c={})=>this.request({path:`/${a}/locations`,method:"GET",secure:!0,format:"json",...c}),voiceProviderControllerSearchVoices:(a,c,u={})=>this.request({path:`/${a}/voices/search`,method:"GET",query:c,secure:!0,format:"json",...u}),voiceProviderControllerSearchVoice:(a,c,u={})=>this.request({path:`/${a}/voice/search`,method:"GET",query:c,secure:!0,format:"json",...u}),voiceProviderControllerAddVoices:(a,c,u={})=>this.request({path:`/${a}/voices/add`,method:"POST",body:c,secure:!0,type:e.Json,format:"json",...u}),voiceProviderControllerAddVoice:(a,c,u={})=>this.request({path:`/${a}/voice/add`,method:"POST",body:c,secure:!0,type:e.Json,format:"json",...u})});j(this,"v11Labs",{voiceProviderControllerCloneVoices:(a,c={})=>this.request({path:"/11labs/voice/clone",method:"POST",body:a,secure:!0,type:e.FormData,...c})});j(this,"token",{tokenControllerCreate:(a,c={})=>this.request({path:"/token",method:"POST",body:a,secure:!0,type:e.Json,format:"json",...c}),tokenControllerFindAll:(a,c={})=>this.request({path:"/token",method:"GET",query:a,secure:!0,format:"json",...c}),tokenControllerFindOne:(a,c={})=>this.request({path:`/token/${a}`,method:"GET",secure:!0,format:"json",...c}),tokenControllerUpdate:(a,c,u={})=>this.request({path:`/token/${a}`,method:"PATCH",body:c,secure:!0,type:e.Json,format:"json",...u}),tokenControllerRemove:(a,c={})=>this.request({path:`/token/${a}`,method:"DELETE",secure:!0,format:"json",...c})});j(this,"voiceLibrary",{voiceLibraryControllerVoiceGetByProvider:(a,c,u={})=>this.request({path:`/voice-library/${a}`,method:"GET",query:c,secure:!0,format:"json",...u}),voiceLibraryControllerVoiceGetAccentsByProvider:(a,c={})=>this.request({path:`/voice-library/${a}/accents`,method:"GET",secure:!0,format:"json",...c}),voiceLibraryControllerVoiceLibrarySyncByProvider:(a,c={})=>this.request({path:`/voice-library/sync/${a}`,method:"POST",secure:!0,format:"json",...c}),voiceLibraryControllerVoiceLibrarySyncDefaultVoices:(a,c={})=>this.request({path:"/voice-library/sync",method:"POST",body:a,secure:!0,type:e.Json,format:"json",...c})})}}return fe.Api=r,fe}var Ji;function au(){if(Ji)return pt;Ji=1,Object.defineProperty(pt,"__esModule",{value:!0}),pt.client=void 0;const t=su(),e=new t.Api({baseUrl:"https://api.vapi.ai",baseApiParams:{secure:!0},securityWorker:async n=>{if(n)return{headers:{Authorization:`Bearer ${n}`}}}});return pt.client=e,pt}var Wi;function ou(){if(Wi)return lt;Wi=1;var t=lt.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(lt,"__esModule",{value:!0});const e=t(ru),n=t(iu()),r=au();async function s(h,p){h.muted=!1,h.autoplay=!0,p!=null&&(h.srcObject=new MediaStream([p]),await h.play())}async function o(h,p){const y=document.createElement("audio");return y.dataset.participantId=p,document.body.appendChild(y),await s(y,h),y}function a(h){const p=document.querySelector(`audio[data-participant-id="${h}"]`);p==null||p.remove()}function c(h,p,y,_){h.participant.local||p.updateParticipant(h.participant.session_id,{setSubscribedTracks:{audio:!0,video:y||_}})}class u extends n.default{on(p,y){return super.on(p,y),this}once(p,y){return super.once(p,y),this}emit(p,...y){return super.emit(p,...y)}removeListener(p,y){return super.removeListener(p,y),this}removeAllListeners(p){return super.removeAllListeners(p),this}}class f extends u{constructor(y,_,w,k){super();j(this,"started",!1);j(this,"call",null);j(this,"speakingTimeout",null);j(this,"dailyCallConfig",{});j(this,"dailyCallObject",{});j(this,"hasEmittedCallEndedStatus",!1);r.client.baseUrl=_??"https://api.vapi.ai",r.client.setSecurityData(y),this.dailyCallConfig=w??{},this.dailyCallObject=k??{}}cleanup(){var y;this.started=!1,this.hasEmittedCallEndedStatus=!1,(y=this.call)==null||y.destroy(),this.call=null,this.speakingTimeout=null}isMobileDevice(){if(typeof navigator>"u")return!1;const y=navigator.userAgent;return/android|iphone|ipad|ipod|iemobile|blackberry|bada/i.test(y.toLowerCase())}async sleep(y){return new Promise(_=>setTimeout(_,y))}async start(y,_,w){var k,M,P;if(!y&&!w)throw new Error("Assistant or Squad must be provided.");if(this.started)return null;this.started=!0;try{const x=(await r.client.call.callControllerCreateWebCall({assistant:typeof y=="string"?void 0:y,assistantId:typeof y=="string"?y:void 0,assistantOverrides:_,squad:typeof w=="string"?void 0:w,squadId:typeof w=="string"?w:void 0})).data;this.call&&this.cleanup();const W=((k=x==null?void 0:x.artifactPlan)==null?void 0:k.videoRecordingEnabled)??!1,E=((M=x.transport)==null?void 0:M.assistantVideoEnabled)??!1;if(this.call=e.default.createCallObject({audioSource:this.dailyCallObject.audioSource??!0,videoSource:this.dailyCallObject.videoSource??W,dailyConfig:this.dailyCallConfig}),(P=this.call.iframe())==null||P.style.setProperty("display","none"),this.call.on("left-meeting",()=>{var v;this.emit("call-end"),this.hasEmittedCallEndedStatus||(this.emit("message",{type:"status-update",status:"ended",endedReason:"customer-ended-call"}),this.hasEmittedCallEndedStatus=!0),W&&((v=this.call)==null||v.stopRecording()),this.cleanup()}),this.call.on("error",v=>{var T;this.emit("error",v),W&&((T=this.call)==null||T.stopRecording())}),this.call.on("camera-error",v=>{this.emit("error",v)}),this.call.on("track-started",async v=>{var T,C,L;!v||!v.participant||(T=v.participant)!=null&&T.local||((C=v.participant)==null?void 0:C.user_name)==="Vapi Speaker"&&(v.track.kind==="video"&&this.emit("video",v.track),v.track.kind==="audio"&&await o(v.track,v.participant.session_id),(L=this.call)==null||L.sendAppMessage("playable"))}),this.call.on("participant-joined",v=>{!v||!this.call||c(v,this.call,W,E)}),this.call.on("participant-updated",v=>{v&&this.emit("daily-participant-updated",v.participant)}),this.call.on("participant-left",v=>{v&&a(v.participant.session_id)}),this.isMobileDevice()&&await this.sleep(1e3),await this.call.join({url:x.webCallUrl,subscribeToTracksAutomatically:!1}),W){const v=new Date().getTime();this.call.startRecording({width:1280,height:720,backgroundColor:"#FF1F2D3D",layout:{preset:"default"}}),this.call.on("recording-started",()=>{this.send({type:"control",control:"say-first-message",videoRecordingStartDelaySeconds:(new Date().getTime()-v)/1e3})})}return this.call.startRemoteParticipantsAudioLevelObserver(100),this.call.on("remote-participants-audio-level",v=>{v&&this.handleRemoteParticipantsAudioLevel(v)}),this.call.on("app-message",v=>this.onAppMessage(v)),this.call.on("nonfatal-error",v=>{var T;(v==null?void 0:v.type)==="audio-processor-error"&&((T=this.call)==null||T.updateInputSettings({audio:{processor:{type:"none"}}}).then(()=>{var C;(C=this.call)==null||C.setLocalAudio(!0)}))}),this.call.updateInputSettings({audio:{processor:{type:"noise-cancellation"}}}),x}catch(x){return console.error(x),this.emit("error",x),this.cleanup(),null}}onAppMessage(y){if(y)try{if(y.data==="listening")return this.emit("call-start");try{const _=JSON.parse(y.data);this.emit("message",_),_&&"type"in _&&"status"in _&&_.type==="status-update"&&_.status==="ended"&&(this.hasEmittedCallEndedStatus=!0)}catch(_){console.log("Error parsing message data: ",_)}}catch(_){console.error(_)}}handleRemoteParticipantsAudioLevel(y){const _=Object.values(y.participantsAudioLevel).reduce((k,M)=>k+M,0);this.emit("volume-level",Math.min(1,_/.15)),_>.01&&(this.speakingTimeout?(clearTimeout(this.speakingTimeout),this.speakingTimeout=null):this.emit("speech-start"),this.speakingTimeout=setTimeout(()=>{this.emit("speech-end"),this.speakingTimeout=null},1e3))}stop(){var y;this.started=!1,(y=this.call)==null||y.destroy(),this.call=null}send(y){var _;(_=this.call)==null||_.sendAppMessage(JSON.stringify(y))}setMuted(y){if(!this.call)throw new Error("Call object is not available.");this.call.setLocalAudio(!y)}isMuted(){return this.call?this.call.localAudio()===!1:!1}say(y,_){this.send({type:"say",message:y,endCallAfterSpoken:_})}setInputDevicesAsync(y){var _;(_=this.call)==null||_.setInputDevicesAsync(y)}setOutputDeviceAsync(y){var _;(_=this.call)==null||_.setOutputDeviceAsync(y)}getDailyCallObject(){return this.call}startScreenSharing(y,_){var w;(w=this.call)==null||w.startScreenShare({displayMediaOptions:y,screenVideoSendSettings:_})}stopScreenSharing(){var y;(y=this.call)==null||y.stopScreenShare()}}return lt.default=f,lt}var cu=ou();const uu=$a(cu),lu=t=>{const[e]=Q.useState(()=>new uu("36b94607-473b-410d-8401-0808d7162d2d")),[n,r]=Q.useState("idle"),[s,o]=Q.useState(!1);return Q.useEffect(()=>{const u=()=>{r("active")},f=()=>{r("idle")},h=()=>{o(!0)},p=()=>{o(!1)},y=_=>{console.error("Vapi error:",_),r("idle")};return e.on("call-start",u),e.on("call-end",f),e.on("speech-start",h),e.on("speech-end",p),e.on("error",y),()=>{e.stop()}},[e]),{callStatus:n,assistantSpeaking:s,startCall:()=>{n==="idle"&&(r("connecting"),e.start(t,{}))},stopCall:()=>{n!=="idle"&&e.stop()}}},du="9ac36489-6392-452f-8858-bb53ddd3ab37",gu=()=>{const{listening:t,startListening:e}=Ha(),{circleSizeSpline:n}=Qa(t),{callStatus:r,assistantSpeaking:s,startCall:o,stopCall:a}=lu(du);Q.useEffect(()=>{t&&r==="idle"&&o();let f;return!t&&r!=="idle"&&(f=setTimeout(()=>{t||a()},6e4)),()=>{f&&clearTimeout(f)}},[t,r,o,a]);const c=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),[u]=Q.useState("Hello! My name is AISHA. Ready to talk?");return X.jsxs("div",{className:"bg-black text-white w-full px-6 flex flex-col items-center",children:[X.jsxs("div",{className:`border w-full items-center justify-center border-white-25 flex flex-col max-w-[1280px] min-[1920px]:max-w-[66.6vw] ${c?"h-fit":"min-h-[596px] h-[calc(100vh-112px-112px)]"}`,children:[X.jsx(Ka,{listening:t,AIMessage:u}),X.jsx(za,{listening:t,startListening:e,circleSize:n,assistantSpeaking:s}),X.jsx(Wa,{listening:t||r==="active",startListening:e,callActive:r==="active",stopCall:a})]}),X.jsx(Ja,{})]})};export{gu as default};
